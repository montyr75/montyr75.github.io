/**
 * MD5 Encrypt
 * @license MIT
 * @link https://github.com/blueimp/JavaScript-MD5
 */

/**
 * Inspector 0.1
 * @license MIT or new BSD license.
 */

/**
 * Validator 0.1
 * @author Robert Taylor
 * @license MIT or new BSD license.
 * @desc Common validators
 */

/**
 * Cache 0.2.1
 * @author Robert Taylor
 * @license MIT or new BSD license.
 */

/**
 * Loader 0.1
 * @author Robert Taylor
 * @license MIT or new BSD license.
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * Decrypt 0.1
 * @license MIT or new BSD license
 * @desc Source found on Internet but source unknown
 */

/**
 * Compare 0.1
 * @author Robert Taylor
 * @license MIT or new BSD license.
 */

/**
 * Async 0.1
 * @author Robert Taylor
 * @license MIT or new BSD license.
 *
 * Based on the concepts provided by Async.js
 * @link https://github.com/caolan/async
 */

/**
 * TreeView 0.1
 * @author Rob Taylor
 * @version 0.1.6
 * @license MIT
 * @link http://github.com/eu81273/angular.treeview
 * @desc Fork of angular.treeview.js
 */

/** @license
 * RequireJS plugin for loading files without adding the JS extension, useful for
 * JSONP services and any other kind of resource that already contain a file
 * extension or that shouldn't have one (like dynamic scripts).
 * Author: Miller Medeiros
 * Version: 0.3.1 (2011/12/07)
 * Released under the MIT license
 */

define("config",[],function(){return{}}),define("consts",[],function(){return{CRYPT_KEY:"hammertime",STRINGS:"strings",CLOSE_DIALOGS:"closeDialogs",OPEN_DIALOG:"openDialog",OPEN_MENU:"openMenu",CLOSE_MENU:"closeMenu",DISPATCH:"hammer::dispatch",RESET:"hammer::reset",ALERT:"hammer::alert",READY:"hammer::ready",VIEW_PATH:require.toUrl("../partials/")}}),define("utils/md5",[],function(){return function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,s,o;return i=e&2147483648,s=t&2147483648,n=e&1073741824,r=t&1073741824,o=(e&1073741823)+(t&1073741823),n&r?o^2147483648^i^s:n|r?o&1073741824?o^3221225472^i^s:o^1073741824^i^s:o^i^s}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function s(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function u(e,i,s,o,u,a,f){return e=n(e,n(n(r(i,s,o),u),f)),n(t(e,a),i)}function a(e,r,s,o,u,a,f){return e=n(e,n(n(i(r,s,o),u),f)),n(t(e,a),r)}function f(e,r,i,o,u,a,f){return e=n(e,n(n(s(r,i,o),u),f)),n(t(e,a),r)}function l(e,r,i,s,u,a,f){return e=n(e,n(n(o(r,i,s),u),f)),n(t(e,a),r)}function c(e){var t,n=e.length,r=n+8,i=(r-r%64)/64,s=(i+1)*16,o=Array(s-1),u=0,a=0;while(a<n)t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|e.charCodeAt(a)<<u,a++;return t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|128<<u,o[s-2]=n<<3,o[s-1]=n>>>29,o}function h(e){var t="",n="",r,i;for(i=0;i<=3;i++)r=e>>>i*8&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2);return t}function p(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var d=Array(),v,m,g,y,b,w,E,S,x,T=7,N=12,C=17,k=22,L=5,A=9,O=14,M=20,_=4,D=11,P=16,H=23,B=6,j=10,F=15,I=21;e=p(e),d=c(e),w=1732584193,E=4023233417,S=2562383102,x=271733878;for(v=0;v<d.length;v+=16)m=w,g=E,y=S,b=x,w=u(w,E,S,x,d[v+0],T,3614090360),x=u(x,w,E,S,d[v+1],N,3905402710),S=u(S,x,w,E,d[v+2],C,606105819),E=u(E,S,x,w,d[v+3],k,3250441966),w=u(w,E,S,x,d[v+4],T,4118548399),x=u(x,w,E,S,d[v+5],N,1200080426),S=u(S,x,w,E,d[v+6],C,2821735955),E=u(E,S,x,w,d[v+7],k,4249261313),w=u(w,E,S,x,d[v+8],T,1770035416),x=u(x,w,E,S,d[v+9],N,2336552879),S=u(S,x,w,E,d[v+10],C,4294925233),E=u(E,S,x,w,d[v+11],k,2304563134),w=u(w,E,S,x,d[v+12],T,1804603682),x=u(x,w,E,S,d[v+13],N,4254626195),S=u(S,x,w,E,d[v+14],C,2792965006),E=u(E,S,x,w,d[v+15],k,1236535329),w=a(w,E,S,x,d[v+1],L,4129170786),x=a(x,w,E,S,d[v+6],A,3225465664),S=a(S,x,w,E,d[v+11],O,643717713),E=a(E,S,x,w,d[v+0],M,3921069994),w=a(w,E,S,x,d[v+5],L,3593408605),x=a(x,w,E,S,d[v+10],A,38016083),S=a(S,x,w,E,d[v+15],O,3634488961),E=a(E,S,x,w,d[v+4],M,3889429448),w=a(w,E,S,x,d[v+9],L,568446438),x=a(x,w,E,S,d[v+14],A,3275163606),S=a(S,x,w,E,d[v+3],O,4107603335),E=a(E,S,x,w,d[v+8],M,1163531501),w=a(w,E,S,x,d[v+13],L,2850285829),x=a(x,w,E,S,d[v+2],A,4243563512),S=a(S,x,w,E,d[v+7],O,1735328473),E=a(E,S,x,w,d[v+12],M,2368359562),w=f(w,E,S,x,d[v+5],_,4294588738),x=f(x,w,E,S,d[v+8],D,2272392833),S=f(S,x,w,E,d[v+11],P,1839030562),E=f(E,S,x,w,d[v+14],H,4259657740),w=f(w,E,S,x,d[v+1],_,2763975236),x=f(x,w,E,S,d[v+4],D,1272893353),S=f(S,x,w,E,d[v+7],P,4139469664),E=f(E,S,x,w,d[v+10],H,3200236656),w=f(w,E,S,x,d[v+13],_,681279174),x=f(x,w,E,S,d[v+0],D,3936430074),S=f(S,x,w,E,d[v+3],P,3572445317),E=f(E,S,x,w,d[v+6],H,76029189),w=f(w,E,S,x,d[v+9],_,3654602809),x=f(x,w,E,S,d[v+12],D,3873151461),S=f(S,x,w,E,d[v+15],P,530742520),E=f(E,S,x,w,d[v+2],H,3299628645),w=l(w,E,S,x,d[v+0],B,4096336452),x=l(x,w,E,S,d[v+7],j,1126891415),S=l(S,x,w,E,d[v+14],F,2878612391),E=l(E,S,x,w,d[v+5],I,4237533241),w=l(w,E,S,x,d[v+12],B,1700485571),x=l(x,w,E,S,d[v+3],j,2399980690),S=l(S,x,w,E,d[v+10],F,4293915773),E=l(E,S,x,w,d[v+1],I,2240044497),w=l(w,E,S,x,d[v+8],B,1873313359),x=l(x,w,E,S,d[v+15],j,4264355552),S=l(S,x,w,E,d[v+6],F,2734768916),E=l(E,S,x,w,d[v+13],I,1309151649),w=l(w,E,S,x,d[v+4],B,4149444226),x=l(x,w,E,S,d[v+11],j,3174756917),S=l(S,x,w,E,d[v+2],F,718787259),E=l(E,S,x,w,d[v+9],I,3951481745),w=n(w,m),E=n(E,g),S=n(S,y),x=n(x,b);var q=h(w)+h(E)+h(S)+h(x);return q.toLowerCase()}}),define("utils/data",["jquery","underscore"],function($,_){function difference(e,t){var n={},r;for(var i in t)if(i in e)if(_.isDate(t[i]))r=_.isDate(e[i])?e[i].toISOString():e[i],t[i].toISOString()!==r&&(n[i]=t[i]);else if(_.isObject(t[i])&&!_.isArray(t[i])){var s=difference(e[i],t[i]);_.isEmpty(s)||(n[i]=s)}else _.isEqual(e[i],t[i])||(n[i]=t[i]);else n[i]=t[i];return _.isEmpty(n)?null:n}return{diff:difference,clone:function(e,t){return t?$.extend(!0,{},e):_.clone(e)},require:function(e,t){if(_.isUndefined(e))throw _.isUndefined(t)&&(t='The property "'+e+'" is required'),new Error(t)},optional:function(e,t){return _.isUndefined(e)?t:e},toArray:function(e){try{if(_.isArray(e))return e;if(!_.isUndefined(e))return[].concat(e)}catch(t){}return[]},toObject:function(e){return _.isUndefined(e)?{}:_.isObject(e)?e:{value:e}},rawEval:function(val){try{val="(function(){return "+val+";})()",val=eval(val)}catch(e){val="###invalid###"}return val},evaluate:function(e,t){var n=(new Function("with(this) { return "+t+"}")).apply(e);return n+""=="NaN"&&(n=""),n}}}),define("utils/parser",["jquery","underscore","utils/data"],function(e,t,n){return{getStrings:function(e){return e.match(/[\w\/\.-]+(?=<\/strings)/gim)},getModels:function(e){var n,r,i,s,o,u=[];n=e.match(/\{\{(\s+)?([\w\/])+(?=::)/gm),o={};if(n){r=0,i=n.length;while(r<i)s=n[r].substr(2).trim(),o[s]||(o[s]=!0,u.push(s)),r+=1}n=e.match(/\bproperty\b="[\w\/?]+\:\:/gm);if(n){r=0,i=n.length;while(r<i)s=n[r].substring(10,n[r].length-2).trim(),o[s]||(o[s]=!0,u.push(s)),r+=1}return u=t.uniq(u),u},getCommands:function(e){var t=e.match(/command="\w+\:\:\w+/gm),n={},r=[];if(t){var i=0,s=t.length,o;while(i<s)o=t[i].substr(9).split("::")[0].trim(),n[o]||(n[o]=!0,r.push(o)),i+=1}return r},hasBinds:function(e){return typeof e=="string"&&e.indexOf("{{")!==-1},transformProp:function(e,t){if(this.hasBinds(e)){var n=t?"{{":"",r=t?"}}":"";e=e.replace(/([a-z])\/([a-z])/gm,"$1.$2"),e=e.replace(/\{\{[\s+]?([\w\.\$]+)[\s+]?\}\}/gm,n+"properties.$1"+r),e=e.replace(/\{\{[\s+]?([\w\.]+)\:\:([\w\.\$]+)[\s+]?\}\}/gm,n+"session.data.$1.$2"+r)}return e},transformEval:function(e){var t,r;if(typeof e=="string"){var i=e.indexOf("##"),s=e.indexOf("##",i+2);s>i&&(r=e.match(/\#\#[^\b\#\#\b]+\#\#/gim),angular.forEach(r,function(r){t=n.rawEval(r.substring(2,r.length-2)),e=e.split(r).join(t)}))}return e},hasPath:function(e){return/\#\w+/.test(e+"")},hasString:function(e){return/\$\w+/.test(e+"")},replacePaths:function(e,t,n,r){return this.replace("#",e,t,n,r)},replaceStrings:function(e,t,n,r){return this.replace("$",e,t,n,r)},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},replace:function(e,n,r,i,s){if(!n)return r;i=i||"",s=s||"";var o=r.match(new RegExp("\\"+e+"\\w+","gi"));if(!o)return r;o=t.uniq(o);var u,a;for(var f=0,l=o?o.length:0;f<l;f++)u=o[f],a=u.substr(1),n[i+a+s]!==undefined&&(r=r.replace(new RegExp("\\"+u+"\\b","g"),n[i+a+s]));return r},getAttr:function(e,t){var n=new RegExp(t+'="([^"]+)',"gi"),r=n.exec(e);return r?r[1]:""},getNodeContent:function(e,t){var n=new RegExp("<"+t+".+</"+t+">","g"),r=e.match(n);return r?r[0]:null},replaceNodeContent:function(e,t,n){var r=new RegExp("<"+t+".+</"+t+">","g");return e.replace(r,n)},getUrls:function(e,t){var n,r,i;if(typeof e=="string"){var s=new RegExp('=\\"([^\\"]+\\.('+t+')\\")',"gi");n=e.match(s);for(r=0,i=n?n.length:0;r<i;++r)n[r]=n[r].replace(/(\"|=)/g,"")}return n||[]},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},toJson:function(t){return e.xml2json(t)}}}),define("utils/inspector",[],function(){function e(e){this.data=e||{}}var t=e.prototype;return t.get=function(e,t){var n=e.split(t||"."),r="",i=0,s=n.length,o=this.data;while(i<s){r=n[i],o=o[r];if(o===undefined)break;i+=1}return o},t.set=function(e,t,n){var r=e.split(n||"."),i="",s=0,o=r.length-1,u=this.data;while(s<o)i=r[s],u[i]===undefined?u=u[i]={}:u=u[i],s+=1;return r.length>1&&(u[r.pop()]=t),this.data},t.path=function(e){return this.set(e,{})},function(t){return new e(t)}}),define("utils/validator",[],function(){var e={};return e.isJson=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e}),define("utils/cache",["underscore"],function(e){var t,n;return n={},t=function(){var t=[];this.set=function(e,n){return t[e]=n,n},this.get=function(n,r,i){return e.has(t,n)?t[n]:(i&&this.set(n,r),r)},this.getCopy=function(t,n,r){var i=this.get(t,n,r);return e.clone(i)},this.merge=function(n,r){return t[n]?t[n]=e.extend(t[n],r):t[n]=r,t[n]},this.keys=function(){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},this.all=function(){return t},this.has=function(n){return e.has(t,n)},this.remove=function(e){delete t[e]},this.clear=function(){t={}},this.inc=function(e){var n=e+"Counter";return t[n]||(t[n]=0),t[n]+=1,t[n]},this.dec=function(e){var n=e+"Counter";return t[n]||(t[n]=0),t[n]-=1,t[n]}},function(e){return e=e||"__default__",n[e]||(n[e]=new t),n[e]}}),define("session",["angular","jquery","consts","jsondiffpatch","utils/parser","utils/inspector","utils/validator","utils/data","utils/cache"],function(e,t,n,r,i,s,o,u,a){function h(){if(!l){var e=f[n.STRINGS];l={};for(var t in e)e.hasOwnProperty(t)&&(l[e[t]]=t)}}function p(t,n){var r;for(var i in n)n.hasOwnProperty(i)&&(r=n[i],e.isObject(r)||e.isArray(r)?p(t,n[i]):e.isString(r)&&t[r]&&(n[i]="$"+t[r]))}function d(t,n){var r;for(var s in n)n.hasOwnProperty(s)&&(r=n[s],e.isObject(r)||e.isArray(r)?d(t,n[s]):e.isString(r)&&r.indexOf("$")>-1&&(n[s]=i.replaceStrings(t,r)))}var f={},l,c;f.data={};var v=e.injector(["ng"]);return v.invoke(["$interpolate",function(e){f.watch=function(e,t,n){var r=i.transformProp(t);return e.$watch(r,n,!0)},f.get=function(t,n,r){var s,u=n;return r&&typeof u=="string"&&u.indexOf("{{")===-1&&(u="{{"+u+"}}"),typeof u=="string"&&u.indexOf("{{")!==-1?(u=i.transformProp(u,!0),t.properties?s=e(u)(t):s=e(u)(t.$parent),o.isJson(s)&&(s=JSON.parse(s))):s=u,s===""&&t.$parent&&t.$parent.widget?f.get(t.$parent,n,r):(s=i.transformEval(s),s)}}]),f.set=function(e,t,n,r){r&&t.indexOf("{{")===-1&&(t="{{"+t+"}}"),t=i.transformProp(t);var o=f.get(e,n);return s(e).set(t,o)},f.clear=function(){f.data={},f.slides={}},f.output=function(){var t=u.diff(c,f.data),n=a().get("question"),i={version:"0.1"};return n.type==="simulation"?i.delta=r.diff(c,f.data):(i.restorePoint=c,i.data=f.data),e.fromJson(e.toJson(i))},f.read=function(i){e.element.popup.closeAllGroups();if(i){var s=t.parseJSON(i);d(this[n.STRINGS],s);var o=a().get("question");o.type==="simulation"?r.patch(f.data,s.delta):(c=s.restorePoint||t.parseJSON(i).data,f.data=s.data),f.updatedOn=Date.now()}},f.write=function(){var t=this.output();h(),p(l,t);var n=e.toJson(t,!1);return n},f.$get=function(){return f.data},f.$set=function(e){f.data=t.extend(!0,{},e,f.data)},f.restore=function(){f.data=e.copy(c)},f.createRestorePoint=function(t){if(!c||t)c=e.copy(f.data)},f.getTokenFromLabel=function(e){h();var t=l[e];return t?"$"+t:e},f.clear(),f}),define("utils/loader",["angular"],function(e){function i(){function c(e){return u[e]}function h(e){return u[e]=t.defer(),u[e]}function p(e){delete u[e]}function d(e,t){var n=c(e),r;return n?n.promise:(n=h(e),T(e)?(n.resolve(S(e)),n.promise):(r={url:e,type:w(e),payload:t},u[e]=n,s.push(r),l<f&&E(),n.promise))}function v(t){e.forEach(s,function(e,n){e===t&&(c(t).reject({reason:"cancelled"}),p(t),s.splice(n,1))})}function m(){e.forEach(s,function(e,t){c(e).reject({reason:"cancelled"}),p(e),s.splice(t,1)}),s.length=0}function g(){if(s.length)return s[0]}function y(){_("paused")}function b(){_("resume"),E()}function w(e){var t=e.match(/\w+$/im);if(t)switch(t[0]){case"png":case"gif":case"jpg":case"jpeg":case"bmp":return"image";default:return t[0].toLowerCase()}return null}function E(){var e;if(i.state==="paused")return;if(s.length){l++;var t=s.shift();T(t.url)?E():(_("busy"),t.type==="image"?e=r.get(t.url):e=n.get(t.url,{cache:!0}),e.then(function(e){t.data=e.data,c(t.url).resolve(t),p(t.url),O("preCache",t),C(t.url,t),O("postCache",t),O("next",t),E()},function(e){t.error=e,O("error",t),_("error"),E()}))}else--l===0&&_("ready")}function S(e,t){return o[e]}function x(e,t){o[e]=t}function T(e){return!!o[e]}function N(){return o}function C(e,t,n){o[e]=t}function k(e){delete o[e]}function L(){o={}}function A(e,t){return e in a||(a[e]=[]),a[e].push(t),function(){var n,r=a[e],i=0,s=r.length;while(i<s){n=r[i];if(n===t){r.splice(i,1);break}i+=1}}}function O(t,n){t in a&&e.forEach(a[t],function(e){e(t,n)})}function M(){return i.state}function _(e){i.state!==e&&(i.state=e,O("state",e),e==="ready"&&O("ready"))}var i={},s=[],o={},u={},a={},f=99999,l=0;return i.state="ready",i.queue=s,i.get=S,i.set=x,i.getCache=N,i.isCached=T,i.cache=C,i.addToQueue=d,i.removeFromQueue=v,i.clearQueue=m,i.peek=g,i.pause=y,i.resume=b,i.next=E,i.clearFromCache=k,i.clearAllFromCache=L,i.on=A,i.fire=O,i.getState=M,i}var t,n,r={get:function(e){var n=new Image,r=t.defer();return n.src=e,n.onload=function(){r.resolve({url:e,data:n})},n.onerror=function(e){r.reject(e)},r.promise}},s=e.module("app");return s.run(["$http","$q",function(e,r){n=e,t=r}]),new i}),define("template",["angular","jquery","underscore","config","consts","utils/md5","utils/data","utils/parser","session","utils/cache","utils/loader","utils/inspector"],function(e,t,n,r,i,s,o,u,a,f,l,c){function g(e){return e.replace(/\.\w+$/gim,"")}function y(t,n,r){if(!t)throw"Url required to load template.";var i=p.defer(),s,o,u;return t=X(t,"xml"),l.isCached(t)?l.state==="ready"?i.resolve(l.get(t)):s=l.on("ready",function(){s(),i.resolve(l.get(t))}):(n=e.extend({type:r||"template",name:g(t)},n),o=l.addToQueue(t,n),o.then(function(e){u=e.data;var n=b(e);n?l.state==="ready"?i.resolve(l.get(t)):s=l.on("ready",function(){i.resolve(l.get(t)),setTimeout(s)}):i.resolve(l.get(t))})),i.promise}function b(e){var t=e.data;t=_(t);var n=e.resources={};return n.images=L(t),n.models=N(t),n.commands=C(t),n.strings=k(t),n.template=w(t),n.view=S(t),n.controller=T(t),n.slides=E(t),n.mixins=x(t),n.count=0,n.count+=n.images.length,n.count+=n.models.length,n.count+=n.strings.length,n.count+=n.template?1:0,n.count+=n.view?1:0,n.count+=n.controller?1:0,n.count+=n.slides.length,n.count+=n.mixins.length,n.count+=n.strings.length,n.count+=n.commands.length,n.count}function w(e){var t=u.getAttr(e,"template");return t&&(t=X(t,"xml"),l.addToQueue(t,{type:"template",name:g(t)})),t}function E(t){var n,r=[],i=t.match(/<slide.+\/>/gim);return e.forEach(i,function(e){n=u.getAttr(e,"src"),n.indexOf("{{")===-1?(n=X(n,"xml"),l.addToQueue(n,{type:"template",name:g(n)}),r.push(n)):v.push(n)}),r}function S(e){var t=u.getAttr(e,"view");return t&&(t=X(t,"xml"),l.addToQueue(t,{type:"view",name:g(t)})),t}function x(t){var n,r=[],i=t.match(/<mixin>([\w\/\._-]+)/gim);return i&&e.forEach(i,function(e){n=e.substr(7),n=X(n,"xml"),l.addToQueue(n,{type:"mixin",name:g(n)}),r.push(n)}),r}function T(e){var t=u.getAttr(e,"controller");return t&&(t=X(t,"xml"),l.addToQueue(t,{type:"controller",name:g(t)})),t}function N(t){var n=u.getModels(t);return n.length&&e.forEach(n,function(e){e=X(e,"xml"),l.addToQueue(e,{type:"model",name:g(e)})}),n||[]}function C(t){var n=[],r=t.match(/command="([^\:]+)/gim);return r&&e.forEach(r,function(e){e=X(e.substr(9),"xml"),l.addToQueue(e,{type:"command",name:g(e)}),n.push(e)}),n}function k(t){var n=u.getStrings(t);return e.forEach(n,function(e){e=X(e,"xml"),l.addToQueue(e,{type:"strings",name:g(e)})}),n||[]}function L(t){t=t.replace(/(<tooltips.+tooltips>)/,"");var n=u.getUrls(t,"(jpg|png|gif)");return e.forEach(n,function(e){l.addToQueue(e,{type:"image",name:g(e)})}),n||[]}function A(t){var n=f().get("app"),r=new RegExp("\\b"+t.payload.name+"\\b","im");e.forEach(v,function(e,t){if(e.match(r)){var i=a.get(n,e,!0);i&&y(i),v.splice(t,1)}})}function O(e){if(e.template)return;e.original=e.data;var t=e.data;t=M(t),t=_(t),t=D(t),t=P(t),t=H(t),e.data=t}function M(e){return e.replace(/(\r\n|\n|\r)/gm," ")}function _(e){return e.replace(/<!--[\s\S]*?-->/g,"")}function D(e){return e=e.replace(/<(\w+)\/>/gim,"<$1></$1>"),e=e.replace(/(<(\w+)[^>]+?)\/>/gim,"$1></$2>"),e}function P(t){var n=u.getNodeContent(t,"view");if(n){var r=n.match(/<(?!view|event|meta|aria)(\w+)/g),i={};e.forEach(r,function(e){var t=e.substr(1);i[e]||(i[e]=!0,n=n.replace(new RegExp(e+"\\b","gi"),'<widgets type="'+t+'" '),n=n.split("</"+t+">").join("</widgets>"))}),n=n.replace(/(property=")(\w+)(")/gim,"$1{{$2}}$3"),t=u.replaceNodeContent(t,"view",n)}return t}function H(e){var t=e.match(/<functions(.*?)<\/functions>/g);if(t){t=t[0];var n=f("actions").keys(),r,i,s=n.length;while(s--)i=n[s],t=t.replace(new RegExp("<(\\b"+i+"\\b)","gm"),'<action type="$1"'),t=t.replace(new RegExp("</\\b"+i+"\\b>","gm"),"</action>");e=e.replace(/<functions(.*?)<\/functions>/g,t)}return e=e.replace(/<function\s+name=\"(\w+)\"(.*?)<\/function>/gim,"<$1$2</$1>"),e}function B(e){return e.indexOf('type="template/html"')!==-1&&r.widgetCSS&&(e=e.replace(/\sclass=\"([^\"]+)\"/gim,' class="'+r.widgetCSS+' $1"')),e}function j(t){var n=$(t.data);for(var r in n)n.hasOwnProperty(r)&&(n[r]=n[r]+"");e.extend(a[i.STRINGS],n)}function F(e){var t=u.replaceStrings(a[i.STRINGS],e.data),n=c().set(e.payload.name,$(t),"/");a.$set(n)}function I(e){var t=u.replaceStrings(a[i.STRINGS],e.data),n=f("actions").keys(),r,s,o=n.length;while(o--)s=n[o],t=t.replace(new RegExp("<(\\b"+s+"\\b)","gm"),'<action type="$1"'),t=t.replace(new RegExp("</\\b"+s+"\\b>","gm"),"</action>");f("commands").set(e.url,$(t))}function q(e){e.data=u.replaceStrings(a[i.STRINGS],e.data)}function R(n){if(n.template)return;q(n);var r=$(n.data),i,s,u,a,f;r.listeners=e.isObject(r.listeners)?o.toArray(r.listeners.event):[],r.properties=o.toObject(r.properties),r.widgets=e.isObject(r.view)?o.toArray(r.view.widgets):[],r.tooltips=e.isObject(r.tooltips)?o.toArray(r.tooltips.tooltip):[],n.template=r,n.resources.mixins&&(r={},e.forEach(n.resources.mixins,function(n){i=l.get(n);if(!i)throw new Error("Missing required mixin: "+n);s=$(i.data),s.listeners=e.isObject(s.listeners)?o.toArray(s.listeners.event):[],s.listeners&&(r.listeners=(r.listeners||[]).concat(s.listeners)),s.properties=z(s.properties),r.properties=t.extend(!0,{},r.properties,s.properties),r.functions=t.extend(!0,{},r.functions,s.functions)}),r.listeners&&(n.template.listeners=n.template.listeners.concat(r.listeners)),n.template=t.extend(!0,{},r,n.template)),r=n.template;if(n.template.view.background_image){var c=l.get(n.template.view.background_image).data.width,h=l.get(n.template.view.background_image).data.height;n.template.view.width||(n.template.view.width=c),n.template.view.height||(n.template.view.height=h)}return r}function U(e){return e===""||e===undefined&&e===null}function z(e){var t={};for(var r in e)if(n.isObject(e[r])&&!n.isArray(e[r])){var i=z(e[r],e[r]);n.isEmpty(i)||(t[r]=i)}else U(e[r])||(t[r]=e[r]);return t}function W(e){if(e.template)return;q(e),e.template=$(e.data),e.template.content&&e.template.content.button&&(e.template.content.buttons=o.toArray(e.template.content.button),delete e.template.content.button)}function X(e,t){var n=new RegExp("\\w+\\."+t,"gim");return e.match(n)||(e+="."+t),e}function V(){var t=l.getCache(),n;e.forEach(t,function(e){e.payload&&(e.payload.type==="controller"||e.payload.type==="mixin")&&(O(e),q(e))}),e.forEach(t,function(e){if(e.payload){if(e.payload.type==="template"||e.payload.type==="view")O(e),R(e);e.payload.type==="question"&&(O(e),W(e))}})}function $(e){return t.xml2json(e)}var h,p,d={},v=[],m=e.module("app");return m.run(["$http","$q",function(e,t){h=e,p=t}]),l.on("preCache",function(e,t){if(t.payload)switch(t.payload.type){case"strings":j(t);break;case"model":F(t);break;case"command":I(t);break;case"question":case"template":case"view":case"controller":b(t)}}),l.on("state",function(e,t){t==="ready"&&V()}),d.get=y,d.formatHTMLWidget=B,d.toJson=$,d.loader=l,d.addExtension=X,d}),define("bootstrap",["angular","angular-cookies","angular-sanitize","angular-route","underscore","config","angular-ux-focusmanager"],function(e,t,n,r,i,s){return function(){var t=e.module("app");e.module("app").config(["$routeProvider",function(e){e.when("/:qid",{templateUrl:require.toUrl("../partials/app.html")}),e.otherwise({redirectTo:"/"+s.defaults.question})}]),e.element(document).ready(function(){e.bootstrap(document,["app"])})}}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!../partials/index.html",[],function(){return"<div ng-view></div>\n"}),define("text!../partials/widgets.html",[],function(){return'<!-- button -->\r\n<script id="button" type="template/html">\r\n    <div id="widget.id" focus-index="0" focus-element="widget.autofocus" role="button" class="@widget button {{widget.class}}"\r\n         title="{{widget.title}}"\r\n         ui-button value="widget.valueOn" toggle="widget.toggle"\r\n         ng-disabled="widget.disable"\r\n         ui-aria="widget"\r\n         ui-events="widget"\r\n         ui-tooltip="widget"\r\n         style="widget.style;@position">{{widget.label}}\r\n    </div>\r\n</script>\r\n\r\n<!-- split button-->\r\n<script id="splitbutton" type="template/html">\r\n    <div id="widget.id" role="splitbutton" class="@widget button-split {{widget.class}}"\r\n         ng-disabled="widget.disable"\r\n\r\n         style="widget.style;@position">\r\n        <div focus-index="0" role="button" ui-aria="widget" class="button-push" ui-events="widget" ui-tooltip="widget">{{widget.pushlabel}}</div>\r\n        <div focus-index="0" role="button" ui-aria="widget" class="button-toggle"\r\n             title="{{widget.title}}"\r\n             ui-button disable="widget.disable" value="widget.valueOn" toggle="true"\r\n             ui-tooltip="widget">{{widget.toggleLabel}}\r\n        </div>\r\n    </div>\r\n</script>\r\n\r\n<!-- image -->\r\n<script id="image" type="template/html">\r\n    <img id="widget.id" focus-index="widget.focus-index" role="img" aria-label="widget.alt" class="@widget image {{widget.class}}" ng-src="{{widget.src}}"\r\n         ui-image="widget"\r\n         ui-tooltip="widget"\r\n         ui-events="widget"\r\n         ui-aria="widget"\r\n         ondragstart="return false"\r\n         style="widget.style;@position"/>\r\n</script>\r\n\r\n<!-- label -->\r\n<script id="label" type="template/html">\r\n    <div focus-index="0" class="@widget label {{widget.class}}"\r\n         ui-events="widget"\r\n         ui-aria="widget"\r\n         ui-tooltip="widget"\r\n         style="widget.style;@position">\r\n        {{widget.text}}\r\n    </div>\r\n</script>\r\n\r\n<!-- html -->\r\n<script id="html" type="template/html">\r\n    <div focus-index="0" class="@widget html {{widget.class}}" ui-events="widget" ui-html\r\n         ui-aria="widget"\r\n         style="widget.style;@position">\r\n    </div>\r\n</script>\r\n\r\n<!-- text -->\r\n<script id="text" type="template/html">\r\n    <input focus-index="0"\r\n           class="@widget text {{widget.class}}"\r\n           ng-model="widget.text"\r\n           ui-set-focus="widget.focus"\r\n           ui-events="widget"\r\n           ui-aria="widget"\r\n           ui-restrict="{{widget.restrict}}"\r\n           ui-format="{{widget.format}}"\r\n           ui-mask="{{widget.mask}}"\r\n           maxlength="{{widget.maxlength}}"\r\n           ui-tooltip="widget"\r\n           placeholder="{{widget.placeholder}}"\r\n           ng-disabled="widget.disabled"\r\n           style="widget.style;@position"/>\r\n</script>\r\n\r\n<!-- textarea -->\r\n<script id="textarea" type="template/html">\r\n    <textarea focus-index="0"\r\n              class="@widget text {{widget.class}}"\r\n              ng-model="widget.text"\r\n              ui-set-focus="widget.focus"\r\n              ui-events="widget"\r\n              ui-aria="widget"\r\n              ui-restrict="{{widget.restrict}}"\r\n              ui-format="{{widget.format}}"\r\n              ui-tooltip="widget"\r\n              placeholder="{{widget.placeholder}}"\r\n              ng-disabled="widget.disabled"\r\n              style="widget.style;@position"></textarea>\r\n</script>\r\n\r\n<!-- password -->\r\n<script id="password" type="template/html">\r\n    <input focus-index="0"\r\n           class="@widget password {{widget.class}}" type="password"\r\n           ng-model="widget.text"\r\n           ui-events="widget"\r\n           ui-aria="widget"\r\n           ui-set-focus="widget.focus"\r\n           ui-tooltip="widget"\r\n           placeholder="{{widget.placeholder}}"\r\n           ng-disabled="widget.disabled"\r\n           style="widget.style;@position"/>\r\n</script>\r\n\r\n<!-- checkbox -->\r\n<script id="checkbox" type="template/html">\r\n    <div focus-index="0" class="@widget checkbox {{widget.class}}" ui-events="widget"\r\n         ui-tooltip="widget"\r\n         style="widget.style;@position;cursor:default;white-space:nowrap">\r\n        <label style="cursor:default">\r\n            <input type="checkbox" style="cursor:default;" ng-model="widget.model" ng-true-value="widget.trueValue"\r\n                   ui-aria="widget"\r\n                   ng-false-value="widget.falseValue"\r\n                   ng-false-value="no" ng-disabled="widget.disabled">\r\n\r\n            <div style="display: inline-block;">{{ widget.label }}</div>\r\n        </label>\r\n    </div>\r\n</script>\r\n\r\n<!-- radio -->\r\n<script id="radio" type="template/html">\r\n    <div focus-index="0" class="@widget radio {{widget.class}}" ui-events="widget" ui-aria="widget"\r\n         style="widget.style;@position;white-space:nowrap">\r\n        <label style="cursor:default">\r\n            <input type="radio" ng-model="widget.model" style="cursor:default" value="{{widget.value}}"\r\n                   ng-disabled="widget.disabled">\r\n            {{ widget.label }}\r\n        </label>\r\n    </div>\r\n</script>\r\n\r\n<!-- box -->\r\n<script id="box" type="template/html">\r\n    <div id="widget.id" focus-group="" focus-head="widget.focus_head" focus-tail="widget.focus_tail"\r\n         ng-controller="BoxCtrl" class="@widget box widget.flow {{widget.class}}" ui-events="widget"\r\n         ui-aria="widget"\r\n         ui-widgets="widgets"\r\n         style="widget.style;@position">\r\n    </div>\r\n</script>\r\n\r\n<!-- dropdown -->\r\n<script id="dropdown" type="template/html">\r\n    <select focus-index="0"\r\n            class="@widget dropdown {{widget.class}}" ui-list="widget"\r\n            ui-tooltip="widget"\r\n            ui-events="widget"\r\n            ui-aria="widget"\r\n            style="widget.style;@position">\r\n        <option ng-repeat="o in options" value="{{o.value}}">{{o.label}}</option>\r\n    </select>\r\n</script>\r\n\r\n<!-- listbox -->\r\n<script id="listbox" type="template/html">\r\n    <select focus-index="0"\r\n            class="@widget listbox {{widget.class}}" ui-list="widget"\r\n            size="2"\r\n            ui-tooltip="widget"\r\n            ui-events="widget"\r\n            ui-aria="widget"\r\n            style="widget.style;@position">\r\n        <option ng-repeat="o in options" value="{{o.value}}">{{o.label}}</option>\r\n    </select>\r\n</script>\r\n\r\n<!-- stepper -->\r\n<script id="stepper" type="template/html">\r\n    <div focus-index="0" ui-stepper class="@widget stepper {{widget.class}}" ui-tooltip="widget"\r\n         style="widget.style;@position">\r\n        <input type="text" ng-model="displayValue" class="stepper-text"\r\n               ui-set-focus="widget.focus" ui-blur="update(value)"/>\r\n\r\n        <div focus-index="0" ui-aria="widget" ng-mousedown="startStep(-1)" ng-mouseup="stopStep()" class="stepper-button prev"><span\r\n                class="stepper-arrow"></span></div>\r\n        <div focus-index="0" ui-aria="widget" ng-mousedown="startStep(1)" ng-mouseup="stopStep()" class="stepper-button next"><span\r\n                class="stepper-arrow"></span></div>\r\n    </div>\r\n</script>\r\n\r\n<!-- slide -->\r\n<script id="slide" type="template/html">\r\n    <div focus-group="" focus-stack="{{view.focus_stack}}" focus-group-head="{{view.focus_head}}" focus-group-tail="{{view.focus_tail}}"\r\n         ng-controller="SlideCtrl" class="@widget slides {{widget.class}}"\r\n         style="widget.style;@position;background:{{widget.background_color}}">\r\n        <img ng-if="view.background_image" class="{{view.class}}" style="position: absolute;top:0;left:0"\r\n             ng-show="view.background_image"\r\n             ui-image="view" ng-src="{{view.background_image}}" ondragstart="return false"/>\r\n        <!--the form and the submit are so if they hit enter it will respond (i.e. in a dialog) -->\r\n        <form class="content" ui-keyboard>\r\n            <!-- This hidden submit button allows us to hit enter in a text field, then a submit occurs -->\r\n            <input type="submit" style="display: none"/>\r\n\r\n            <div ui-widgets="widgets"></div>\r\n        </form>\r\n    </div>\r\n</script>\r\n\r\n<!-- menu -->\r\n<script id="menu" type="template/html">\r\n    <div focus-group="" focus-stack="{{view.focus_stack}}" focus-group-head="{{view.focus_head}}" focus-group-tail="{{view.focus_tail}}"\r\n         ng-controller="SlideCtrl" ui-scrollpane class="{{widget.class}}"\r\n         style="widget.style;@position;background:widget.background_color">\r\n        <div class="scroll-up" ng-show="scrollable"></div>\r\n        <div class="slides scroll-view" style="position:relative;height:100%;overflow:hidden;">\r\n            <img class="bg-image" style="position: absolute;" ng-src="{{view.background_image}}" ondragstart="return false"/>\r\n\r\n            <div ui-widgets="widgets"></div>\r\n        </div>\r\n        <div class="scroll-down" ng-show="scrollable"></div>\r\n    </div>\r\n</script>\r\n\r\n<!-- Selected Response -->\r\n<script id="choice" type="template/html">\r\n    <div ui-choice ui-focus="" ng-model="widget.state" class="@widget sr sr-choice {{widget.class}}"\r\n         style="widget.style;@position;" ui-events="widget" ui-font="widget">\r\n        <div  class="sr-choice-header" ng-show="\'widget.header\'">widget.header</div>\r\n        <ul style="min-height: 100%;">\r\n            <li tabindex="0" id="{{widgetHashKey}}_{{option.id}}" ui-choice-option\r\n                ng-repeat="option in widget.state" class="selectable choice"\r\n                ng-class="{selected:option.selected}"\r\n                title="{{option.title}}" ng-click="select(option)" ui-html="option.label">\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</script>\r\n\r\n<script id="hotspot" type="template/html">\r\n    <div class="@widget sr sr-hotspot {{widget.class}}" ui-hotspot ui-aria="widget"\r\n         style="widget.style;@position">\r\n        <div class="background"></div>\r\n        <div class="canvas"></div>\r\n        <div class="sprite pin" style="position:absolute;top:0;left:0"></div>\r\n    </div>\r\n</script>\r\n\r\n<!--<script id="sequence" type="template/html">-->\r\n    <!--<div class="@widget sr sr_sequence {{settings.fontSize}} {{widget.class}}" ui-sequence>-->\r\n        <!--<ul focus-group="" ui-sortable="{connectWith:\'.connectedSortable\'}" data-model="model.listA" id="sortable1"-->\r\n            <!--class="connectedSortable">-->\r\n            <!--<li ng-repeat="item in model.listA" class="ui-state-default">{{item.label}}</li>-->\r\n        <!--</ul>-->\r\n\r\n        <!--<ul focus-group="" ui-sortable="{connectWith:\'.connectedSortable\'}" data-model="model.listB" id="sortable2"-->\r\n            <!--class="connectedSortable">-->\r\n            <!--<li ng-repeat="item in model.listB" class="ui-state-highlight">{{item.label}}</li>-->\r\n        <!--</ul>-->\r\n    <!--</div>-->\r\n<!--</script>-->\r\n\r\n<script id="calculator" type="template/html">\r\n    <div id="widget.id" ui-calculator class="@widget calculator" style="widget.style;@position">\r\n        <form>\r\n            <div class="calc">\r\n                <div class="calc-bar clearfix">\r\n                    <div class="calc-close" ng-click="close()">&times;</div>\r\n                    <div class="calc-grip">\r\n                        <div class="calc-grip-line"></div>\r\n                        <div class="calc-grip-line"></div>\r\n                        <div class="calc-grip-line"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="calc-screen">{{display}}</div>\r\n                <div class="calc-buttonpad clearfix">\r\n                    <a ng-click="memoryClear()">MC</a>\r\n                    <a ng-click="memoryAdd()">M+</a>\r\n                    <a ng-click="memorySub()">M-</a>\r\n                    <a ng-click="memoryShow()" ng-class="{memoryOn: memory.length}">MR</a>\r\n                    <a ng-click="clearCalc()">C</a>\r\n                    <a ng-click="changeSign()">&plusmn;</a>\r\n                    <a ng-click="acceptInput(\'/\')">&divide;</a>\r\n                    <a ng-click="acceptInput(\'*\')">&times;</a>\r\n                    <a ng-click="acceptInput(7)">7</a>\r\n                    <a ng-click="acceptInput(8)">8</a>\r\n                    <a ng-click="acceptInput(9)">9</a>\r\n                    <a ng-click="acceptInput(\'-\')">&minus;</a>\r\n                    <a ng-click="acceptInput(4)">4</a>\r\n                    <a ng-click="acceptInput(5)">5</a>\r\n                    <a ng-click="acceptInput(6)">6</a>\r\n                    <a ng-click="acceptInput(\'+\')">&plus;</a>\r\n                    <a ng-click="submit()" class="equal-sign">=</a>\r\n                    <a ng-click="acceptInput(1)">1</a>\r\n                    <a ng-click="acceptInput(2)">2</a>\r\n                    <a ng-click="acceptInput(3)">3</a>\r\n                    <a class="zero" ng-click="acceptInput(0)">0</a>\r\n                    <a ng-click="acceptInput(\'.\')">.</a>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</script>\r\n'}),define("actions/alert",["angular","consts","utils/cache"],function(e,t,n){n("actions").set("alert",function(n,r){var i=e.element(document).injector().get("$interpolate"),s=e.copy(r),o=i(r.title+""),u=i(r.text+"");s.title=o(n),s.message=u(n),n.$root.$broadcast(t.ALERT,s)})}),define("actions/call",["angular","underscore","utils/cache","utils/validator","session","utils/data"],function(e,t,n,r,i,s){function o(e,t){t.text&&(t.text=i.get(e,t.text)),e.invoke(e,t.function,{target:e.widget,data:s.rawEval(t.text)})}n("actions").set("call",function(e,t){o(e,t)})}),define("actions/choice",["angular","utils/cache","utils/validator","session"],function(e,t,n,r){t("actions").set("moveSelection",function(t,n){var i=[];if(n.to){var s=r.get(t,n.to,!0);e.forEach(s,function(e,t){e.selected=!1}),r.set(t,n.to,s,!0)}if(n.from){var o=r.get(t,n.from,!0);e.forEach(o,function(e,t){e.selected&&(i.push(e),o.splice(t,1),s.push(e))}),r.set(t,n.from,o,!0)}}),t("actions").set("moveSelectionUp",function(t,n){var i=r.get(t,n.target,!0);e.forEach(i,function(e,t){e.selected&&t>0&&(i.splice(t,1),i.splice(t-1,0,e))}),r.set(t,n.target,i,!0)}),t("actions").set("moveSelectionDown",function(e,t){var n=r.get(e,t.target,!0),i=n.length-1;while(i--){var s=n[i];s.selected&&i>=0&&(n.splice(i,1),n.splice(i+1,0,s))}r.set(e,t.target,n,!0)})}),define("actions/close",["angular","utils/cache","session","consts"],function(e,t,n,r){t("actions").set("close",function(e,t){e.$emit(r.CLOSE_DIALOGS,t.target)})}),define("actions/closeMenu",["angular","utils/cache","session","consts"],function(e,t,n,r){t("actions").set("closeMenu",function(e,t){e.$emit(r.CLOSE_MENU,t.target)})}),define("actions/collection",["angular","jquery","utils/cache","session","utils/data"],function(e,t,n,r,i){n("actions").set("collection",function(t,n){var s=r.get(t,n.target,!0);s.option=i.toArray(s.option);var o=r.get(t,n.removeCount)||0,u=i.toArray(n.item),a=r.get(t,n.index);e.isUndefined(a)&&(a=s.option.length-1);var f=[];e.forEach(u,function(e){f.push({label:r.get(t,e.label),value:r.get(t,e.text)})}),f.unshift(a,o),s.option.splice.apply(s.option,f),r.set(t,n.target,s,!0)})}),define("actions/condition",["angular","utils/cache"],function(e,t){t("actions").set("condition",function(e,t){e.runCondition(e,t["if"])||e.runCondition(e,t.elseif)||t["else"]&&e.run(e,t["else"])})}),define("actions/dialog",["utils/cache","consts"],function(e,t){e("actions").set("dialog",function(e,n){e.$emit(t.OPEN_DIALOG,n,e)})}),define("actions/dispatch",["angular","utils/cache","config"],function(e,t,n){t("actions").set("dispatch",function(r,i){var s=t().get("app"),o=i.name,u=0,a=s.$$listeners[o];e.forEach(a,function(e,t){e&&(u+=1)}),u?s.$broadcast(o):t("actions").get("exec")(s,{command:n.defaults.command})})}),define("version",[],function(){return"2.1.4"}),define("utils/decrypt",[],function(){return function(t,n){if(t===null||t.length<8)return;if(n===null||n.length<=0)return;var r="",i;for(i=0;i<n.length;i++)r+=n.charCodeAt(i).toString();var s=Math.floor(r.length/5),o=parseInt(r.charAt(s)+r.charAt(s*2)+r.charAt(s*3)+r.charAt(s*4)+r.charAt(s*5),10),u=Math.round(n.length/2),a=Math.pow(2,31)-1,f=parseInt(t.substring(t.length-8,t.length),16);t=t.substring(0,t.length-8),r+=f;while(r.length>10)r=(parseInt(r.substring(0,10),10)+parseInt(r.substring(10,r.length),10)).toString();r=(o*r+u)%a;var l="",c="";for(i=0;i<t.length;i+=2)l=parseInt(parseInt(t.substring(i,i+2),16)^Math.floor(r/a*255),10),c+=String.fromCharCode(l),r=(o*r+u)%a;return c}}),define("settings",["angular","version","consts","utils/decrypt"],function(e,t,n,r){function s(){return e.element(document).scope()}function o(t){var n=e.element(document).injector();return n.get(t)}function u(t){e.forEach(t,function(e){if(e.host===window.location.hostname||e.includeSubdomains&&window.location.hostname.indexOf(e.host)!==-1)i.debug_mode=e.debug!==!1,i.edit_mode=e.edit!==!1,i.secure_mode=e.secure,i.local_mode=e.local,i.console=n.VIEW_PATH+"console.html",i.editor=n.VIEW_PATH+"editor.html",i.auth_dlg=n.VIEW_PATH+"auth.html",i.can_edit=e.edit})}function a(e){e=(e+"").trim();var t=o("$cookieStore"),u=r(e+"",n.CRYPT_KEY);if(isNaN(u)){window.alert("The key you provided appears to be invalid.");return}var a=new Date;u-a.getTime()>=0?(i.authorized=!0,t.put("key",e),f(),s().$broadcast("hammer::hideAuth")):(window.alert("Your key has expired."),s().$broadcast("hammer::showAuth"),t.remove("key"))}function f(){if(i.debug)i.debug=!1;else{var e=o("$cookieStore");if(i.secure_mode&&!i.authorized){var t=e.get("key");t?a(t):s().$broadcast("hammer::showAuth")}else i.debug=!0}}var i={};return i.version=t,i.console="",i.mode="stem-expanded",i.debug_mode=!1,i.edit_mode=!1,i.secure_mode=!0,i.local_mode=!1,i.authorized=!1,i.debug=!1,i.editOn=!1,i.fontSize="small-text",i.parseWhiteList=u,i.toggleConsole=f,i.authorize=a,i}),define("utils/logger",["angular","settings","utils/data"],function(e,t,n){e.module("app").directive("scrollGlue",function(){return{priority:1,require:["?ngModel"],restrict:"A",link:function(e,t,n,r){var i=t[0];e.scrollToBottom=function(){setTimeout(function(){t.stop().animate({scrollTop:i.scrollHeight},"300")},100)}}}});var r="",i=Date.now(),s=50;return{console:window.console?window.console.log:function(){},logs:[],log:function(o,u,a){var f=this;if(!t.debug_mode)return;o==="fn"?u==="$$invalid"?(u!==r&&f.logs.push({type:"invalid",name:u}),r=u):(f.logs.push({type:"function",name:u,details:a}),a&&(a=e.copy(a),e.forEach(a,function(t,r){if(r==="action"){var i=n.toArray(a.action);e.forEach(i,function(e){var t=e.type;f.logs.push({type:"action",name:t,data:e}),delete e.type})}else r!=="limit"&&r!=="waitType"&&r!=="waitTime"&&f.logs.push({type:"invalidAction",name:r,data:t})})),r=""):o==="call"?f.logs.push({type:"call",name:u,ts:Date.now()-i}):o==="cmd"?f.logs.push({type:"command",name:u,data:a}):o==="event"&&f.logs.push({type:"event",name:u,target:a.url,widget:a.widget,ts:Date.now()-i}),f.logs.length>s&&f.logs.splice(0,f.logs.length-s)},clear:function(){this.logs.length=0}}}),define("actions/exec",["jquery","angular","utils/cache","utils/data","utils/validator","config","session","consts","utils/parser","utils/logger","utils/inspector","template"],function(e,t,n,r,i,s,o,u,a,f,l,c){function h(e,i){var s=c.addExtension(i.command.split("::")[0],"xml"),u=i.command.split("::")[1],a=r.toArray(n("commands").get(s).command);i.text&&(i.text=o.get(e,i.text)),t.forEach(a,function(t){if(u===t.name){var n=l(e).get("tmp."+u+".timer",n);switch(t.waitType){case"delay":n=setTimeout(p,t.waitTime,e,i,t);break;case"debounce":clearTimeout(n),n=setTimeout(p,t.waitTime,e,i,t);break;case"throttle":if(n)return;n=setTimeout(function(){n=null},t.waitTime),p(e,i,t);break;default:p(e,i,t)}l(e).set("tmp."+u+".timer",n)}})}function p(e,i,s){if(s.limit){var o=l(e).get("tmp."+s.name+".count")||0;if(o>=s.limit)return;l(e).set("tmp."+s.name+".count",o+1)}var u=r.toArray(s.action);t.forEach(u,function(o){t.isString(i.text)&&i.text.substr(0,1)==="{"&&(i.text=r.rawEval(i.text)),e.properties=e.properties||{},e.properties.event={data:i.text},f.log("cmd",s.name,e.properties.event),n("actions").get(o.type)(e,o,e),delete e.properties.event})}function v(e,t){var r=c.addExtension(t.command.split("::")[0],"xml"),i;n("commands").has(r)?h(e,t):c.get(r,null,"command").then(function(n){h(e,t)})}var d;n("actions").set("exec",function(e,t){v(e,t)})}),define("actions/goto",["angular","utils/cache","session"],function(e,t,n){t("actions").set("goto",function(e,t){var r=n.get(e,t.text);r&&(t.target?e.$root.$broadcast(t.target+"::path",r):r&&(e.widget.src=r))})}),define("actions/growl",["angular","utils/cache","session","utils/validator"],function(e,t,n,r){t("actions").set("growl",function(t,i){var s=n.get(t,i.text);e.isString(s)&&r.isJson(s)&&(s=e.fromJson(s)),t.$emit("hammer::showGrowl",{message:s})})}),define("actions/log",["angular","utils/cache","session"],function(e,t,n){t("actions").set("log",function(e,t){var r=n.get(e,t.text);window.console&&window.console.log(r)})}),define("actions/menu",["angular","utils/cache","consts","session"],function(e,t,n,r){t("actions").set("menu",function(t,i){t.depth===undefined&&(t.depth=-1);var s=e.copy(i);s.src=r.get(t,i.src),t.$emit(n.OPEN_MENU,s,t,t.depth+1)})}),define("actions/reset",["angular","utils/cache"],function(e,t){t("actions").set("reset",function(e){e.reset()})}),define("actions/select",["angular","utils/cache"],function(e,t){t("actions").set("select",function(t,n){var r=window.event,i=r.target;setTimeout(function(){e.element(i).setSelectionRange(n.range)})})}),define("actions/set",["angular","utils/cache","session"],function(e,t,n){t("actions").set("set",function(e,t){n.set(e,t.property,t.text,!0)})}),define("actions/step",["angular","utils/cache","session"],function(e,t,n){t("actions").set("step",function(e,t){var r=Number(n.get(e,t.text)||1),i=Number(n.get(e,t.property,!0)||0);n.set(e,t.property,i+r,!0)})}),define("actions/timeout",["angular","utils/cache"],function(e,t){t("actions").set("timeout",function(e,t){setTimeout(function(){e.invoke(e,t.command)},parseInt(t.duration,10)||0)})}),define("actions/toggle",["angular","utils/cache","session"],function(e,t,n){t("actions").set("toggle",function(e,t){var r=n.get(e,t.property,!0);n.set(e,t.property,!r,!0)})}),define("actions/style",["angular","jquery","utils/cache"],function(e,t,n){n("actions").set("style",function(n,r){var i=t(r.selector),s=r.text.split(";");e.forEach(s,function(e){var t=e.split(":");i.css(t[0],t[1])})})}),define("directives/widgets",["angular","jquery","utils/cache"],function(e,t,n){function i(e){return e.indexOf("{{")!==-1}function s(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function o(e){return(e||"_")+r++}function u(e){var t="left top bottom right x y".split(" "),n=0,r=t.length,i;while(n<r){i=t[n];if(e[i]!==undefined)return!0;n+=1}return!1}function a(e,t){t=t.split(" ");var n="";for(var r in t)if(t.hasOwnProperty(r)){var s=t[r].split(":"),o=s[0],u=s[1];if(e[u]!==undefined){var a=e[u]+"".split("/").join("."),f="";!a.match(/\%/gim)&&!a.match(/px/gim)&&(f="px"),i(a)?n+=";"+o+":{{widget."+u+"}}"+f:n+=";"+o+":"+a+f}}return n+=";",n}function f(e,t){if(e.match(/@position/gim)){var n=a(t,"left:left top:top bottom:bottom right:right left:x top:y width:width height:height"),r=u(t);e=e.replace(/@position/gim,n),e=e.replace(/@widget/gim,r?"widget absolute":"widget relative")}return e}function l(t){var n=t.children(),r=null,i=0,s=n.length;while(i<s)r=e.element(n[i]),r&&(r.scope()&&r.scope().$destroy(),r.remove()),i+=1;t.empty()}function c(e,t){var n=t?"{{":"",r=t?"}}":"";return e.replace(/\{\{([^\}\:]+)\}\}/gm,n+"properties.$1"+r)}function h(e,t){var n=t?"{{":"",r=t?"}}":"";return e=e.split("/").join("."),e.replace(/\{\{[\s+]?([\w\.]+)\:\:([\w\.\$]+)[\s+]?\}\}/gm,n+"session.data.$1.$2"+r)}function p(e,t,n){var r=new RegExp("\\{\\{[\\s+]?("+t+")[\\s+]?\\}\\}");return e.replace(r,n||"")}function d(n,r){var o,u=n.match(/widget\.(\w+)/gm);return e.forEach(u,function(e,u){var a=e.match(/(\w+)/gm)[1],f=(typeof r[a]=="undefined"?"":r[a])+"";i(f)?t(n).text().indexOf(e)!==-1?(f=c(f,!0),f=h(f,!0),n=v(n,e,f),f=s(f),o=new RegExp("\\{\\{[\\s+]?("+f+")[\\s+]?\\}\\}"),n=n.replace(o,"$1")):(f=c(f,!1),f=h(f,!1),n=v(n,e,f)):(n=p(n,e,f),n=v(n,e,f||""))}),n}function v(e,t,n){var r=new RegExp("(\\b"+t+"\\b)");return e.replace(r,n)}function m(t,r,i,s,u){var a=r.$new();a.widget=u,a.widgetHashKey=o(u.type),a.widget.meta&&(a.widget.meta=e.fromJson(a.widget.meta)),u.id=u.id?u.id:"$$"+u.type+"_"+n().inc();var f=t(s.trim())(a);return i.append(f),f}var r=0;return e.module("app").directive("uiWidgets",["$compile",function(e){return{restrict:"A",link:function(n,r,i){n.$watch(i.uiWidgets,function(i){l(r);if(i){var s,o=0,u=i.length;while(o<u){s=i[o];var a=t("#"+s.type).html();a?(a=f(a,s),a=d(a,s),m(e,n,r,a,s)):alert('widget type "'+s.type+'" does not have a script template.'),o+=1}}})}}}]),{appendWidget:function(e,t,n,r,i){return r=f(r,i),r=d(r,i),m(e,t,n,r,i)}}}),define("actions/draggable",["angular","jquery","underscore","utils/cache","interact","directives/widgets"],function(e,t,n,r,i,s){var o="drag-dragging",u="drag-clone",a={canAccept:!1,dragTarget:null};return r("actions").set("draggable",function(n,r){function f(e){var i;a.dragTarget?i=t(a.dragTarget):i=t(e.target);var s=i.scope(),f=s.widget;f.events&&f.events.dragEnd&&n.dispatch("dragEnd",f),r.requiresDrop&&(a.canAccept||(r.animateRevert?i.animate(s.dragPos,r.animateRevert,function(){i.removeClass(o)}):(i.offset(s.dragOffset),i.removeClass(o),i.hasClass(u)&&i.remove(),a.dragTarget&&i.remove()))),i.removeClass(o),setTimeout(function(){console.log("setting to null"),a.dragTarget=null})}var l,c=e.element(document).injector();c.invoke(["$compile",function(e){l=e}]),i(r.selector).draggable(!0).on("dragmove",function(e){var i=a.dragTarget||e.target;if(!i)return;var s=t(i).scope().widget;s.events&&s.events.dragMove&&n.dispatch("dragMove",s);if(r.useTransform)r.axis==="x"?Math.abs(e.clientX-e.clientX0)<100&&(i.x=(i.x||0)+e.dx):r.axis==="y"?i.y=(i.y||0)+e.dy:(i.x=(i.x||0)+e.dx,i.y=(i.y||0)+e.dy),i.style.webkitTransform=i.style.transform="translate("+i.x+"px, "+i.y+"px)";else{var o=i.style;r.axis==="x"?Math.abs(e.clientX-e.clientX0)<100&&(o.left=parseInt(o.left,10)+e.dx+"px"):r.axis==="y"?o.top=parseInt(o.top,10)+e.dy+"px":(o.left=parseInt(o.left,10)+e.dx+"px",o.top=parseInt(o.top,10)+e.dy+"px")}}).on("dragstart",function(i){var f=t(i.target),c=f.scope();c.dragOffset||(c.dragPos=f.position(),c.dragOffset=f.offset(),c.dragOrder=f.css("zIndex"));var h=c.widget;h.events&&h.events.dragStart&&n.dispatch("dragStart",h);if(r.appendTo&&!f.hasClass(u)){var p;r.appendTo==="parent"?p=f.parent():r.appendTo==="canvas"?p=t("#canvas"):p=t(r.appendTo);var d=c.$parent,v=t("#"+c.widget.type).html(),m=e.copy(c.widget);delete m.id;var g=t(i.target).offset(),y=s.appendWidget(l,d,p,v,m);y.offset(g),y.addClass(u),a.dragTarget=y[0],f=y}f.addClass(o),typeof r.zIndex=="number"&&f.css("zIndex",r.zIndex++)}).on("dragend",f)}),a}),define("actions/droppable",["angular","jquery","underscore","utils/cache","interact","actions/draggable"],function(e,t,n,r,i,s){r("actions").set("droppable",function(e,n){function p(e,t){e.classList.add(t)}function d(e,t){e.classList.remove(t)}var r=n.accept?n.accept.substr(1):"",o="drag-accepting",u="drag-rejecting",a="drag-accepted",f="drop-accepting",l="drop-rejecting",c="drop-accepted",h=!1;i(n.selector).dropzone(!0).on("dragenter",function(n){var i=s.dragTarget||n.relatedTarget,v=n.target,m=t(v),g=0,y=i.classList,b=i.classList.length;while(g<b){if(y[g]===r){h=!0;break}g+=1}d(i,a),d(v,c),s.canAccept=h;if(h){p(i,o),d(i,u),p(v,f),d(v,l);var w=m.scope().widget;w.events&&w.events.dropEnter&&e.dispatch("dropEnter",w)}else p(i,u),d(i,o),p(v,l),d(v,f)}).on("dragleave",function(n){var r=s.dragTarget||n.relatedTarget,i=n.target,h=t(i),p=h.scope().widget;d(r,o),d(r,u),d(r,a),d(i,f),d(i,l),d(i,c),s.canAccept=!1,p.events&&p.events.dropLeave&&e.dispatch("dropLeave",p)}).on("drop",function(n){var r=s.dragTarget||n.relatedTarget,i=n.target,v=t(r),m=t(i),g=v.scope(),y=m.scope(),b=m.scope().widget,w={dragTarget:g.widget,dropTarget:y.widget};d(r,o),d(r,u),d(r,a),d(i,f),d(i,l),d(i,c),h?(p(r,a),p(i,c),e.dispatch("dropAccepted",b,w)):e.dispatch("dropRejected",b,w),s.canAccept=!1})})}),define("actions/addWidget",["angular","consts","jquery","utils/cache","directives/widgets"],function(e,t,n,r,i){r("actions").set("addWidget",function(t,r){var s=r.text.match(/^<\w+/i)[0].substr(1),o=n.xml2json(r.text),u,a=e.element(document).injector();a.invoke(["$compile",function(e){u=e}]);var f=n("#"+s).html();o.type=s;var l=r.appendTo?n("#"+r.appendTo):t.element;r.widgetId&&(o.id=r.widgetId),i.appendWidget(u,t,l,f,o)})}),define("actions/cloneWidget",["angular","consts","jquery","utils/cache","directives/widgets"],function(e,t,n,r,i){r("actions").set("cloneWidget",function(t,r){var s,o=e.element(document).injector();o.invoke(["$compile",function(e){s=e}]);var u=n(event.target);r.target&&(u=n("#"+r.target));if(u.length){var a=u.scope(),f;r.appendTo?r.appendTo==="canvas"?f=n("#canvas"):r.appendTo==="parent"?f=u.parent():r.appendTo&&(f=n(r.appendTo)):f=u.parent();var l=n("#"+a.widget.type).html(),c=e.copy(a.widget);delete c.id,r.widgetId&&(c.id=r.widgetId),i.appendWidget(s,t,f,l,c)}})}),define("actions/removeWidget",["angular","consts","jquery","utils/cache"],function(e,t,n,r){r("actions").set("removeWidget",function(e,t){var r=n("#"+t.target);r.length&&(r.scope().$destroy(),r.remove())})}),define("actions/repeat",["angular","underscore","utils/cache"],function(e,t,n){function r(e,t,r){var o,u;s(t);var a=n("actions").get("call"),f=1;o=setTimeout(function(){u=setInterval(function(){a(e,r),i(t,f++,r)},r.repeatDelay),n("repeaters").set(t,u),a(e,r),i(t,f++,r)},r.initialDelay||0),n("repeaters").set(t,o),a(e,r),i(t,f++,r)}function i(e,t,n){n.limit&&t>=n.limit&&s(e)}function s(e){var t=n("repeaters").get(e);clearTimeout(t),clearInterval(t)}n("actions").set("repeat",function(e,t){if(!t.name)throw new Error('The attribute "name" is required');r(e,t.name,t)}),n("actions").set("clearRepeat",function(e,t){if(!t.name)throw new Error('The attribute "name" is required');s(t.name)})}),define("utils/compare",[],function(){return{operators:["eq","neq","case_eq","case_neq","gt","lt","gte","lte"],test:function(e,t,n){!isNaN(e)&&!isNaN(n)?(e=Number(e),n=Number(n)):(e=e===undefined?"":e,n=n===undefined?"":n);switch(t){case"eq":return(e+"").toLowerCase()===(n+"").toLowerCase();case"neq":return(e+"").toLowerCase()!==(n+"").toLowerCase();case"case_eq":return e+""==n+"";case"case_neq":return e+""!=n+"";case"gt":return e>n;case"lt":return e<n;case"gte":return e>=n;case"lte":return e<=n}}}}),define("reportCard",["session","utils/compare","utils/data","utils/inspector"],function(e,t,n,r){return{pass:!1,details:{any:[],all:[]},update:function(i,s){if(!s)return;if(r(i).get("question.score.script")){this.pass=n.evaluate({get:function(t){return e.get(i,t,!0)}},i.question.score.script);return}this.pass=!0;var o=s.all,u=s.any,a=s.none,f,l,c,h,p,d,v,m,g;this.details.any=[],this.details.all=[],this.details.none=[];if(this.pass&&u&&u["if"]){this.pass=!1,f=[].concat(u["if"]);for(p=0,v=f.length;p<v;p++){l=f[p];if(l){c=l.property;for(d=0,v=t.operators.length;d<v;d++)h=t.operators[d],l[h]&&(g=e.get(i,c,!0),m=t.test(l[h],h,g+""),this.details.any.push({property:l.property,operator:h,value:l[h],current:g+"",pass:m})),!this.pass&&m&&(this.pass=!0)}}}if(this.pass&&o&&o["if"]){f=[].concat(o["if"]);for(p=0,v=f.length;p<v;p++){l=f[p];if(l){c=l.property;for(d=0,v=t.operators.length;d<v;d++){h=t.operators[d],l[h]&&(g=e.get(i,c,!0),m=t.test(l[h],h,g+""),this.details.all.push({property:l.property,operator:h,value:l[h],current:g+"",pass:m}));if(this.pass&&m===!1){this.pass=!1;break}}}}}if(this.pass&&a&&a["if"]){f=[].concat(a["if"]);for(p=0,v=f.length;p<v;p++){l=f[p];if(l){c=l.property;for(d=0,v=t.operators.length;d<v;d++){h=t.operators[d],l[h]&&(g=e.get(i,c,!0),m=!t.test(l[h],h,g+""),this.details.none.push({property:l.property,operator:h,value:l[h],current:g+"",pass:m}));if(this.pass&&m===!1){this.pass=!1;break}}}}}}}}),define("lms",["angular","config","session","reportCard","utils/cache","settings","lzma"],function(e,t,n,r,i,s,o){function l(){a._setPreferencesVariable("fontSize",s.fontSize),a.setLMSLessonStatus(r.pass?"passed":"failed");if(f){var e=i().get("app"),t=n.get(e,f,!0);a.setLMSRawScore(t)}else a.setLMSRawScore(r.pass?100:0);var u=n.write();o.compress(u,1,function(t){a.setLMSResponseData(t.toString())},function(t){}),a.pauseLMSTimer()}function c(e,t,r){a=new LMSCommunicator(e),f=t||0;if(a.lmsInit(l,!1)){a.pauseLMSTimer();var i=a._getPreferencesVariable("fontSize");i&&(s.fontSize=i);var u=a.getLMSResponseData();u?o.decompress(u.split(","),function(t){n.read(t),r(!0)},function(t){}):r(!0)}else e||(r(!1),window.alert("LMS failed to initialize."))}function h(){a&&a.unpauseLMSTimer()}var u={},a,f;return u.init=c,u.ready=h,u}),define("utils/async",["underscore"],function(e){function t(e){var t=0,n=e.length,r=[];while(t<n)r.push(e[t]),t+=1;return r}function n(e,n,r){function i(){if(n.length){var e=n.shift();e.apply(null,t(arguments).concat(i))}else{var s=t(arguments);s.unshift(null),r&&r.apply(null,s)}}e=e||[],i.apply(null,e.concat(i))}return{waterfall:n}}),define("controllers/mainCtrl",["angular","underscore","config","consts","session","reportCard","template","lms","settings","utils/async","utils/cache","utils/compare","utils/data","utils/inspector","utils/loader","utils/logger","utils/parser"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){e.module("app").controller("MainCtrl",["$scope","$routeParams","$interpolate","$log","$timeout","editor",function(g,y,b,w,E,S){function x(){f.waterfall([],[T,N,C,k,L,O,M,D,A,H,B,j,P],F)}function T(e){d.clearAllFromCache(),e()}function N(e){g.template=o,e()}function C(e){i.clear(),e()}function k(e){window.fn=l("functions").all(),l().set("app",g),e()}function L(e){a.parseWhiteList(n.whitelist),e()}function A(e){if(a.local_mode)return e();u.init(a.local_mode,g.question.weight,function(t){t&&e()})}function O(t){var s=n.paths.strings||n.global.strings,u=0;g.strings=i[r.STRINGS]={},e.forEach(s,function(e){var r=n.paths.exam+e+".xml";o.get(r,{type:"strings"}).then(function(e){++u===s.length&&t()})})}function M(t){var r=n.paths.resources||n.global.resources,i=0;e.forEach(r,function(e){var s=n.paths.exam+e+".xml";o.get(s,{type:"resources"}).then(function(e){++i===r.length&&t()})})}function D(t){var r=n.paths.exam+n.paths.questions+y.qid+".xml";o.get(r,{type:"question"}).then(function(n){g.question=n.template,g.widget={src:g.question.view},l().set("question",n.template);var r;e.forEach(g.question.init,function(t,n){l("actions").has(n)&&(r=l("actions").get(n),t=h.toArray(t),e.forEach(t,function(e){e&&r(g,e)}))}),t()})}function P(e){var n=g.$watch(function(){n();var r=g.$on("slide::sourceChanged",t.debounce(function(){r();var t=g.$watch("template.loader.state",function(n){n==="ready"&&(t(),e())});g.tryApply()},1))})}function H(e){i.createRestorePoint(),e()}function B(e){g.$watch("session.data",function(){s.update(g,g.question.score)},!0),e()}function j(e){g.$on("hammer::showAuth",function(){g.showAuth=!0}),g.$on("hammer::hideAuth",function(){g.showAuth=!1}),e()}function F(t){if(t)console.error(t);else{var n=g.slideUrl;g.slideUrl=null,E(function(){g.slideUrl=n,u.ready(),g.template=null,g.$broadcast(r.READY),e.element(document).trigger(r.READY)})}}function I(e,t,n,r){if(t.indexOf("::")!==-1){v.log("fn",t),l("actions").get("exec")(g,{command:t});return}r(e,t,n)}function q(e,t,n,r){if(/dispatch/.test(t)){var i=t.replace(/dispatch\(\'(\w+)(.*)/,"$1");g.run(e,{action:{type:"dispatch",name:i}});return}r(e,t,n)}function R(e,t,n,r){var i=t.match(/^\w+/gim),s,o;i&&(i=i[0],s=e.functions?e.functions[i]:undefined);if(s){var u=p(e).get("tmp."+i+".timer",u);switch(s.waitType){case"delay":u=setTimeout(U,s.waitTime,e,t,n,s);break;case"debounce":clearTimeout(u),u=setTimeout(U,s.waitTime,e,t,n,s);break;case"throttle":if(u)return;u=setTimeout(function(){u=null},s.waitTime),U(e,t,n,s);break;default:U(e,t,n,s)}p(e).set("tmp."+i+".timer",u)}else r(e,t,n,s)}function U(e,t,n,r){n=n||{};if(r.limit){var i=p(e).get("tmp."+t+".count")||0;if(i>=r.limit)return;p(e).set("tmp."+t+".count",i+1)}var s=t.match(/\(.+\)/gim);if(s){var o=s[0].substr(1,s[0].length-2);n.data=h.rawEval(o)}v.log("fn",t,r),z(e,n),g.run(e,r),g.tryApply(),W(e)}function z(e,t){e.properties.event=t}function W(e){e&&e.properties&&delete e.properties.event}function X(e,t,n,r,i){if(g!==e&&e.$parent)return g.invoke(e.$parent,t,n);i(e,t,n)}function V(e,t){t!=="default"&&(v.log("fn",t),l("actions").get("exec")(g,{command:n.defaults.command}))}g.settings=a,g.strings=null,g.question=null,g.widget=null,g.reportCard=s,g.properties={},g.session=i,g.slideUrl=r.VIEW_PATH+"slide.html",g.template=null,g.invoke=function(e,t,n){if(S.preventDefault)return;t&&f.waterfall([e,t,n],[I,q,R,X,V],function(e){console.error(e)})},g.runCondition=function(e,t){if(!t)return!1;t=[].concat(t);var n=0,r=t.length,s,o,u,a,f;while(n<r){f=t[n];if("expression"in f){s=m.transformProp(f.expression+"",!0),o=b(s),u=o(e),a=!1;try{a=e.$eval(u)}catch(l){w.error("Malformed expression in condition: "+f.expression+". Check for literals that should be strings.")}if(a)return g.run(e,f),!0}else if("property"in f)for(var l in c.operators)if(c.operators.hasOwnProperty(l)){var h=c.operators[l],p=i.get(e,f.property,!0),d=i.get(e,f[h]);if(f[h]!==undefined&&c.test(p,h,d))return g.run(e,f),!0}n+=1}return!1},g.run=function(t,n){n&&(n.action?e.forEach(h.toArray(n.action),function(e){l("actions").get(e.type)(t,e)}):e.isString(n)&&m.transformEval(n))},g.toggleConsole=function(){a.toggleConsole()},g.authorize=function(e){a.authorize(e)},g.closeAuth=function(){g.$broadcast("hammer::hideAuth")},g.callAction=function(e){v.log("call",e),g.invoke(g,e)},g.reset=function(){e.element.popup.closeAllGroups(),i.restore(),g.$broadcast(r.RESET);var t=g.slideUrl;g.slideUrl=null,E(function(){g.slideUrl=t})},g.on=function(e,t){return g.$on(e,t)},g.$on(r.DISPATCH,function(e,t,n,r,i){r&&r.events&&r.events[n]&&g.invoke(t,r.events[n],i)}),g.tryApply=function(e){g.$$phase||g.$apply(e)},x()}])}),define("controllers/consoleCtrl",["angular","jquery","underscore","session","reportCard","utils/logger"],function(e,t,n,r,i,s){e.module("app").controller("ConsoleCtrl",["$scope",function(e){e.model=r,e.reportCard=i,e.selected="key",e.select=function(t){e.selected=t},e.logs=s.logs,e.clearLogs=function(){s.clear()},e.read=function(){r.read(e.model.io_data)},e.write=function(){e.model.io_data=r.write()};var n=t("#splitter-container").split({orientation:"horizontal",limit:100,position:"80%"});e.$on("$destroy",function(){n.destroy()})}])}),define("controllers/slideCtrl",["angular","jquery","consts","utils/md5","utils/cache","utils/data","utils/parser","session","template","utils/async","utils/logger"],function(e,t,n,r,i,s,o,u,a,f,l){e.module("app").controller("SlideCtrl",["$scope","$element","editor",function(t,r,i){function g(){N()}function y(e,t){for(var n in e)if(e[n]===t)return n;return-1}function b(n){var r=n.template.listeners,i;e.forEach(r,function(e){e.on==="dispatch"&&(i=t.on(e.target,T),s.push(i),f[e.target]=e)}),t.on(t.widget.id+"::path",function(e,n){t.widget.src=n})}function w(n){e.forEach(n.template,function(e,n){t[n]=e}),t.properties=e.copy(n.template.properties),u.slides[n.payload.name]=t.properties}function E(n){var r=m.template.listeners;e.forEach(r,function(e){if(e.on==="change"){var n=o.transformProp("{{"+e.target+"}}");u.watch(t,"{{"+e.target+"}}",function(n,r){n!==undefined&&n!==r&&t.invoke(t,e.handler)})}})}function S(n){var r=n.template.listeners;e.forEach(r,function(e){e.on==="load"&&t.invoke(t,e.handler)}),t.tryApply()}function x(e){e&&e!==h&&(h=e,N(),a.get(e).then(function(e){m=e,b(e),w(e),E(e),S(e)}),t.$emit("slide::sourceChanged",e))}function T(e){var n=f[e.name],r;n?(p[n.target]||(p[n.target]=!0,t.invoke(t,n.handler)),setTimeout(function(){p={}},10)):t.invoke(t,"$$invalid")}function N(){C(),k(),A(),L(),O()}function C(){r.scrollTop(0)}function k(){var e=0,t=s?s.length:0;while(e<t)s[e](),e+=1}function L(){h="",s=[],f={},c={},p={},m=null}function A(){m&&delete u.slides[m.payload.name]}function O(){e.forEach(v,function(e){t[e]=null})}var s,f,c,h,p,d,v="view widgets properties functions tooltips".split(" "),m=null;t.tmp={},t.element=r,t.$watch("widget.src",function(e){if(e)if(e.indexOf("{{")!==-1){var n=o.transformProp(t.widget.src);t.properties||(n="$parent."+n),t.$watch(n,function(e){x(e)})}else x(t.widget.src)}),t.onKeyboard=function(n,r){try{var i=m.template.listeners;e.forEach(i,function(e){e.on==="keypress"&&e.target===n&&t.invoke(t,e.handler)})}catch(s){}},t.dispatch=function(e,s,o){if(m)if(e==="select"){var u=y(t.widgets,s);i.set(m,r,s,u)}else l.log("event",e,{url:m.url,widget:s}),o=o||{},o.target=s,t.$emit(n.DISPATCH,t,e,s,o)},t.$on(n.RESET,function(){C(),w(m)}),t.$on("$destroy",function(){var n=m.template.listeners;e.forEach(n,function(e){e.on==="unload"&&t.invoke(t,e.handler)}),N()}),g()}])}),define("controllers/boxCtrl",["angular","utils/data"],function(e,t){function r(t,r){e.forEach(t,function(t){e.forEach(n,function(n){delete t[n],e.extend(t,r)})})}var n="x y top left bottom right".split(" ");e.module("app").controller("BoxCtrl",["$scope","$element",function(n,i){function s(){e.forEach("widgets".split(" "),function(e){n[e]=null}),n.widgets=t.toArray(n.widget.widgets);switch(n.widget.flow){case"horizontal":r(n.widgets,{height:"100%"});break;case"vertical":r(n.widgets,{width:"100%"});break;case"grid":r(n.widgets,{})}}s()}])}),define("controllers/editorCtrl",["angular","jquery","underscore","consts","session","utils/loader"],function(e,t,n,r,i,s){function u(e,t){if(e&&t&&e!==t){var n=a(e),r=a(t);if(n.top>=r.top&&n.top<r.bottom&&n.left>=r.left&&n.left<r.right)return!0}return!1}function a(e){var t,n,r,i;r=0,i=0,t=e;while(t)r+=t.offsetTop,t=t.offsetParent;n=e.parentElement;while(n)n.scrollTop!==null&&(r-=n.scrollTop,i-=n.scrollLeft),n=n.parentElement;return{top:r,left:i,bottom:r+e.offsetHeight,right:i+e.offsetWidth}}function f(e){if(window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");if(typeof window.ActiveXObject!="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}return null}function l(e){if(window.ActiveXObject){var t=e.xml;return t}return(new XMLSerializer).serializeToString(e)}var o="http://localhost:1687";e.module("app").service("editor",["$http","$timeout",function(n,r){function v(){return l(h)}function m(){return n({url:o+"/path",method:"GET",withCredentials:!0,headers:{"Content-Type":"application/json; charset=utf-8"}})}function g(){var e=(a.path+"/"+a.slide.url).split("/");return e.pop(),e.join("/")}function y(){return n({url:o+"/v1/slides/"+this.slide.url,method:"POST",data:a.output(),withCredentials:!0,headers:{"Content-Type":"text/plain; charset=utf-8"}}).then(function(){console.log("saved"),a.message="Document saved",r(function(){a.message=null},2e3)})}function b(e,n){t(d).css("left",e),p.setAttribute("x",e+n),a.widget.x=e+n,a.updateWidgetOutline()}function w(e,n){t(d).css("top",e),p.setAttribute("y",e+n),a.widget.y=e+n,a.updateWidgetOutline()}function E(e,n){t(d).css("left",e),p.setAttribute("x",e+n),a.widget.left=e+n,a.updateWidgetOutline()}function S(e,n){t(d).css("top",e),p.setAttribute("y",e+n),a.widget.top=e+n,a.updateWidgetOutline()}function x(e,n){t(d).css("right",e),p.setAttribute("right",e+n),a.widget.right=e+n,a.updateWidgetOutline()}function T(e,n){t(d).css("bottom",e),p.setAttribute("bottom",e+n),a.widget.bottom=e+n,a.updateWidgetOutline()}function N(e,n){t(d).css("width",e+n),p.setAttribute("width",e+n),a.widget.width=e+n,a.updateWidgetOutline()}function C(e,n){t(d).css("height",e+n),p.setAttribute("height",e+n),a.widget.height=e+n,a.updateWidgetOutline()}function k(t,n,r,o){a.slideEl&&a.slideEl.off(),a.slide&&(s.get(t.url).original=a.output()),a.slide=t,d=n.find("[ui-widgets]").children()[o],h=f(s.get(t.url).original),p=h.querySelector("view").children[o],a.slideEl=n,a.widgetPosition=o,a.widget=r,a.events=e.copy(r.events),a.aria=e.copy(r.aria);for(var u in a.widget)a.widget.hasOwnProperty(u)&&(a.widget[u]=i.getTokenFromLabel(a.widget[u]));a.events=r.events,a.updateWidgetOutline(!0),a.updateSlideOutline(),n.on("scroll",L)}function L(){a.updateWidgetOutline(),a.updateSlideOutline()}function A(){setTimeout(function(){var e=t("#slideOutline"),n=t(a.slideEl);e.offset(n.offset()),e.width(n.width()),e.height(n.height())})}function O(e){setTimeout(function(){var n=t("#widgetOutline");if(d){var r=t(d);n.show();if(e){var i=u(d,a.slideEl[0]);if(!i){d.scrollIntoView(!0);var s=r.offset();s.top+=10,s.left+=10,r.offset(s)}}n.offset(r.offset()),n.width(r.outerWidth()),n.height(r.outerHeight())}else n.hide()})}function M(e,t,n){var r=P(t);t=parseInt(t,10),a["set_"+e](++t,r),D(),c=setTimeout(function(){c=setInterval(function(){a["set_"+e](++t,r),n&&n()},50)},300)}function _(e,t,n){var r=P(t);t=parseInt(t,10),a["set_"+e](--t,r),D(),c=setTimeout(function(){c=setInterval(function(){a["set_"+e](--t,r),n&&n()},50)},300)}function D(){clearInterval(c)}function P(e){var t="";return typeof e=="string"&&(e.indexOf("%")!==-1&&(t="%"),e.indexOf("px")!==-1&&(t="px")),t}function H(e){e.preventDefault(),e.stopPropagation()}function B(e){var t;e.shiftKey&&(a.preventDefault=!0);if(!a.widget)return;var n=1;e.shiftKey&&(n=10);switch(e.keyCode){case 27:a.widget=null;break;case 37:typeof a.widget.x!="undefined"&&(H(e),t=P(a.widget.x),b(a.widget.x-n,t)),typeof a.widget.left!="undefined"&&(H(e),t=P(a.widget.left),E(a.widget.left-n,t));break;case 38:typeof a.widget.y!="undefined"&&(H(e),t=P(a.widget.y),w(a.widget.y-n,t)),typeof a.widget.top!="undefined"&&(H(e),t=P(a.widget.top),S(a.widget.top-n,t));break;case 39:typeof a.widget.x!="undefined"&&(H(e),t=P(a.widget.x),b(parseInt(a.widget.x,10)+n,t)),typeof a.widget.left!="undefined"&&(H(e),t=P(a.widget.left),E(parseInt(a.widget.left,10)+n,t));break;case 40:typeof a.widget.y!="undefined"&&(H(e),t=P(a.widget.y),w(parseInt(a.widget.y,10)+n,t)),typeof a.widget.top!="undefined"&&(H(e),t=P(a.widget.top),S(parseInt(a.widget.top,10)+n,t))}}function j(e){a.preventDefault=!1}function F(e){e.shiftKey&&H(e)}function I(e){e.shiftKey&&H(e)}function q(e){e.shiftKey&&(H(e),a.slideScope=t(e.target).scope(),a.slideScope.$apply('dispatch("select", widget)'))}function R(e){a.widget&&(a.updateSlideOutline(),a.updateWidgetOutline())}var a=this,c,h=null,p=null,d=null;document.addEventListener("keydown",B,!0),document.addEventListener("keyup",j,!0),document.addEventListener("mousedown",F,!0),document.addEventListener("mouseup",I,!0),document.addEventListener("click",q,!0),window.addEventListener("resize",R,!0),this.active=!0,this.slide=null,this.widget=null,this.events=null,this.aria=null,this.widgetPosition=null,this.slideEl=null,this.path=null,this.connected=!1,this.dir=g,this.output=v,this.set_x=b,this.set_y=w,this.set_left=E,this.set_top=S,this.set_right=x,this.set_bottom=T,this.set=k,this.save=y,this.getPath=m,this.updateSlideOutline=A,this.updateWidgetOutline=O,this.startInc=M,this.startDec=_,this.stop=D}]),e.module("app").controller("EditorCtrl",["$scope","editor",function(e,t){function i(){return t.widget?t.slideScope.widgets?!0:!1:!1}function s(){t.save()}function o(){t.active=!t.active}function u(e,n){if(!t.connected)return!1;if(t.widget.src+".xml"===t.slide.url)return!1;var r=!!t["set_"+e];return r?(n+"").indexOf("{{")===-1:!1}function a(e,n){t.set(t.slide,t.slideEl,n,e)}function f(n,r){t.startInc(n,r,function(){e.$$phase||e.$digest()})}function l(n,r){t.startDec(n,r,function(){e.$$phase||e.$digest()})}function c(){t.stop()}var n,r="";e.editor=t,e.canShow=i,e.save=s,e.toggleEditor=o,e.canEditNumber=u,e.selectWidget=a,e.startInc=f,e.startDec=l,e.stop=c}]),e.module("app").directive("uiEditor",["editor",function(e){return function(){function n(){window.define=t}var t=window.define;window.define=null;var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src="//cdn.jsdelivr.net/zeroclipboard/1.3.3/ZeroClipboard.js",i.onreadystatechange=function(){this.readyState==="complete"&&n()},i.onload=n,r.appendChild(i)}(),{link:function(n,r,i){var s;e.getPath().then(function(t){e.path=t.data.path,e.connected=!0},function(t){e.path="Not connected",e.connected=!1}),n.$on("$destroy",function(){t(e.slideEl).off("scroll")}),setTimeout(function(){var e=document.getElementById("clippy");ZeroClipboard.config({moviePath:"//cdn.jsdelivr.net/zeroclipboard/1.3.3/ZeroClipboard.swf"}),s=new ZeroClipboard(e)},100)}}}])}),define("directives/stem",["angular","consts"],function(e,t){e.module("app").directive("uiStem",["$compile","$timeout",function(e,n){return{restrict:"A",link:function(n,r,i){function l(e){e&&(r.height(0),s=Math.min(f,r[0].scrollHeight-o),r.height(s),n.settings.showCollapseButton=r[0].scrollHeight>u)}var s=0,o=0,u=73,a=50,f=600;n.$on(t.READY,function(){l()}),n.$watch(i.uiStem,function(t){if(t){t=t.replace(/\[link click="(.+)"\](.+)\[\/link\]/,'<div tabindex="0" role="link" class="stem-link" ng-click="callAction(\'$1\')">$2</div>');var i=e("<div>"+t+"</div>")(n);r.html(i),l(n.settings.fontSize)}}),n.$watch("settings.fontSize",function(e){n.settings.collapsedText=!1,l(e)}),n.$watch("settings.collapsedText",function(e){e===!0?r.height(a):e===!1&&r.height(s)})}}}])}),define("directives/treeview",["angular"],function(e){var t=e.module("app"),n='<ul class="jsonTree"><li ng-repeat="(nodeLabel, nodeValue) in jsonData track by nodeLabel" json-node="node"><i class="collapsed" ng-show="desc.hasChildren && !desc.children"ng-click="toggleExpand(desc)"></i><i class="expanded" ng-show="desc.hasChildren && desc.children"ng-click="toggleExpand(desc)"></i><i class="normal" ng-hide="desc.hasChildren"></i><div ng-switch="desc.type" class="node" ng-class="desc.selected"ng-mouseup="toggleExpand(desc)" ng-mousedown="select(desc)"><span class="node-label" ng-bind="nodeLabel"></span>: <div style="display: inline-block" ng-switch-when="array">Array[{{desc.data.length}}]</div><div style="display: inline-block" ng-switch-when="object">{{desc.className}}</div><div style="display: inline-block" ng-switch-when="string"><span class="node-string">"{{nodeValue}}"</span></div><div style="display: inline-block" ng-switch-when="bool"><span class="node-bool">{{nodeValue}}</span></div><div style="display: inline-block" ng-switch-when="number"><span class="node-number">{{nodeValue}}</span></div><div style="display: inline-block" ng-switch-when="null"><span class="node-null">null</span></div><div style="display: inline-block" ng-switch-when="undefined"><span class="node-undefined">undefined</span></div></div><span ng-if="opts.showPaths" ng-bind="desc.path" style="font-weight: normal;color: #BBBBBB"></span><div ux-jsonview ng-model="desc.children"></div></li></ul>';t.directive("jsonNode",function(){return{restrict:"A",link:function(t,n,r){function o(){var n="",r=t;n=[];if(r.path)return r.path;while(r&&r.nodeLabel!==undefined)e.isNumber(r.nodeLabel)?n.push("["+r.nodeLabel+"]"):n.push(r.nodeLabel),r=r.$parent.$parent;return n.push(t.nodeSrc),n.reverse(),n.join(".").replace(/\.(\[\d+\])/gim,"$1")}var i=t.nodeValue,s={};e.isArray(i)?(s.type="array",s.hasChildren=!0,s.data=i):e.isObject(i)?(s.type="object",s.hasChildren=!0,s.data=i,s.className=i.constructor.name):e.isString(i)?s.type="string":i===!0||i===!1?s.type="bool":e.isNumber(i)?s.type="number":i===null?s.type="null":i===undefined&&(s.type="undefined"),s.path=o(),t.desc=s,t.refresh=function(){if(s.data){var e=t.$eval(s.path);e+""!="NaN"&&(s.data=e,s.children&&(s.children=e))}},t.$on("updateNode",function(){t.refresh()})}}}),t.directive("uxJsonview",["$compile",function(e){return{require:"ngModel",restrict:"A",scope:!0,link:function(t,r,i){t.initted||(t.initted=!0,t.nodeSrc=i.ngModel,t.template=n,t.toggleExpand=function(e){e.hasChildren&&(e.children?e.children=null:e.children=e.data)},t.select=function(e){t.activeNode&&t.activeNode.selected&&(t.activeNode.selected=undefined),e.selected="selected",t.activeNode=e},t.$watch(i.uxJsonview,function(e){t.opts=e})),t.$watch(i.ngModel,function(e){t.jsonData=e,t.$broadcast("updateNode")},!0),r.html("").append(e(t.template)(t))}}}])}),define("directives/widget",["angular","jquery"],function(e,t){return e.module("app").directive("uiWidget",["$compile",function(e){return{scope:!0,link:function(n,r,i){var s;n.$watch(i.uiWidget,function(o){if(o){n.widget=n.$eval(i.ngModel);var u=t("#"+o).html();if(u){var a=e(u);s=a(n),r.append(s)}else window.alert('Widget type "'+o+'" does not have a script template.')}else s&&s.remove()})}}}])}),define("directives/behaviors/aria",["angular"],function(e){e.module("app").directive("uiAria",function(){return{restrict:"A",link:function(e,t,n){var r=e.widget.aria;for(var i in r)t.attr("aria-"+i,r[i])}}})}),define("directives/behaviors/blur",["angular"],function(e){e.module("app").directive("uiBlur",function(){return{restrict:"A",link:function(e,t,n){t.blur(function(t){t.stopPropagation(),e.$$phase||e.$apply(n.uiBlur)})}}})}),define("directives/behaviors/events",["angular","jquery","underscore"],function(e,t,n){e.module("app").directive("uiEvents",["$timeout",function(e){function r(e,t){e.$$phase||e.$apply(t)}var n={};return n.click=function(e,n){var i=this;e.on("click",function(s){e.attr("disabled")||(window.event=s,s.stopPropagation(),t.popup.manualClose||t.popup.closeGroup("menu"),r(i,n))})},n.rclick=function(e,n){var i=this;e.on("mouseup",function(s){e.attr("disabled")||s.which===3&&(window.event=s,t.popup.manualClose||t.popup.closeGroup("menu"),r(i,n),s.stopPropagation())})},n.dblclick=function(e,t){var n=this;e.on("dblclick",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.mousedown=function(e,t){var n=this;e.on("mousedown",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.mouseup=function(e,t){var n=this;e.on("mouseup",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.mouseenter=function(e,t){var n=this;e.on("mouseenter",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.mouseleave=function(e,t){var n=this;e.on("mouseleave",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.change=function(t,n){var i=this;t.on("keyup",function(e){t.attr("disabled")||(r(i,n),e.stopPropagation())}),t.on("change",function(s){t.attr("disabled")||(e(function(){r(i,n)},10),s.stopPropagation())})},n.focus=function(e,t){var n=this;e.on("focus",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.blur=function(e,t){var n=this;e.on("blur",function(i){e.attr("disabled")||(window.event=i,r(n,t),i.stopPropagation())})},n.show=function(e,t){var n=this;e.on("show",function(e){window.event=e,r(n,t),e.stopPropagation()})},n.select=function(e,t){var n=this;e.on("select",function(){r(n,t)},!0)},{restrict:"A",link:function(e,t,r){var i=e.$eval(r.uiEvents),s='dispatch("$event", '+r.uiEvents+")",o,u;if(i){var a='dispatch("select", widget)';n.select.apply(e,[t,a])}if(i&&i.hasOwnProperty("events"))for(var f in i.events)i.events.hasOwnProperty(f)&&(o=f,u=s.split("$event").join(o),n[o]&&n[o].apply(e,[t,u]))}}}])}),define("directives/behaviors/focus",["angular","jquery"],function(e,t){e.module("app").directive("uiFocus",["focusDispatcher","focusManager",function(e,n){var r=null,i=null;return{restrict:"A",link:function(s,o,u){if(i)return;n.off(),i=e(),i.on("focusin",function(e){r=e.newTarget.id}),t(document).on("keyup",function(){if(r){var e=t("#"+r);e.length&&n.focus(e[0])}}),setTimeout(function(){t("[role=button]").attr("tabindex",0)},1e3)}}}])}),define("directives/behaviors/format",["angular","utils/cache","session"],function(e,t,n){e.module("app").directive("uiFormat",[function(){return{require:"ngModel",restrict:"A",link:function(e,r,i,s){var o=e.widget,u=n.get(e,o.format),a;u&&(t("formatters").has(u)&&(a=t("formatters").get(u),a.focus&&r.focus(function(t){n.set(e,o.text,a.focus(s.$modelValue))}),a.blur&&r.blur(function(t){n.set(e,o.text,a.blur(s.$modelValue))})),s.$formatters.push(function(e){if(a)return a.blur(e)}))}}}])}),define("directives/behaviors/keyboard",["angular","jquery","config"],function(e,t,n){e.module("app").directive("uiKeyboard",function(){var r,i=t.cleanData;t.cleanData=function(e){for(var n=0,r;(r=e[n])!==undefined;n++)t(r).triggerHandler("destroyed");i(e)};var s=[],o={8:"BACKSPACE",9:"TAB",13:"ENTER",19:"PAUSE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",27:"ESC",45:"INSERT",46:"DEL",36:"HOME",35:"END",33:"PAGE_UP",34:"PAGE_DOWN",91:"WIN",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};if(!document.onkeypress){var u=[],a,f,l,c,h,p=function(t){if(!t)return;!t.isBlocked&&!n.enableNativeKeyboardSupport&&(t.stopImmediatePropagation(),t.stopPropagation());var r=t.keyCode?t.keyCode:t.which;t.keyCode?r=t.keyCode:t.which&&(r=t.which),l=String.fromCharCode(r).toUpperCase(),f=l,c=f,o[r]&&(c=o[r]);if(f){t.shiftKey&&(c=r===16?"SHIFT":"SHIFT+"+c),t.altKey&&(c=r===18?"ALT":"ALT+"+c,!t.isBlocked&&!n.enableNativeKeyboardSupport&&t.preventDefault());if(t.ctrlKey){c=r===17?"CTRL":"CTRL+"+c;switch(c){case"CTRL+A":case"CTRL+SHIFT+LEFT":case"CTRL+SHIFT+UP":case"CTRL+SHIFT+RIGHT":case"CTRL+SHIFT+BOTTOM":case"CTRL+X":case"CTRL+C":case"CTRL+V":case"CTRL+SHIFT+I":break;default:t.isBlocked||t.preventDefault()}}t.winKey&&(c!=="WIN"?c="WIN+"+c:c="WIN");for(var i=0,u=s.length;i<u;i++)s[i]&&s[i].scope&&s[i].scope.onKeyboard&&s[i].scope.onKeyboard(c);e.element("body").scope().$$phase||e.element("body").scope().$apply()}};document.keyDown||(document.keyDown=function(e){return e.isBlocked=!0,p(e)}),document.onkeydown||(document.onkeydown=function(e){return p(e)})}return{restrict:"A",link:function(e,t,n){for(var r=0,i=s.length;r<i;++r)if(s[r].scope.$id===e.$id)return;s.push({el:t[0],scope:e}),t.bind("destroyed",function(e){t.unbind("destroyed");for(var n=0,r=s.length;n<r;n++)(!s[n]||s[n].el===e.target)&&s.splice(parseInt(n,10),1)})}}})}),define("directives/behaviors/restrict",["angular","session"],function(e,t){e.module("app").directive("uiRestrict",[function(){return{restrict:"AC",link:function(e,n,r){var i=e.widget,s=e.widget.restrict,o=e.widget.maxchars;if(!s&&!o)return;var u=function(e){return e+="",e.match(new RegExp("[^"+s+"]","g"))?!1:e.length>o?!1:!0};n.bind("input",function(r){r.preventDefault();var i=n.getSelectionStart();u(n.val())?(t[e.widget.text]=n.val(),e.$$phase||e.$apply()):(n.val(t[e.widget.text]),i&&i--),n.setCursorPosition(i)})}}}])}),define("directives/behaviors/setFocus",["angular"],function(e){e.module("app").directive("uiSetFocus",function(){return{restrict:"A",link:function(e,t,n){e.widget.focus&&e.widget.focus&&e.widget.focus!=="none"&&(setTimeout(function(){t.focus()}),e.widget.focus==="lock"&&t.blur(function(n){var r=t.val(),i=n.target.selectionStart,s=n.target.selectionEnd,o=e.$watch(function(){o(),setTimeout(function(){t.val()===r&&setTimeout(function(){t.setSelection(i,s)})})});setTimeout(function(){t.focus()})}))}}})}),define("directives/behaviors/mouse",["angular","config"],function(e,t){t.enableNativeMouseSupport||(document.oncontextmenu=function(){return!1}),e.module("app").directive("uiMousedown",function(){return{restrict:"A",link:function(e,t,n){t.mousedown(function(t){t.stopPropagation(),e.$$phase||e.$apply(n.uiBlur)})}}})}),define("directives/widgets/button",["angular","session"],function(e,t){e.module("app").directive("uiButton",[function(){return{restrict:"A",link:function(e,n,r){var i=e.widget,s;i.property&&i.property.indexOf("{{")!==-1&&t.watch(e,i.property,function(r){s=t.get(e,i.disable),s?n.addClass("disabled"):n.removeClass("disabled");var o=t.get(e,i.valueOn)||!0;r===o?n.addClass("selected"):n.removeClass("selected")}),n.on("click",function(n){var r,o,u,a;s=t.get(e,i.disable);if(s)return;r=t.get(e,i.property,!0),a=t.get(e,i.toggleEnabled),i.property&&(o=t.get(e,i.valueOn)||!0,a?r===o?(u=t.get(e,i.valueOff)||!1,t.set(e,i.property,u)):t.set(e,i.property,o):t.set(e,i.property,o)),e.dispatch("change",i),e.$$phase||e.$apply()})}}}])}),define("directives/widgets/dialog",["angular","jquery","consts","template","utils/cache"],function(e,t,n,r,i){e.module("app").directive("uiDialog",["$compile",function(e){function u(n,r,u,a){var f=r.id?r.id:"$$"+r.type+"_"+s++,l=t("#slide").html();l=t.trim(l.replace(/style=".+"/i,""));var c=i().get("app").$new();c.widget=r,r.id=f,r.vCenter&&r.hCenter?(r.top=0,r.bottom=0,r.left=0,r.right=0,r.margin="auto"):r.vCenter?(r.top=0,r.bottom=0,r.margin="auto 0"):r.hCenter&&(r.left=0,r.right=0,r.margin="0 auto");var h=e(l)(c);h.width(a.template.view.width),h.height(a.template.view.height),h.popup({id:r.id,zIndex:o,appendTo:".popup-container",position:r,maxWidth:"100%",maxHeight:"100%",modal:r.modal===!0,overlayClose:!1,onOpen:function(e){r.events&&r.events.open&&u.invoke(u,r.events.open),e.on("mousedown",function(t){e.css("zIndex",++o)})},onClose:function(){r.events&&r.events.close&&u.invoke(u,r.events.close),c.$destroy()}}),n.$$phase||n.$apply()}var s=1,o=1e3;return{restrict:"A",link:function(e,i,s){e.$on(n.OPEN_DIALOG,function(t,n,i){r.get(n.src).then(function(t){u(e,n,i,t)})}),e.$on(n.CLOSE_DIALOGS,function(e,n){n=n||e.targetScope.widget.id,n==="*"?t.popup.closeAllGroups():n==="@"?t.popup.close():t.popup.close(n)})}}}])}),define("directives/widgets/hotspot",["angular","session","jquery","utils/data"],function(e,t,n,r){e.module("app").directive("uiHotspot",function(){function s(e,t){for(var n=!1,r=-1,i=e.length,s=i-1;++r<i;s=r)(e[r].y<=t.y&&t.y<e[s].y||e[s].y<=t.y&&t.y<e[r].y)&&t.x<(e[s].x-e[r].x)*(t.y-e[r].y)/(e[s].y-e[r].y)+e[r].x&&(n=!n);return n}function o(e){var t="";return t+="M "+e.x+" "+e.y+" ",t+="L "+e.width+" "+e.y+" ",t+="L "+e.width+" "+e.height+" ",t+="L "+e.x+" "+e.height+" ",t+="L "+e.x+" "+e.y+" ",t+="Z",t}function u(e,t){var n=svg(e[0]),r=n.path(t);r.fill({color:"#00FFFF",opacity:1})}function a(t){var r=t.split(" "),i=[];e.forEach(r,function(e){e=n.trim(e),e!==""&&i.push(e)});var s=[],o=0,u=i.length,a,f,l=0,c=0;while(o<u){switch(i[o]){case"M":l=parseInt(i[o+1],10),c=parseInt(i[o+2],10),s.push({x:l,y:c});break;case"L":a=parseInt(i[o+1],10),f=parseInt(i[o+2],10),s.push({x:a,y:f});break;case"Z":}o+=3}return s}var i={left:0,top:0};return n(document).bind("scroll",function(e){i.top=n(document).scrollTop(),i.left=n(document).scrollLeft()}),{restrict:"AC",scope:!0,link:function(e,f,l){function E(t){if(e.settings.debug){var r=n(t.target),i='<div class="tippy">'+r.data("option").id+"</div>",s=n(i),o=r.offset();s.offset(o),n("body").append(s)}}function S(e){n(".tippy").remove()}var c=e.widget,h=t[c.options],p=f.find(".canvas");p.css("pointer-events","none");var d=f.find(".background"),v=f.find(".pin");v.hide();var m=r.toArray(h.option),g=m.length,y="",b,w;while(g--){b=m[g];switch(b.type){case"rect":w=o(b),b.path=w,y+=w;break;default:y+=b.path+" "}u(p,b.path),b.coords=a(b.path);var x=n(p.find("path")).last();x.css("pointer-events","auto"),x.data("option",b),x.mouseover(E),x.mouseleave(S)}f.mousedown(function(n){var r=n.clientX+i.left-v.width()*.5,o=n.clientY+i.top-v.height()*.5;v.offset({top:o,left:r});var u=m.length,a=[],f=!1,l=0;while(u--)s(m[u].coords,{x:n.offsetX,y:n.offsetY})&&(a.push(m[u].id),l+=m[u].weight||0);l?e.$apply(e.dispatch("hit",e.widget)):e.$apply(e.dispatch("miss",e.widget)),t[c.metadata]={top:o,left:r},t[c.points]=l,t[c.selectedOptions]=a,e.updateScore()});var T=new Image;T.onload=function(){d.prepend(T),p.css("width",T.width),p.css("height",T.height)},T.src=h.img,e.session=t,e.$watch('session["'+c.metadata+'"]',function(e){e})}}})}),define("directives/widgets/html",["angular","underscore","session","utils/parser","utils/loader"],function(e,t,n,r,i){e.module("app").directive("uiHtml",[function(){return function(e,t,s){if(e.widget.src){var o=n.get(e,e.widget.src);i.addToQueue(o).then(function(e){t.html(e.data)});return}if(r.hasBinds(e.widget.text)){var u=r.transformProp(e.widget.text);e.$watch(u,function(e){t.html(e)})}else if(e.widget.text===undefined)e.$watch(s.uiHtml,function(e){t.html(e)});else{var a=n.get(e,e.widget.text);t.html(a)}}}])}),define("directives/widgets/image",["angular"],function(e){e.module("app").directive("uiImage",["$parse",function(e){return{restrict:"A",link:function(t,n,r){t.$watch(r.uiImage,function(n){if(n)if(!n.width||!n.height){var i=n.background_image||n.src;if(i.indexOf("{{")!==-1)return;var s=new Image;s.src=i,n.width||e(r.uiImage+".width").assign(t,s.width),n.height||e(r.uiImage+".height").assign(t,s.height),t.$$phase||t.$digest()}})}}}])}),define("directives/widgets/list",["angular","session","utils/data","utils/parser"],function(e,t,n,r){e.module("app").directive("uiList",["$timeout",function(i){return{restrict:"A",link:function(s,o,u,a){var f=s.widget,l=t.get(s,f.dataProvider),c,h,p,d="change";c=r.transformProp(f.dataProvider),s.$watch(c,function(e){var n=t.get(s,f.selectedIndex);s.options=e.option,n>-1&&n<s.options.length&&setTimeout(function(){o[0].selectedIndex=n})},!0);var v=!1;f.selectedItem&&(h=r.transformProp(f.selectedItem),s.$watch(h,function(n){i(function(){var r=0;e.forEach(l.option,function(e,t){e.value===n&&(r=t)}),f.selectedIndex&&v&&t.set(s,f.selectedIndex,r)})})),f.selectedIndex&&(p=r.transformProp(f.selectedIndex),s.$watch(p,function(e){e>-1&&e<s.options.length&&i(function(){o[0].selectedIndex=e,f.selectedItem&&t.set(s,f.selectedItem,s.options[e].value),v||s.dispatch("change",f),v=!0})})),o.bind(d,function(){var e=Number(o.get(0).selectedIndex);e>-1&&e<s.options.length&&(s.selectedItem=s.options[e],t.set(s,f.selectedIndex,e)),s.$$phase||s.$apply()}),s.options=n.toArray(l.option)}}}])}),define("directives/widgets/menu",["angular","jquery","consts","config","template"],function(e,t,n,r,i){e.module("app").directive("uiMenu",["$compile",function(e){return t("#application").mousedown(function(e){!t.popup.manualClose&&!t.popup.hitTest(e.clientX,e.clientY)&&t.popup.closeGroup("menu")}),{restrict:"A",link:function(r,s,o){r.$on(n.OPEN_MENU,function(n,s,o,u){var a=10,f,l={};if("event"in window){f=t(window.event.target?window.event.target:window.event.srcElement);while(f&&f.length&&!f.hasClass("button"))f=f.parent();var c=t("#application").offset();l.top=event.pageY-c.top,l.left=event.pageX-c.left}if(!s.src){t.popup.closeByDepth("menu","#application",u);return}i.get(s.src).then(function(n){var i;switch(s.scrollMode){case"menu":i=t("#menu").html();break;case"scroll":s["class"]=(s["class"]||"")+" scroll",i=t("#slide").html();break;default:i=t("#slide").html()}i=t.trim(i.replace(/style=".+"/i,""));var a=e(i)(r);a.scope().widget=s,a.scope().depth=u,a.width(n.template.view.width),a.height(n.template.view.height),f.length&&(l.target=f,l.direction=s.direction||"bottom"),r.question.rtl&&(l.left-=a.width(),l.direction==="left"?l.direction="right":l.direction==="right"&&(l.direction="left")),s.top&&(l.top=s.top),s.left&&(l.left=s.left),s.right&&(l.right=s.right),s.bottom&&(l.bottom=s.bottom),s.margin&&(l.margin=s.margin),!t.popup.manualClose&&s.close==="manual"&&(t.popup.manualClose=!0),a.popup({appendTo:".popup-container",id:s.id,position:l,group:"menu",groupDepth:u,zIndex:5e3,modal:s.modal===!0,overlayClose:s.close!=="manual",onOpen:function(e){s.events&&s.events.open&&o.invoke(o,s.events.open)},onClose:function(e){s.events&&s.events.close&&o.invoke(o,s.events.close),t.popup.close(e.attr("id"))}}),r.$$phase||r.$digest()})}),r.$on(n.CLOSE_MENU,function(e,n){t.popup.manualClose=!1,n?t.popup.close(n):t.popup.closeGroup("menu")})}}}])}),define("directives/widgets/choice",["angular","session","utils/data","jquery","underscore","utils/cache","utils/parser"],function(e,t,n,r,i,s,o){function a(e,t,n){this.scope=e,this.widget=t,this.element=n,this.init()}var u=1;a.init=function(e,t,n){return new a(e,t,n)};var f=a.prototype;f.init=function(){this.settings=this.getSettings();var e=this.settings;this._invalidateTimer=null,this.points=0,this.response="",s("choice").has(e.id)?(this.setOptions(s("choice").get(e.id)),this.clearAllSelectedItems()):this.hasOptions()||this._initOptions(),this._initSortable(),this._initHandlers(),this._initTooltip(),this._initSizeTo(),this._initCreateRestorePoint(!t.updatedOn)},f.getSettings=function(){var t=e.extend({id:"choice_"+u++,randomizeOrder:!1,containLimit:0,selectLimit:undefined,correctPoolCount:undefined,distractPoolCount:undefined,enableCopyOption:!1,enablePositionOption:!1,enableSizeOption:!1,enableDragOption:!1,pool:"",options:"",setSelectedOptions:"",setPositions:"",setPoints:"",setLimitReached:"",sizeTo:"",scoreOn:"",removeOn:"",returnOn:""},this.widget);return this.widget.id&&(t.id=this.widget.id),t.selectLimit=t.selectLimit||undefined,t.correctPoolCount=t.correctPoolCount||undefined,t.distractPoolCount=t.distractPoolCount||undefined,t},f._initSortable=function(){var n=this,i=this.settings,s=this.element;if(!i.enableDragOption)return;var o={};o.connectWith=".droppable",o.start=function(e,t){r(".tippy").remove(),t.item.show(),t.item.startPos=t.item.index()},o.remove=function(e,r){if(!i.enableCopyOption){var s=n.getOptions();s.splice(r.item.startPos,1),t.set(n.scope,i.state,s,!0),n.updatePoints(),n.invalidate()}},o.receive=function(r,s){var o=e.copy(s.item.scope().option);s.item.index()!==-1?n.getOptions().splice(s.item.index(),0,o):n.getOptions().push(o),s.item.remove(),t.set(n.scope,i.state,n.options,!0),n.updatePoints(),n.invalidate()},o.stop=function(e,r){if(!i.enableSortOption)return;var s=r.item.startPos,o=r.item.index();if(o!==-1&&s!==o){var u=n.getOptions(),a=u[s];u.splice(s,1),u.splice(o,0,a),t.set(n.scope,i.state,n.options,!0),n.updatePoints(),n.invalidate()}},o.update=function(e,t){n.scope.$root.$broadcast("clearAllSelections"),n.invalidate()},i.enableCopyOption?(o.helper="clone",o.placeholder={element:function(t,n,r,i){return e.element('<div class="choice-placeholder"></div>')[0]},update:function(e,t){return}}):r("ul",s).addClass("droppable"),r("ul",s).sortable(o).disableSelection()},f._initOptions=function(){var e=this,t=this.settings,n=this.getCorrectionPool(),r=this.getDistractorPool(),o=this.getSoloPool(),u=i.sortBy(n.concat(r),function(e){return e.order});t.randomizeOrder&&(u=i.shuffle(u)),o.length&&u.push(o.pop()),u=this._fixAnchorOptions(u),this._setupOrigins(u),s("choice").set(t.id,u.slice(0)),this.setOptions(u),this.options=null},f._initHandlers=function(){var e=this,t=this.settings,n=this.scope;n.select=function(n){t.removeOn&&t.removeOn.indexOf("click")!==-1?e.removeOption(n):t.returnOn&&t.returnOn.indexOf("click")!==-1?e.returnOption(n):n.solo?(e.clearAllSelectedItems(),e.addSelectedItem(n)):e.toggleSelection(n)},n.resetTooltips=function(){e.unbindTooltip(),e.bindTooltip()},n.$watch(o.transformProp(t.state),function(n){t.scoreOn&&e.updatePoints()},!0),n.$on("clearAllSelections",this.clearAllSelectedItems.bind(this))},f._initSizeTo=function(){var e=this.settings,t=this.scope,n=this.element,r=1e3,s=50,o,u;e.sizeTo==="children"?u=t.$on("optionCreated",i.debounce(function(){t.properties[e.id]={h:f};var i=!1,a;setTimeout(function(){i=!0},r);var f=n.outerHeight();a=setInterval(function(){var r=n.outerHeight();t.properties[e.id].h=r,t.$$phase||t.$apply(),i&&(o&&o(),u&&u(),clearInterval(a),n.css("height",r))},s),e.id&&(t.properties[e.id].h=f,t.$$phase||t.$apply())},10)):e.sizeTo&&(o=t.$watch("properties."+e.sizeTo+".h",function(e){e&&n.css("height",e)}))},f._initCreateRestorePoint=function(e){t.createRestorePoint(e)},f._initTooltip=function(){var e=this;this.scope.$watch("settings.debug",function(t){t?e.bindTooltip():e.unbindTooltip()})},f._fixAnchorOptions=function(t){var n={},r=t.length,i;while(r--)i=t[r],i.anchor&&(n[r]=i,t.splice(r,1));return e.forEach(n,function(e,n){t.splice(e.order,0,e)}),t},f._setupOrigins=function(t){var n=this.scope,r=this.settings;e.forEach(t,function(e){e.origin={id:r.id,state:r.state}})},f.getSelectedOptions=function(){var t=this.options,n=[];return e.forEach(t,function(e){e.selected&&n.push(e.id)}),n.sort(),n.join(",")},f.getSelectedPositions=function(){var t=[],n=this.getOptions();return e.forEach(n,function(e){e.id!==undefined&&t.push(e.id)}),t.join(",")},f.updatePoints=function(){var t=0,n,r=this,i=this.settings;if(i.scoreOn==="selectionChange")n=this.getOptions(),e.forEach(n,function(e){e.selected&&e.weight&&(t+=e.weight)}),this.points=t,this.invalidate();else if(i.scoreOn==="positionChange"){n=this.getOptions();var s,o;e.forEach(n,function(e,n){e.correctTarget&&e.correctPosition?(s=new RegExp("\\b"+(n+1)+"\\b","i"),o=new RegExp("\\b"+i.id+"\\b","i"),(e.correctPosition+"").match(s)&&(e.correctTarget+"").match(o)&&(t+=e.weight)):e.correctPosition?(s=new RegExp("\\b"+(n+1)+"\\b","i"),(e.correctPosition+"").match(s)&&(t+=e.weight)):e.correctTarget&&(o=new RegExp("\\b"+i.id+"\\b","i"),(e.correctTarget+"").match(o)&&(t+=e.weight))}),this.points=t,this.invalidate()}},f.getSelectedItems=function(){var t=this.getOptions(),n=[];return e.forEach(t,function(e){e.selected&&n.push(e)}),n},f.toggleSelection=function(e){var t=this,n=this.scope,r=this.settings;e.selected&&!this.dragging?t.removeSelectedItem(e):(r.enableDragOption&&n.$root.$broadcast("clearAllSelections"),t.addSelectedItem(e))},f.addSelectedItem=function(t){var n=this,r=this.settings,i=this.getSelectedItems(),s=this.getOptions();if(r.selectLimit&&i.length>=r.selectLimit){var o=i.length-r.selectLimit+1;while(o){var u=i[i.length-o].id;e.forEach(s,function(e){e.id===u?n.removeSelectedItem(e):e.id===t.id&&(e.selected=!0,t.selected=!0)}),o-=1}}e.forEach(s,function(e){e.id===t.id&&(e.selected=!0,t.selected=!0)}.bind(this)),t.solo||e.forEach(s,function(e){e.solo&&e.selected&&n.removeSelectedItem(e)}),this.updatePoints(),this.invalidate()},f.removeSelectedItem=function(t){var n=this.getOptions();e.forEach(n,function(e){e.id===t.id&&(e.selected=!1,t.selected=!1)}.bind(this)),this.updatePoints(),this.invalidate()},f.clearAllSelectedItems=function(){var t=this.getOptions();e.forEach(t,function(e){e.selected=!1}),this.selectedOptions=[],this.updatePoints(),this.invalidate()},f.removeOption=function(t){var n=this.getOptions();e.forEach(n,function(e,r){e.id===t.id&&n.splice(r,1)}),this.updatePoints(),this.invalidate()},f.returnOption=function(n){var r=this.scope,i=this.getOptions();e.forEach(i,function(e,s){if(e.id===n.id){i.splice(s,1);var o=t.get(r,e.origin.state,!0);o.push(e),t.set(r,e.origin.state,o,!0)}}),this.updatePoints(),this.invalidate()},f.hasOptions=function(){var e=this.settings;return!!t.get(this.scope,e.state,!0)},f.getOptions=function(){var e=this.settings;return this.options||(this.options=t.get(this.scope,e.state,!0)),this.options},f.setOptions=function(e){var n=this.settings;this.options=e,t.set(this.scope,n.state,e,!0)},f.getOptionsPool=function(){var e=this.settings;return e.pool?n.toArray(t.get(this.scope,e.pool,!0)):[]},f.getCorrectionPool=function(){var t=this.settings,n=this.getOptionsPool(),r,s=[];return e.forEach(n,function(t,n){r=e.extend({},t),r.selected=!1,r.order=n,r.weight&&!r.solo&&s.push(r)}),s=i.shuffle(s),s=i.sortBy(s,function(e){return e.include?0:1}),s.slice(0,t.correctPoolCount)},f.getDistractorPool=function(){var t=this.settings,n=this.getOptionsPool(),r,s=[];return e.forEach(n,function(t,n){r=e.extend({},t),r.selected=!1,r.order=n,!r.weight&&!r.solo&&s.push(r)}),s=i.shuffle(s),s=i.sortBy(s,function(e){return e.include?0:1}),s.slice(0,t.distractPoolCount)},f.getSoloPool=function(){var t=this.getOptionsPool(),n,r=[];return e.forEach(t,function(t,i){n=e.extend({},t),n.selected=!1,n.order=i,n.solo&&r.push(n)}),r=i.shuffle(r),r.slice(0,1)},f.cancelInvalidate=function(){clearTimeout(this._invalidateTimer)},f.invalidate=function(){this.cancelInvalidate(),this._invalidateTimer=setTimeout(function(){this.validate()}.bind(this),0)},f.validate=function(){var e=this.settings,n=this.scope,i=this.element;if(this.dragging)return;if(this.options===null)return;e.state&&t.set(n,e.state,this.options,!0),e.setSelectedOptions&&t.set(n,e.setSelectedOptions,this.getSelectedOptions(),!0),e.setPositions&&t.set(n,e.setPositions,this.getSelectedPositions(),!0),e.setPoints&&t.set(n,e.setPoints,this.points,!0),!e.enableCopyOption&&!e.containLimit||this.options.length<e.containLimit?(r("ul",i).addClass("droppable"),e.setLimitReached&&t.set(n,e.setLimitReached,!1,!0)):(r("ul",i).removeClass("droppable"),e.setLimitReached&&t.set(n,e.setLimitReached,!0,!0)),n.dispatch("change",this.widget),this.options=null,n.$$phase||n.$apply()},f.unbindTooltip=function(){var t=this,n=t.element.find("li"),r;e.forEach(n,function(t,n){r=e.element(t),r.unbind("mouseenter"),r.unbind("mouseleave")})},f.bindTooltip=function(){var t=this,n=t.element.find("li"),r;e.forEach(n,function(t,n){r=e.element(t),r.bind("mouseenter",function(t){var n=e.element(t.target),r='<div class="tippy">'+n.scope().option.id+"</div>",i=e.element(r),s=n.offset();i.offset(s),e.element("body").append(i),i.hide().slideDown(150)}),r.bind("mouseleave",function(){e.element(".tippy").remove()})})},e.module("app").directive("uiChoice",function(){return{restrict:"AC",scope:!0,link:function(e,t){a.init(e,e.widget,t)}}}),e.module("app").directive("uiChoiceOption",["$timeout",function(t){return{restrict:"A",link:function(n,r){var i;n.widget.enablePositionOption&&e.isDefined(n.option.x)&&e.isDefined(n.option.y)?(r.css("position","absolute"),r.css("top",n.option.y+"px"),r.css("left",n.option.x+"px"),r.css("zIndex",n.option.zIndex)):(r.css("position",""),r.css("top",""),r.css("left",""),r.css("zIndex","")),n.widget.enableSizeOption&&e.isDefined(n.option.width)&&e.isDefined(n.option.height)?(r.css("width",n.option.width+"px"),r.css("height",n.option.height+"px")):(r.css("width",""),r.css("height","")),n.$emit("optionCreated"),n.$on("$destroy",function(){n.settings.debug&&(i&&i(),i=t(function(){n.resetTooltips()},200))})}}}])}),define("directives/widgets/scrollPane",["angular","jquery"],function(e,t){e.module("app").directive("uiScrollpane",function(){var e=25,n=5,r,i;return{restrict:"A",link:function(s,o,u){function h(){a[0].scrollHeight-a.height()>=5&&(a.height(a.height()-f.height()*2+3),a.css("top",f.height()+"px"),s.scrollable=!0,s.$$phase||s.$apply())}i=o;var a=t(".scroll-view",o),f=t(".scroll-up",o),l=t(".scroll-down",o),c=t(".scroll-up, .scroll-down",o);f.mouseenter(function(){r=window.setInterval(function(){a.scrollTop(a.scrollTop()-n)},e)}),l.mouseenter(function(){r=setInterval(function(){a.scrollTop(a.scrollTop()+n)},e)}),c.bind({click:function(e){e.preventDefault()},mouseleave:function(){r&&(clearInterval(r),r=!1)}}),setTimeout(function(){t.resize.delay=10,t.resize.throttleWindow=!1,s.view?!s.view.width||!s.view.height?a.bind("resize",function(){a.unbind("resize"),h()}):h():h()})}}})}),define("directives/widgets/stepper",["angular","jquery","session"],function(e,t,n){e.module("app").directive("uiStepper",[function(){return{controller:["$scope","$element","$attrs","$filter",function(e,r,i,s){function w(){m=e.properties[o.value],g=parseFloat(m).toFixed(v),isNaN(g)&&(g="");if(g){var t=(l+g+c).split(".").join(y);b&&(t=s("io")(t,b)),e.displayValue=t}else e.displayValue=""}function E(t){var n=S(m)||0;n=parseFloat(n)+t,n<h&&(n=h),n>p&&(n=p),n=n.toFixed(v),e.properties[o.value]=n}function S(e){return b&&(e=s("io")(e,b+"_latin")),(e+"").replace(/[^\d\.]/g,"")}var o=e.widget,u,a,f,l=o.prefix||"",c=o.suffix||"",h=o.min||0,p=o.max||10,d=o.step||1,v=o.decimals||0,m=n.get(e,o.value),g="",y=o.decimal||".",b=o.filter||!1;t("input[type=text]",r).bind("keydown",function(t){t.keyCode===13?e.update():t.keyCode===38?E(1):t.keyCode===40&&E(-1)}),e.$watch('properties["'+o.value+'"]',function(t,n){t!==undefined&&(w(),o.events&&o.events.change&&e.dispatch("change",o))}),e.startStep=function(t){e.stopStep(),u=setTimeout(function(){E(d*t),e.$$phase||e.$apply(),a=setTimeout(function(){f=setInterval(function(){E(d*t),e.$$phase||e.$apply()},50)},500)},1)},e.stopStep=function(){clearInterval(u),clearInterval(a),clearInterval(f)},e.update=function(){var t=S((e.displayValue+"").split(y).join("."));t<h&&(t=h),t>p&&(t=p),t===""||t===undefined||t===null?e.properties[o.value]="":e.properties[o.value]=parseFloat(t).toFixed(v)}}],restrict:"A"}}])}),define("directives/widgets/tooltip",["angular","jquery","config","session"],function(e,t,n,r){e.module("app").directive("uiTooltip",[function(){return{restrict:"A",link:function(n,i,s){var o=n.widget.tooltip||"",u,a=n.widget;if(o){var f;e.forEach(n.tooltips,function(e,t){e.name===o&&(f=e)}),f&&(i.mouseover(function(e){u=setTimeout(function(){t.popup.closeGroup("tooltip");var e,s=r.get(n,f.html);s&&(e=t('<div class="ui-tooltip '+f["class"]+'">'+s+"</div>"));var o=i.position();n.question.rtl&&(e.hide(),t.resize.delay=10,t.resize.throttleWindow=!1,(e.width()===0||e.height()===0)&&e.bind("resize",function(t){e.offset({left:e.offset().left-(e.outerWidth()-i.outerWidth())}),e.show(),e.unbind("resize")})),e.popup({appendTo:".popup-container",modal:!1,group:"tooltip",autoPosition:!1,autoResize:!1,escClose:!1,position:o})},500)}),i.mouseout(function(e){clearTimeout(u),t.popup.closeGroup("tooltip")}),i.mousedown(function(e){clearTimeout(u),t.popup.closeGroup("tooltip")}))}}}}])}),define("directives/widgets/growl",["angular","session","jquery"],function(e,t,n){e.module("app").directive("uiGrowl",[function(){return{restrict:"A",link:function(e,t,n){var r;e.$on("hammer::showGrowl",function(e,n){clearTimeout(r),t.text(n.message),t.stop(),t.css("top",t.innerHeight()*-1+"px"),t.animate({top:"0px"},300,function(){r=setTimeout(function(){t.animate({top:t.innerHeight()*-1+"px"},300)},3e3)})})}}}])}),define("directives/widgets/alert",["angular","consts"],function(e,t){e.module("app").directive("uiAlert",[function(){return{restrict:"A",scope:{},replace:!0,template:'<div focus-group="" focus-stack="" focus-group-head="stop" focus-group-tail="stop" class="engine-dialog-container ng-cloak" ng-if="data"><div class="engine-dialog-overlay"></div><div class="engine-dialog"><div class="engine-dialog-titlebar"><span>{{data.title}}</span><span class="engine-dialog-titlebar-close" ng-click="close()"></span></div><div class="engine-dialog-body"><p ng-bind-html="data.message"></p><div class="engine-dialog-controlbar"><div focus-index="0" focus-element="autofocus" class="control-bar-button engine-dialog-body-close" ng-click="close()">{{data.button}}</div></div></div></div> </div>',link:function(e,n,r){e.$on(t.ALERT,function(t,n){e.data=n}),e.close=function(){e.data=null}}}}])}),define("directives/widgets/calculator",["angular","jquery","draggabilly"],function(angular,$,Draggabilly){angular.module("app").directive("uiCalculator",function(){function isOperator(e){return isNaN(e)&&e!=="."?!0:!1}return{restrict:"A",scope:!0,link:function(e,t,n){var r=new Draggabilly(t[0],{handle:".calc-grip"});e.close=function(){t.hide()},$(document).on("keydown",function(t){var n=t.which;n===81?e.memoryClear():n===87?e.memoryAdd():n===69?e.memorySub():n===82?e.memoryShow():n===192?e.clearCalc():n===190?e.acceptInput("."):n===13?e.submit():47<n&&n<58?e.acceptInput(String.fromCharCode(n)):95<n&&n<106?(n-=48,e.acceptInput(String.fromCharCode(n))):n===187||n===107?e.acceptInput("+"):n===189||n===109?e.acceptInput("-"):n===106?e.acceptInput("*"):(n===191||n===111)&&e.acceptInput("/"),e.$$phase||e.$digest()}),e.$on("$destroy",function(){t.off("keydown")})},controller:function($scope){$scope.display="0",$scope.memory="",$scope.exp=[0],$scope.showingResult=!1,$scope.acceptInput=function(e){var t;$scope.showingResult&&($scope.showingResult=!1,isOperator(e)||($scope.exp=[])),e=e.toString();if(e==="."){t=$scope.exp.pop()||"0",isOperator(t)?($scope.exp.push(t),t="0.",$scope.exp.push(t),$scope.updateDisplay()):Math.ceil(t)!==parseInt(t,10)?($scope.exp.push(t),$scope.updateDisplay()):(t+=".",$scope.exp.push(t),$scope.updateDisplay());return}if(isOperator(e)){if(!$scope.exp.length)return;t=$scope.exp.pop(),isOperator(t)||$scope.exp.push(t),$scope.exp.push(e)}else $scope.exp.length?(t=$scope.exp.pop(),isOperator(t)?($scope.exp.push(t),$scope.exp.push(e)):t.toString()==="0"?$scope.exp.push(e):(t+=e.toString(),$scope.exp.push(t))):$scope.exp.push(e);return $scope.updateDisplay(),this},$scope.changeSign=function(){var e,t;return e=$scope.exp.pop()||"0",isOperator(e)?(t=$scope.exp.pop(),t.substr(0,1)==="-"?t=t.substr(1):t="-"+t,$scope.exp.push(t)):e.substr(0,1)==="-"?e=e.substr(1):parseFloat(e)&&(e="-"+e),$scope.exp.push(e),$scope.updateDisplay()},$scope.updateDisplay=function(){var e="";angular.forEach($scope.exp,function(t){return e===""?e=t:e+=t.toString(),e}),e===""&&(e="0"),$scope.display=e.toString()},$scope.clearCalc=function(){return $scope.exp=[],$scope.updateDisplay()},$scope.submit=function(){$scope.showingResult=!0,$scope.exp=[$scope.getMath()],$scope.updateDisplay()},$scope.getMath=function(){var job,last,x;return last=$scope.exp.pop(),isOperator(last)||$scope.exp.push(last),job=$scope.exp.join(""),window.$$calc=0,eval("$$calc = "+job+";"),isOperator(last)&&$scope.exp.push(last),window.$$calc+""},$scope.memoryClear=function(){$scope.memory=""},$scope.memoryShow=function(){$scope.exp=[$scope.memory.toString()],$scope.updateDisplay(),$scope.showingResult=!0},$scope.memoryAdd=function(){var e=Number($scope.memory),t=Number($scope.getMath());$scope.memory=(e+t).toString()},$scope.memorySub=function(){var e=Number($scope.memory),t=Number($scope.getMath());$scope.memory=(e-t).toString()}}}})}),define("filters/io",["angular"],function(e){e.module("app").filter("io",[function(){return function(e,t){if(e){if(t==="arabic")return e+="",e=e.split("0").join("٠"),e=e.split("1").join("١"),e=e.split("2").join("٢"),e=e.split("3").join("٣"),e=e.split("4").join("٤"),e=e.split("5").join("٥"),e=e.split("6").join("٦"),e=e.split("7").join("٧"),e=e.split("8").join("٨"),e=e.split("9").join("٩"),e;if(t==="arabic_latin")return e+="",e=e.split("٠").join("0"),e=e.split("١").join("1"),e=e.split("٢").join("2"),e=e.split("٣").join("3"),e=e.split("٤").join("4"),e=e.split("٥").join("5"),e=e.split("٦").join("6"),e=e.split("٧").join("7"),e=e.split("٨").join("8"),e=e.split("٩").join("9"),e=e.split("۰").join("0"),e=e.split("۱").join("1"),e=e.split("۲").join("2"),e=e.split("۳").join("3"),e=e.split("۴").join("4"),e=e.split("۵").join("5"),e=e.split("۶").join("6"),e=e.split("۷").join("7"),e=e.split("۸").join("8"),e=e.split("۹").join("9"),e}return e}}])}),define("noext",[],function(){var e="noext";return{load:function(e,t,n,r){t([t.toUrl(e)],function(e){n(e)})},normalize:function(t,n){return t+=t.indexOf("?")<0?"?":"&",t+e+"=1"}}}),define("normalize",["require","module"],function(e,t){function n(e,t,n){return e.match(/^\/|([^\:\/]*:)/)?e:s(r(e,t),n)}function r(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function s(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var o=function(e,t,r){var i=/(url\(\s*"(.*)"\s*\))|(url\(\s*'(.*)'\s*\))|(url\(\s*(.*)\s*\))/g,s,o,e;while(s=i.exec(e)){o=s[2]||s[4]||s[6];var u=n(o,t,r),a=s[2]||s[4]?1:0;e=e.substr(0,i.lastIndex-o.length-a-1)+u+e.substr(i.lastIndex-a-1),i.lastIndex=i.lastIndex+(u.length-o.length)}var f=/(@import\s*'(.*)')|(@import\s*"(.*)")/g;while(s=f.exec(e)){o=s[2]||s[4];var u=n(o,t,r);e=e.substr(0,f.lastIndex-o.length-1)+u+e.substr(f.lastIndex-1),f.lastIndex=f.lastIndex+(u.length-o.length)}return e};return o.convertURIBase=n,o}),define("css",["normalize"],function(e){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var t=document.getElementsByTagName("head")[0],n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=function(e,t,r){var i,s,o;if(typeof XMLHttpRequest!="undefined")i=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(s=0;s<3;s+=1){o=n[s];try{i=new ActiveXObject(o)}catch(u){}if(i){n=[o];break}}i.open("GET",e,requirejs.inlineRequire?!1:!0),i.onreadystatechange=function(n){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):t(i.responseText))},i.send(null)},i={},s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?i.inject=function(e){s.styleSheet.cssText+=e}:i.inject=function(e){s.appendChild(document.createTextNode(e))},i.inspect=function(){if(s.styleSheet)return s.styleSheet.cssText;if(s.innerHTML)return s.innerHTML};var o={};return i.normalize=function(e,t){var n;return e.substr(e.length-1,1)=="!"&&(n=!0),n&&(e=e.substr(0,e.length-1)),e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),e=t(e),n&&(o[e]=n),e},i.load=function(n,s,u,a,f){var l=o[n];l&&delete o[n];var c=n;c.substr(c.length-4,4)!=".css"&&!f&&(c+=".css"),c=s.toUrl(c);if(c.substr(0,7)=="http://"||c.substr(0,8)=="https://"){if(f)throw"Cannot preprocess external css.";var h=document.createElement("link");h.type="text/css",h.rel="stylesheet",h.href=c,t.appendChild(h),u(i)}else r(c,function(t){f&&(t=f(t));var n=window.location.pathname.split("/");n.pop(),n=n.join("/")+"/",c.substr(0,1)!="/"&&(c="/"+e.convertURIBase(c,n,"/")),t=e(t,c,n),i.inject(t),l||u(i)}),l&&u(i)},i}),function(){function e(e){var t={internal:[],external:[]};for(var n=0,r=e.dependencies.length;n<r;n++){var i=e.dependencies[n],s=i.split(".").pop();switch(s){case"css":t.internal.push("css!"+e.paths.exam+i);break;case"js":t.internal.push(e.paths.exam+i);break;case"html":t.internal.push("text!"+e.paths.exam+i),t.external.push("text!"+e.paths.exam+i)}}var o=e.paths.strings||e.global.strings;o&&angular.forEach(o,function(n){t.internal.push("text!"+e.paths.exam+n+".xml")});var u=e.paths.resources||e.global.resources;return u&&angular.forEach(u,function(n){t.internal.push("text!"+e.paths.exam+n+".xml")}),t}require.config({shim:{angular:{deps:["jquery"],exports:"angular",init:function(){angular.module("app",["ngCookies","ngSanitize","ngRoute","ux"])}},"angular-cookies":{deps:["angular"]},"angular-sanitize":{deps:["angular"]},"angular-resource":{deps:["angular"]},"angular-route":{deps:["angular"]},"angular-ux-focusmanager":{deps:["angular"]},interact:{exports:"interact"},"jquery-ui":{deps:["jquery"]},svg:{exports:"svg"},underscore:{exports:"_"},lzma:{exports:"LZMA"}},paths:{angular:"../vendor/angular/angular.min","angular-cookies":"../vendor/angular-cookies/angular-cookies.min","angular-sanitize":"../vendor/angular-sanitize/angular-sanitize.min","angular-route":"../vendor/angular-route/angular-route.min","angular-ui-sortable":"../vendor/angular-ui-sortable/src/sortable","angular-dragdrop":"../vendor/angular-dragdrop/src/angular-dragdrop.min","angular-ux-focusmanager":"libs/focusmanager/angular-ux-focusmanager",draggabilly:"libs/draggabilly/draggabilly.min",lzma:"libs/lzma/lzma_worker",interact:"../vendor/interact/interact.min",jquery:"../vendor/jquery/dist/jquery.min","jquery-ui":"../vendor/jquery-ui/ui/minified/jquery-ui.min",jsondiffpatch:"../vendor/jsondiffpatch/build/bundle-full.min",underscore:"../vendor/underscore/underscore","underscore-string":"../vendor/underscore-strings/underscore.strings",svg:"../vendor/svg.js/dist/svg.min",lms:"service/lms",reportCard:"service/reportCard",session:"service/session",settings:"service/settings",template:"service/template",normalize:"normalize",css:"require/plugins/css",image:"require/plugins/image",noext:"require/plugins/noext",text:"require/plugins/text",json:"require/plugins/json",async:"require/plugins/async"}}),define("main",["config","consts","template","jquery","bootstrap","text!../partials/index.html","text!../partials/widgets.html","jquery-ui","actions/alert","actions/call","actions/choice","actions/close","actions/closeMenu","actions/collection","actions/condition","actions/dialog","actions/dispatch","actions/exec","actions/goto","actions/growl","actions/log","actions/menu","actions/reset","actions/select","actions/set","actions/step","actions/timeout","actions/toggle","actions/style","actions/draggable","actions/droppable","actions/addWidget","actions/cloneWidget","actions/removeWidget","actions/repeat","controllers/mainCtrl","controllers/consoleCtrl","controllers/slideCtrl","controllers/boxCtrl","controllers/editorCtrl","directives/stem","directives/treeview","directives/widget","directives/widgets","directives/behaviors/aria","directives/behaviors/blur","directives/behaviors/events","directives/behaviors/focus","directives/behaviors/format","directives/behaviors/keyboard","directives/behaviors/restrict","directives/behaviors/setFocus","directives/behaviors/mouse","directives/widgets/button","directives/widgets/dialog","directives/widgets/hotspot","directives/widgets/html","directives/widgets/image","directives/widgets/list","directives/widgets/menu","directives/widgets/choice","directives/widgets/scrollPane","directives/widgets/stepper","directives/widgets/tooltip","directives/widgets/growl","directives/widgets/alert","directives/widgets/calculator","filters/io","reportCard","session","utils/cache","utils/compare","utils/data","utils/decrypt","utils/async","utils/inspector","utils/loader","utils/md5","utils/parser","utils/validator","noext!adapters/lms/api_wrapper.js","noext!adapters/lms/lms_communicator.js","css!../css/style.css"],function(t,n,r,i,s,o,u){require(["noext!libs/jquery/jquery.ba-resize.min.js","noext!libs/jquery/jquery.popup.js","noext!libs/jquery/jquery.selection.js","noext!libs/jquery/jquery.xml2json.js","noext!libs/jquery/jquery.nouislider.min.js","noext!../vendor/jquery.splitter/js/jquery.splitter-0.12.0.js"],function(){var a=e(t);require(a.internal,function(){i(document).on(n.READY,function(){i("#preloader").remove()}),i("body").append(o),u=r.formatHTMLWidget(u),i("body").append(u);var e=a.external.length;while(e--)i("body").append(r.formatHTMLWidget(require(a.external[e])));s()})})})}();