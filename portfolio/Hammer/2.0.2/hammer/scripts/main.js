/**
 * EventDispatcher 1.0 Copyright (c) 2012-2013, Flash Extensions, LLC
 * Available via the MIT or new BSD license.
 */

/**
 * JavaScript MD5 Copyright (c) 2012-2013 - https://github.com/blueimp/JavaScript-MD5
 * The JavaScript MD5 script is released under the MIT license.
 */

/**
 * Data 1.0 Copyright (c) 2012-2013, Flash Extensions, LLC
 * Available via the MIT or new BSD license.
 */

/**
 * Cache 1.0 Copyright (c) 2012-2013, Flash Extensions, LLC
 * Available via the MIT or new BSD license.
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * Compare 1.0 Copyright (c) 2012-2013, Flash Extensions, LLC
 * Available via the MIT or new BSD license.
 */

/** @license
 * RequireJS plugin for loading files without adding the JS extension, useful for
 * JSONP services and any other kind of resource that already contain a file
 * extension or that shouldn't have one (like dynamic scripts).
 * Author: Miller Medeiros
 * Version: 0.3.1 (2011/12/07)
 * Released under the MIT license
 */

/** @license
 * RequireJS Image Plugin
 * Author: Miller Medeiros
 * Version: 0.2.2 (2013/02/08)
 * Released under the MIT license
 */

define("config",[],function(){return{}}),define("consts",[],function(){return{VERSION:"2.0.2",CRYPT_KEY:"hammertime",EXAM_STRINGS:"examStrings",HIDE_SPLASH:"hideSplash",APP_INIT:"appInit",CLOSE_DIALOGS:"closeDialogs",OPEN_DIALOG:"openDialog",OPEN_MENU:"openMenu",CLOSE_MENU:"closeMenu",VIEW_PATH:require.toUrl("../views/")}}),define("events/EventDispatcher",["declare","underscore"],function(e,t){var n=e({instance:{_id:0,_listeners:null,constructor:function(){this._id=t.uniqueId("_"),this._listeners={}},subscribe:function(e,t){this.listeners(e).push(t)},unsubscribe:function(e,t){if(t===undefined)this.clearAll(e);else{var n=this.listeners(e);if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}},dispatch:function(e,n){var r=this.listeners(e).reverse(),i=r.length;t.isString(e)&&(e={name:e,stopPropagation:function(){this.cancelled=!0}}),e.stopPropagation=function(){this.cancelled=!0};while(i--){if(e.cancelled)break;r[i](e,n)}},listeners:function(e){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e]},clearAll:function(e){delete this._listeners[e]}}});return n.create=function(){return new n},n}),define("events/dispatcher",["events/EventDispatcher"],function(e){return e.create()}),define("utils/md5",[],function(){return function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,s,o;return i=e&2147483648,s=t&2147483648,n=e&1073741824,r=t&1073741824,o=(e&1073741823)+(t&1073741823),n&r?o^2147483648^i^s:n|r?o&1073741824?o^3221225472^i^s:o^1073741824^i^s:o^i^s}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function s(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function u(e,i,s,o,u,a,f){return e=n(e,n(n(r(i,s,o),u),f)),n(t(e,a),i)}function a(e,r,s,o,u,a,f){return e=n(e,n(n(i(r,s,o),u),f)),n(t(e,a),r)}function f(e,r,i,o,u,a,f){return e=n(e,n(n(s(r,i,o),u),f)),n(t(e,a),r)}function l(e,r,i,s,u,a,f){return e=n(e,n(n(o(r,i,s),u),f)),n(t(e,a),r)}function c(e){var t,n=e.length,r=n+8,i=(r-r%64)/64,s=(i+1)*16,o=Array(s-1),u=0,a=0;while(a<n)t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|e.charCodeAt(a)<<u,a++;return t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|128<<u,o[s-2]=n<<3,o[s-1]=n>>>29,o}function h(e){var t="",n="",r,i;for(i=0;i<=3;i++)r=e>>>i*8&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2);return t}function p(e){e=e.replace(/rn/g,"n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var d=Array(),v,m,g,y,b,w,E,S,x,T=7,N=12,C=17,k=22,L=5,A=9,O=14,M=20,_=4,D=11,P=16,H=23,B=6,j=10,F=15,I=21;e=p(e),d=c(e),w=1732584193,E=4023233417,S=2562383102,x=271733878;for(v=0;v<d.length;v+=16)m=w,g=E,y=S,b=x,w=u(w,E,S,x,d[v+0],T,3614090360),x=u(x,w,E,S,d[v+1],N,3905402710),S=u(S,x,w,E,d[v+2],C,606105819),E=u(E,S,x,w,d[v+3],k,3250441966),w=u(w,E,S,x,d[v+4],T,4118548399),x=u(x,w,E,S,d[v+5],N,1200080426),S=u(S,x,w,E,d[v+6],C,2821735955),E=u(E,S,x,w,d[v+7],k,4249261313),w=u(w,E,S,x,d[v+8],T,1770035416),x=u(x,w,E,S,d[v+9],N,2336552879),S=u(S,x,w,E,d[v+10],C,4294925233),E=u(E,S,x,w,d[v+11],k,2304563134),w=u(w,E,S,x,d[v+12],T,1804603682),x=u(x,w,E,S,d[v+13],N,4254626195),S=u(S,x,w,E,d[v+14],C,2792965006),E=u(E,S,x,w,d[v+15],k,1236535329),w=a(w,E,S,x,d[v+1],L,4129170786),x=a(x,w,E,S,d[v+6],A,3225465664),S=a(S,x,w,E,d[v+11],O,643717713),E=a(E,S,x,w,d[v+0],M,3921069994),w=a(w,E,S,x,d[v+5],L,3593408605),x=a(x,w,E,S,d[v+10],A,38016083),S=a(S,x,w,E,d[v+15],O,3634488961),E=a(E,S,x,w,d[v+4],M,3889429448),w=a(w,E,S,x,d[v+9],L,568446438),x=a(x,w,E,S,d[v+14],A,3275163606),S=a(S,x,w,E,d[v+3],O,4107603335),E=a(E,S,x,w,d[v+8],M,1163531501),w=a(w,E,S,x,d[v+13],L,2850285829),x=a(x,w,E,S,d[v+2],A,4243563512),S=a(S,x,w,E,d[v+7],O,1735328473),E=a(E,S,x,w,d[v+12],M,2368359562),w=f(w,E,S,x,d[v+5],_,4294588738),x=f(x,w,E,S,d[v+8],D,2272392833),S=f(S,x,w,E,d[v+11],P,1839030562),E=f(E,S,x,w,d[v+14],H,4259657740),w=f(w,E,S,x,d[v+1],_,2763975236),x=f(x,w,E,S,d[v+4],D,1272893353),S=f(S,x,w,E,d[v+7],P,4139469664),E=f(E,S,x,w,d[v+10],H,3200236656),w=f(w,E,S,x,d[v+13],_,681279174),x=f(x,w,E,S,d[v+0],D,3936430074),S=f(S,x,w,E,d[v+3],P,3572445317),E=f(E,S,x,w,d[v+6],H,76029189),w=f(w,E,S,x,d[v+9],_,3654602809),x=f(x,w,E,S,d[v+12],D,3873151461),S=f(S,x,w,E,d[v+15],P,530742520),E=f(E,S,x,w,d[v+2],H,3299628645),w=l(w,E,S,x,d[v+0],B,4096336452),x=l(x,w,E,S,d[v+7],j,1126891415),S=l(S,x,w,E,d[v+14],F,2878612391),E=l(E,S,x,w,d[v+5],I,4237533241),w=l(w,E,S,x,d[v+12],B,1700485571),x=l(x,w,E,S,d[v+3],j,2399980690),S=l(S,x,w,E,d[v+10],F,4293915773),E=l(E,S,x,w,d[v+1],I,2240044497),w=l(w,E,S,x,d[v+8],B,1873313359),x=l(x,w,E,S,d[v+15],j,4264355552),S=l(S,x,w,E,d[v+6],F,2734768916),E=l(E,S,x,w,d[v+13],I,1309151649),w=l(w,E,S,x,d[v+4],B,4149444226),x=l(x,w,E,S,d[v+11],j,3174756917),S=l(S,x,w,E,d[v+2],F,718787259),E=l(E,S,x,w,d[v+9],I,3951481745),w=n(w,m),E=n(E,g),S=n(S,y),x=n(x,b);var q=h(w)+h(E)+h(S)+h(x);return q.toLowerCase()}}),define("utils/data",["jquery","underscore"],function($,_){return{clone:function(e,t){return t?$.extend(!0,{},e):_.clone(e)},require:function(e,t){if(_.isUndefined(e))throw _.isUndefined(t)&&(t='The property "'+e+'" is required'),new Error(t)},optional:function(e,t){return _.isUndefined(e)?t:e},toArray:function(e){return _.isUndefined(e)?[]:[].concat(e)},toObject:function(e){return _.isUndefined(e)?{}:_.isObject(e)?e:{value:e}},rawEval:function(val){try{val="(function(){return "+val+";})()",val=eval(val)}catch(e){val="###invalid###"}return val},evaluate:function(e,t){var n=(new Function("with(this) { return "+t+"}")).apply(e);return n+""=="NaN"&&(n=""),n}}}),define("utils/parse",["underscore"],function(e){return{hasPath:function(e){return/\#\w+/.test(e+"")},hasString:function(e){return/\$\w+/.test(e+"")},replacePaths:function(e,t,n,r){return this.replace("#",e,t,n,r)},replaceStrings:function(e,t,n,r){return this.replace("$",e,t,n,r)},replace:function(t,n,r,i,s){if(!n)return r;i=i||"",s=s||"";var o=r.match(new RegExp("\\"+t+"\\w+","gi"));if(!o)return r;o=e.uniq(o);var u,a;for(var f=0,l=o?o.length:0;f<l;f++)u=o[f],a=u.substr(1),n[i+a+s]&&(r=r.replace(new RegExp("\\"+u+"","g"),n[i+a+s]));return r},getUrls:function(e,t){var n,r,i;if(typeof e=="string"){var s=new RegExp('=\\"([^\\"]+\\.('+t+')\\")',"gi");n=e.match(s);for(r=0,i=n?n.length:0;r<i;++r)n[r]=n[r].replace(/(\"|=)/g,"")}return n||[]}}}),define("session",["angular","jquery"],function(e,t){var n,r,i,s={};return{val:function(e,t,n){if(e===undefined||t===undefined)return undefined;i=e[t+"_model"];if(i!==undefined)return n===undefined?this[i]:(this[i]=n,n);if(n===undefined)return e[t];this[t]=n},clear:function(){s={};for(var t in this)e.isFunction(this[t])||delete this[t]},set:function(e,t){this[e]=t},output:function(){var t={},n=["meta","examStrings","score","content","persist"];for(var r in this)!e.isFunction(this[r])&&n.indexOf(r)===-1&&r.indexOf(".persist")===-1&&r.indexOf(".")!==-1&&(t[r]=this[r]);return t},read:function(n){var r=t.parseJSON(n);e.extend(this,r)},write:function(){return JSON.stringify(this.output())}}}),define("utils/cache",["underscore"],function(e){var t,n;return n={},t=function(){var t=[];this.set=function(e,n){t[e]=n},this.get=function(n,r){return e.has(t,n)?t[n]:r},this.merge=function(n,r){return t[n]?t[n]=e.extend(t[n],r):t[n]=r,t[n]},this.keys=function(){var e=[];for(var n in t)e.push(n);return e},this.all=function(){return t},this.has=function(n){return e.has(t,n)},this.remove=function(e){delete t[e]},this.clear=function(){t={}},this.inc=function(e){var n=e+"Counter";return t[n]||(t[n]=0),t[n]+=1,t[n]},this.dec=function(e){var n=e+"Counter";return t[n]||(t[n]=0),t[n]-=1,t[n]}},function(e){return e=e||"__default__",n[e]||(n[e]=new t),n[e]}}),define("template",["angular","jquery","underscore","config","consts","utils/md5","utils/data","utils/parse","session","utils/cache"],function(e,t,n,r,i,s,o,u,a,f){var l={},c={};return{clear:function(e){l={};if(!e)for(var n in c)l[n]=t.extend(!0,{},c[n])},load:function(e,n){if(!e)throw"Url required to load template.";if(c[e]&&c[e].view.data.model.persist===!1)return n(t.extend(!0,{},c[e]));if(l[e])return n(l[e]);var i=this;require(["text!"+r.examPath+e],function(t){i.parse(e,t,n)})},parse:function(n,f,h){var p=this,d='<include src="',v="</include>";if(f.indexOf(d)!==-1){var m=f.indexOf(d),g=f.indexOf('"',m+d.length),y=f.indexOf(v,m+d.length),b=f.substring(m,y+v.length),w=f.substring(m+d.length,g),E=n.substring(0,n.lastIndexOf("/")+1);require(["text!"+r.examPath+E+w],function(e){f=f.split(b).join(e),p.parse(n,f,h)});return}var S=f,x=f.match(/<view.+<\/view>/g);x&&(x=x[0],x=x.replace(/[^\[]<(\w+)([^<]+)\/>/mig,"<$1$2></$1>"),f=f.replace(/<view.+<\/view>/g,x)),f=u.replacePaths(r,f,"","Path");var T=/strings=\"([^\"]+)/gi.exec(f);T=T?T[1]:"";var N=/template=\"([^\"]+)/gi.exec(f);N=N?N[1]:"";var C=/view=\"([^\"]+)/gi.exec(f);C=C?C[1]:"",f=p.fixXMLModelRefs(f,s(n));var k=f.replace(/(<tooltips.+tooltips>)/,""),L=u.getUrls(k,"(jpg|png|gif)"),A=[],O;O=L.length;while(O--)L[O]&&A.push("image!"+r.examPath+L[O]);T&&A.push("text!"+r.examPath+T),N&&A.push("text!"+r.examPath+N),C&&A.push("text!"+r.examPath+C),require(A,function(){if(T){var s=t.xml2json(require("text!"+r.examPath+T));e.extend(a[i.EXAM_STRINGS],s),f=u.replaceStrings(a[i.EXAM_STRINGS],f)}f=u.replaceStrings(a[i.EXAM_STRINGS],f),f=p.fixXMLStructure(f);var d={template:{src:n,path:N,text:S,data:t.xml2json(f)},view:{path:C,text:C?require("text!"+r.examPath+C):"",data:null},images:L};d.view.data={id:d.template.data.id,events:o.toObject(d.template.data.events),behaviors:o.toObject(d.template.data.behaviors),view:o.toObject(d.template.data.view),widgets:o.toArray(d.template.data.view.widget),model:o.toObject(d.template.data.model),commands:o.toObject(d.template.data.commands),listeners:o.toObject(d.template.data.listeners),watchers:o.toObject(d.template.data.watchers)};try{d.view.data.hotkeys=o.toArray(d.template.data.hotkeys.hotkey)}catch(v){d.view.data.hotkeys=[]}try{d.view.data.tooltips=o.toArray(d.template.data.tooltips.tooltip)}catch(v){d.view.data.tooltips=[]}d.view.data.watchers.properties=o.toArray(d.view.data.watchers.property),d.view.data.listeners.events=o.toArray(d.view.data.listeners.event),delete d.view.data.listeners.property,delete d.view.data.listeners.event,l[n]=d,c[n]=t.extend(!0,{},d),h(d)})},fixXMLModelRefs:function(t,n){t=t.split("\n").join("").split("\r").join("");var r=t.match(/<root.+ id="(\w+)">/i);r&&(n=r[1]);var i,s,o,u,a;t=t.replace(/(\w+)="\{(\w+)\}"/gim,'$1-model="$2"'),t=t.split("model-model").join("model"),t=t.replace(/(model|disabled)="this\.([\w\.]+)"/ig,'$1="'+n+'.$2"'),t=t.replace(/(model|disabled)="([^\.\s]+)"/ig,'$1="'+n+'.$2"');var f=t.match(/<commands>(.*?)<\/commands>/ig);if(f){var l=f[0];l=l.replace(/\{(\w+)\}/ig,"{"+n+".$1}"),l=l.replace(/\{([\w\.]+)(\[\'\w+\'\])+\}/ig,"{{model['$1']$2}}"),l=l.replace(/\{([\w\.]+)\}/ig,"{{model['$1']}}");var c=l.match(/expression="([^"]+)"/ig);if(c){var h;e.forEach(c,function(e){h=e.replace(/(\{\{[^}]+\}\})/ig,"parse(&quot;$1&quot;)"),l=l.split(e).join(h)})}t=t.split(f[0]).join(l)}return t},fixXMLStructure:function(t){t=t.replace(/(\r\n|\n|\r)/gm," "),t=t.replace(/<!--[\s\S]*?-->/g,""),t=t.replace(/<(\w+)\/>/gim,"<$1></$1>"),t=t.replace(/(<(\w+)[^>]+?)\/>/gim,"$1></$2>");var n=t.match(/<view.+<\/view>/g);if(n){n=n[0];var r=n.match(/<(?!view|event|behavior|\bdrag\b|\bdrop\b)(\w+)/g),i={};e.forEach(r,function(e){var t=e.substr(1);i[e]||(i[e]=!0,n=n.replace(new RegExp(e+"\\b","gi"),'<widget type="'+t+'" '),n=n.split("</"+t+">").join("</widget>"))}),t=t.replace(/<view.+<\/view>/g,n)}var s=t.match(/<commands(.*?)<\/commands>/g);if(s){s=s[0];var o=f("actions").keys(),u,a,l=o.length;while(l--)a=o[l],s=s.replace(new RegExp("<("+a+")","gm"),'<action type="$1"'),s=s.replace(new RegExp("</"+a+">","gm"),"</action>");t=t.replace(/<commands(.*?)<\/commands>/g,s)}return t=t.replace(/<command\s+name=\"(\w+)\"(.*?)<\/command>/gim,"<$1$2</$1>"),t},formatWidget:function(e){return e.indexOf('type="template/html"')!==-1&&(e=e.split("widget.model").join("model[widget.model]"),e=e.split("widget.disabled").join("model[widget.disabled]"),e=e.replace(/\{\{widget.(?!model)(\w+)\}\}/ig,"{{model.val(widget, '$1')}}"),e=e.split("\n").join("@NEWLINE@").split("\r").join("@RETURN@"),r.widgetCSS&&(e=e.replace(/\sclass=\"([^\"]+)\"/gim,' class="'+r.widgetCSS+' $1"')),e=e.replace(/ui\-position=\"\w+\"/gim,'style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px"'),e=e.replace(/ui\-widget=\"\w+\"/gim,'ui-events="widget" ui-tooltip="widget" style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px"'),e=e.split("@NEWLINE@").join("\n").split("@RETURN@").join("\r")),e}}}),define("bootstrap",["angular","angular-cookies","angular-resource","underscore","config"],function(e,t,n,r,i){return function(){e.module("app").config(["$routeProvider",function(e){e.when("/:qid",{templateUrl:require.toUrl("../views/app.html")}),e.otherwise({redirectTo:"/"+i.defaultQuestion})}]),e.element(document).ready(function(){e.bootstrap(document,["app"])})}}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!../views/index.html",[],function(){return"<div ng-view></div>"}),define("text!../views/widgets.html",[],function(){return'<!-- button -->\r\n<script id="button" type="template/html">\r\n	<div class="widget button {{widget.class}} {{widget.toggle && \'toggle\'}} {{widget.disable  && \'disabled\'}} {{(widget.model && widget.model == widget.value) && \'selected\'}}"\r\n	     title="{{widget.title}}"\r\n	     ui-button value="widget.value" toggle="widget.toggle"\r\n	     ng-disabled="widget.disabled"\r\n	     ui-events="widget"\r\n	     ui-tooltip="widget"\r\n	     ui-drag="widget"\r\n	     ui-drop="widget"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">{{widget.label}}\r\n	</div>\r\n</script>\r\n\r\n<!-- split button-->\r\n<script id="splitbutton" type="template/html">\r\n	<div class="widget button-split {{widget.class}} {{widget.model && widget.model == widget.value && \'selected\'}}"\r\n	     ng-disabled="widget.disabled"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n		<div class="button-push" ui-events="widget" ui-tooltip="widget">{{widget.pushlabel}}</div>\r\n		<div class="button-toggle {{widget.toggle && \'toggle\'}} {{widget.disable  && \'disabled\'}} {{(widget.model == widget.value) && \'selected\'}}"\r\n		     title="{{widget.title}}"\r\n		     ui-button disable="widget.disable" value="widget.value" toggle="true"\r\n		     ui-tooltip="widget">{{widget.togglelabel}}\r\n		</div>\r\n	</div>\r\n</script>\r\n\r\n<!-- image -->\r\n<script id="image" type="template/html">\r\n	<img class="widget image {{widget.class}}" ng-src="{{widget.src}}"\r\n         ui-image="widget"\r\n	     ui-tooltip="widget"\r\n	     ui-events="widget" ondragstart="return false"\r\n	     ui-drag="widget"\r\n	     ui-drop="widget"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px"/>\r\n</script>\r\n\r\n<!-- label -->\r\n<script id="label" type="template/html">\r\n	<div class="widget label"\r\n	     ng-class="widget.class"\r\n	     ui-events="widget"\r\n	     ui-tooltip="widget"\r\n	     ui-drag="widget"\r\n	     ui-drop="widget"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n		{{widget.prefix}}{{widget.value | io:widget.filter}}{{widget.model | io:widget.filter}}{{widget.suffix}}\r\n	</div>\r\n</script>\r\n\r\n<!-- html -->\r\n<script id="html" type="template/html">\r\n	<div class="widget html {{widget.class}}" ui-events="widget" ng-bind-html-unsafe="widget.model"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n	</div>\r\n</script>\r\n\r\n<!-- text -->\r\n<script id="text" type="template/html">\r\n	<input class="widget text {{widget.class}}"\r\n	       ng-model="widget.model"\r\n	       ui-set-focus="widget.focus"\r\n	       ui-events="widget"\r\n	       ui-restrict="{{widget.restrict}}"\r\n	       ui-format="{{widget.format}}"\r\n           ui-mask="{{widget.mask}}"\r\n	       ui-tooltip="widget"\r\n	       placeholder="{{widget.placeholder}}"\r\n	       ng-disabled="widget.disabled"\r\n	       style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px"/>\r\n</script>\r\n\r\n<!-- textarea -->\r\n<script id="textarea" type="template/html">\r\n	<textarea class="widget text {{widget.class}}"\r\n	          ng-model="widget.model"\r\n	          ui-set-focus="widget.focus"\r\n	          ui-events="widget"\r\n	          ui-restrict="{{widget.restrict}}"\r\n	          ui-format="{{widget.format}}"\r\n	          ui-tooltip="widget"\r\n	          placeholder="{{widget.placeholder}}"\r\n	          ng-disabled="widget.disabled"\r\n	          style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px"></textarea>\r\n</script>\r\n\r\n<!-- password -->\r\n<script id="password" type="template/html">\r\n	<input class="widget password {{widget.class}}" type="password"\r\n	       ng-model="widget.model"\r\n	       ui-events="widget"\r\n	       ui-set-focus="widget.focus"\r\n	       ui-tooltip="widget"\r\n	       placeholder="{{widget.placeholder}}"\r\n	       ng-disabled="widget.disabled"\r\n	       style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px"/>\r\n</script>\r\n\r\n<!-- checkbox -->\r\n<script id="checkbox" type="template/html">\r\n	<span class="widget checkbox {{widget.class}}" ui-events="widget" ui-tooltip="widget" style="top:{{widget.y}}px;left:{{widget.x}}px;cursor:default;white-space:nowrap">\r\n		<label style="cursor:default">\r\n            <input type="checkbox" style="cursor:default" ng-model="widget.model" ng-true-value="yes" ng-false-value="no" ng-disabled="widget.disabled">\r\n            <span style="cursor:default" ng-bind="widget.label"></span>\r\n        </label>\r\n	</span>\r\n</script>\r\n\r\n<!-- radio -->\r\n<script id="radio" type="template/html">\r\n	<span class="widget radio {{widget.class}}" ui-events="widget" style="top:{{widget.y}}px;left:{{widget.x}}px;white-space:nowrap">\r\n		<label style="cursor:default">\r\n            <input type="radio" ng-model="widget.model" style="cursor:default" value="{{widget.value}}" ng-disabled="widget.disabled">\r\n            <span style="cursor:default" ng-bind="widget.label"></span>\r\n        </label>\r\n	</span>\r\n</script>\r\n\r\n<!-- dropdown -->\r\n<script id="dropdown" type="template/html">\r\n    <select class="widget" ui-list="widget"\r\n            ui-tooltip="widget"\r\n            ui-events="widget"\r\n   	        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n        <option ng-repeat="o in options" value="{{o.value}}">{{o.label}}</option>\r\n   	</select>\r\n</script>\r\n\r\n<!-- listbox -->\r\n<script id="listbox" type="template/html">\r\n    <select class="widget" ui-list="widget"\r\n            size="2"\r\n            ui-tooltip="widget"\r\n   	        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n        <option ng-repeat="o in options" value="{{o.value}}">{{o.label}}</option>\r\n   	</select>\r\n</script>\r\n\r\n<!-- stepper -->\r\n<script id="stepper" type="template/html">\r\n	<div ui-stepper class="widget stepper {{widget.class}}" ui-tooltip="widget"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n		<input type="text" ng-model="displayValue" class="stepper-text"\r\n		       ui-set-focus="widget.focus" ui-blur="update(value)"/>\r\n		<div ng-mousedown="startStep(-1)" ng-mouseup="stopStep()" class="stepper-button prev"><span class="stepper-arrow"></span></div>\r\n		<div ng-mousedown="startStep(1)" ng-mouseup="stopStep()" class="stepper-button next"><span class="stepper-arrow"></span></div>\r\n	</div>\r\n</script>\r\n\r\n<!-- slide -->\r\n<script id="slide" type="template/html">\r\n	<div ng-controller="SlideCtrl" class="widget slides {{widget.class}}"\r\n	     style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n		<img ui-image="view" ng-src="{{view.image}}" ondragstart="return false"/>\r\n		<!--the form and the submit are so if they hit enter it will respond (i.e. in a dialog) -->\r\n		<form class="content" ui-keyboard>\r\n			<!-- This hidden submit button allows us to hit enter in a text field, then a submit occurs -->\r\n			<input type="submit" style="display: none"/>\r\n			<div ui-widgets="widgets"></div>\r\n		</form>\r\n	</div>\r\n</script>\r\n\r\n<!-- menu -->\r\n<script id="menu" type="template/html">\r\n	<div ng-controller="SlideCtrl" ui-scrollpane class="widget {{widget.class}}" style="top:{{widget.y}}px;left:{{widget.x}}px;height:{{widget.height}}px">\r\n		<div class="scroll-up" ng-show="scrollable"></div>\r\n		<div class="slides scroll-view" style="position:relative;height:100%;overflow:hidden;">\r\n			<img ui-image="view" class="bg-image" ng-src="{{view.image}}" ondragstart="return false"/>\r\n\r\n			<div ui-widgets="widgets"></div>\r\n		</div>\r\n		<div class="scroll-down" ng-show="scrollable"></div>\r\n	</div>\r\n</script>\r\n\r\n<!-- Selected Response -->\r\n<script id="multichoice" type="template/html">\r\n    <ul class="widget sr sr-multichoice {{widget.class}}" ui-multichoice\r\n        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n        <div ui-widgets="dataProvider"></div>\r\n    </ul>\r\n</script>\r\n\r\n<script id="matching" type="template/html">\r\n    <ul class="widget sr sr-multichoice {{widget.class}}" ui-multichoice\r\n        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n        <div ui-widgets="dataProvider"></div>\r\n    </ul>\r\n</script>\r\n\r\n<script id="choiceItemRenderer" type="template/html">\r\n    <li class="choice {{fontSize}} {{widget.class}} {{widget.selected && \'selected\'}}"\r\n        title="{{widget.title}}" ng-click="select(widget)" ng-bind-html-unsafe="widget.label"\r\n        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n    </li>\r\n</script>\r\n\r\n<script id="dragItemRenderer" type="template/html">\r\n    <li class="choice {{fontSize}} {{widget.class}} {{widget.selected && \'selected\'}}"\r\n        title="{{widget.title}}" ng-bind-html-unsafe="widget.label"\r\n        ui-drag="widget"\r\n        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n    </li>\r\n</script>\r\n\r\n<script id="dropItemRenderer" type="template/html">\r\n    <li class="choice {{fontSize}} {{widget.class}} {{widget.selected && \'selected\'}}"\r\n        title="{{widget.title}}" ng-bind-html-unsafe="widget.label"\r\n        ui-drop="widget"\r\n        style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n    </li>\r\n</script>\r\n\r\n<script id="hotspot" type="template/html">\r\n    <div class="widget sr sr-hotspot {{widget.class}}" ui-hotspot\r\n         style="top:{{widget.y}}px;left:{{widget.x}}px;width:{{widget.width}}px;height:{{widget.height}}px">\r\n        <div class="background"></div>\r\n        <div class="canvas"></div>\r\n        <div class="sprite pin" style="position:absolute;top:0;left:0"></div>\r\n    </div>\r\n</script>\r\n\r\n<script id="sequence" type="template/html">\r\n    <div class="widget sr sr_sequence {{widget.class}}" ui-sequence>\r\n        <ul ui-sortable="{connectWith:\'.connectedSortable\'}" data-model="model.listA" id="sortable1" class="connectedSortable">\r\n            <li ng-repeat="item in model.listA" class="ui-state-default">{{item.label}}</li>\r\n        </ul>\r\n\r\n        <ul ui-sortable="{connectWith:\'.connectedSortable\'}" data-model="model.listB" id="sortable2" class="connectedSortable">\r\n            <li ng-repeat="item in model.listB" class="ui-state-highlight">{{item.label}}</li>\r\n        </ul>\r\n    </div>\r\n</script>'}),define("actions/alert",["angular","utils/cache","session"],function(e,t,n){t("actions").set("alert",function(t,n){var r=e.element(document).injector().get("$interpolate"),i=e.copy(n),s=r(n.title),o=r(n.message);i.title=s(t),i.message=o(t),t.showDialog(i)})}),define("actions/close",["angular","utils/cache","session","consts"],function(e,t,n,r){t("actions").set("close",function(e,t){e.$emit(r.CLOSE_DIALOGS,t.target)})}),define("actions/closeMenu",["angular","utils/cache","session","consts"],function(e,t,n,r){t("actions").set("closeMenu",function(e,t){e.$emit(r.CLOSE_MENU,t.target)})}),define("actions/condition",["angular","utils/cache"],function(e,t){t("actions").set("condition",function(e,t,n){n.runCondition(e,t["if"])||n.runCondition(e,t.elseif)||t["else"]&&n.run(e,t["else"])})}),define("actions/dialog",["utils/cache","consts"],function(e,t){e("actions").set("dialog",function(e,n){e.$emit(t.OPEN_DIALOG,n,e)})}),define("actions/dispatch",["angular","utils/cache","session"],function(e,t,n){t("actions").set("dispatch",function(e,t){console.log("dispatch",t),e.$root.registeredEvents.isRegistered(t.name)?e.$root.$broadcast(t.name):e.findCommand(e,"default")})}),define("actions/exec",["angular","utils/cache"],function(e,t){t("actions").set("exec",function(e,t){e.findCommand(e,t.command)})}),define("actions/goto",["angular","utils/cache","session"],function(e,t,n){t("actions").set("goto",function(r,i){var s=e.element(document).injector().get("$interpolate"),o=s(i.src);if(i.target)t().has(i.target)&&(n[i.target+".src"]=o(r));else{var u=o(r);n[r.widget.id+".src"]=o(u)}})}),define("actions/growl",["angular","utils/cache","session"],function(e,t,n){t("actions").set("growl",function(t,n){var r=e.element(document).injector().get("$interpolate"),i=e.copy(n),s=r(i.message||"");i.message=s(t),t.showGrowl(i)})}),define("actions/list",["angular","jquery","utils/cache","session"],function(e,t,n,r){n("actions").set("list",function(n,i){var s=e.element(document).injector().get("$interpolate"),o,u=r[i.model];if(r[i.model]===undefined)r[i.model]=[];else if(!e.isArray(r[i.model])){var a=[];for(var f in r[i.model])if(e.isArray(r[i.model][f])){a=r[i.model][f];break}r[i.model]=a}if(r[i.model]!==undefined)if(i.action==="add")if(i.index!==undefined){var l=e.copy(i.item);l.label_model&&(l.label=r[l.label_model]),l.value_model&&(l.value=r[l.value_model]);if(!isNaN(parseFloat(i.index))&&isFinite(i.index))r[i.model].splice(Number(i.index),0,l);else{o=s(i.index+"");var c=Number(o(n));!isNaN(parseFloat(c))&&isFinite(c)&&r[i.model].splice(c,0,l)}}else r[i.model].push(i.item);else if(i.action==="remove")if(i.index!==undefined)if(!isNaN(parseFloat(i.index))&&isFinite(i.index))r[i.model].splice(Number(i.index),1);else{o=s(i.index+"");var h=Number(o(n));h!=="NaN"&&r[i.model].splice(h,1)}else r[i.model].pop();else if(i.action==="replace"){if(i.index!==undefined){var p=t.extend({},i.item);p.label_model&&(p.label=r[p.label_model]),p.value_model&&(p.value=r[p.value_model]);if(!isNaN(parseFloat(i.index))&&isFinite(i.index))t.extend(r[i.model][Number(i.index)],p);else{o=s(i.index+"");var d=Number(o(n));!isNaN(parseFloat(d))&&isFinite(d)&&t.extend(r[i.model][d],p)}}}else if(i.action==="clear")while(r[i.model].length)r[i.model].pop()})}),define("actions/log",["angular","utils/cache"],function(e,t){t("actions").set("log",function(t,n){var r=e.element(document).injector().get("$log");r.log("LOG:",t,n)})}),define("actions/menu",["utils/cache","consts"],function(e,t){e("actions").set("menu",function(e,n){e.$emit(t.OPEN_MENU,n,e)})}),define("actions/model",["angular","utils/cache","session","utils/data"],function(e,t,n,r){t("actions").set("model",function(i,s){var o=e.element(document).injector().get("$interpolate"),u,a,f;e.forEach(s,function(e,l){if(l!=="type"&&l!=="target"){u=o(e+""),a=u(i);try{a.match(/[\*\+\-\\\%\&]+/ig)&&(a=i.$eval(a)||a)}catch(c){}(a+"").indexOf("@eval")!==-1&&(f=a.substring(6,a.indexOf("(")),t("functions").has(f)?a=i.$eval("functions."+a.substring(6)):a=r.rawEval(a.substring(6))),s.target?n[s.target+"."+l]=a:n[i.alias+"."+l]=a}})})}),define("actions/reset",["angular","utils/cache"],function(e,t){t("actions").set("reset",function(e,t){e.reset()})}),define("actions/step",["angular","utils/cache","session"],function(e,t,n){t("actions").set("step",function(e,t){var r=Number(t.value||1),i=Number(n[t.model]||0);n[t.model]=i+r})}),define("actions/timeout",["angular","utils/cache","session","consts"],function(e,t,n,r){t("actions").set("timeout",function(e,t){setTimeout(function(){e.findCommand(e,t.command)},parseInt(t.duration,10)||0)})}),define("actions/toggle",["angular","utils/cache","session"],function(e,t,n){t("actions").set("toggle",function(e,t){n[t.model]=!n[t.model]})}),define("utils/compare",[],function(){return{operators:["eq","neq","case-eq","case-neq","gt","lt","gte","lte"],test:function(e,t,n){!isNaN(e)&&!isNaN(n)?(e=Number(e),n=Number(n)):(e=e===undefined?"":e,n=n===undefined?"":n);switch(t){case"eq":return(e+"").toLowerCase()===(n+"").toLowerCase();case"neq":return(e+"").toLowerCase()!==(n+"").toLowerCase();case"case-eq":return e+""==n+"";case"case-neq":return e+""!=n+"";case"gt":return e>n;case"lt":return e<n;case"gte":return e>=n;case"lte":return e<=n}}}}),define("controllers/applicationCtrl",["angular","jquery","consts","config","utils/compare","utils/data","utils/cache","session","template"],function(e,t,n,r,i,s,o,u,a){e.module("app").controller("ApplicationCtrl",["$scope","$interpolate","$log",function(r,f,l){o().set("app",r),r.name="ApplicationCtrl",r.widget=null,r.view=null,r.widgets=null,r.model=null,r.commands=null,r.hotkeys=null,r.tooltips=null,r.__details=null,r.$root.registeredEvents={events:{},register:function(e){this.events[e]?this.events[e]++:this.events[e]=1},deregister:function(e){this.events[e]&&(this.events[e]--,this.events[e]<=0&&delete this.events[e])},isRegistered:function(e){return this.events[e]?!0:!1}},r.val=u.val,r.functions=o("functions").all(),r.actions=o("actions").all(),r.$on(n.APP_INIT,function(i,s){r.slide_template_url="",t.popup.closeAllGroups(),a.load(s,function(t){r.alias=t.view.data.id||"app",r.__details=t,e.extend(r,t.view.data);for(var i in t.view.data.model)u[r.alias+"."+i]=t.view.data.model[i];r.model=u,r.widget={src:u.meta.view},setTimeout(function(){r.slide_template_url=n.VIEW_PATH+"slide.html",t.view.data.events.show&&r.findCommand(r,t.view.data.events.show),r.$$phase!=="$apply"&&r.$apply()}),r.$$phase||r.$digest()})}),r.dispatch=function(e,t,n){if(t){var i;t[e]?r.findCommand(n,t[e]):t.events&&t.events[e]&&r.findCommand(n,t.events[e])}},r.$on("findCommand",function(e,t){e.preventDefault(),r.findCommand(r,t)}),r.findCommand=function(e,t){if(!t)return;if(/dispatch/.test(t)){var n=t.replace(/dispatch\(\'(\w+)(.*)/,"$1");r.run(e,{action:{type:"dispatch",name:n}});return}var i=t.indexOf(".");if(i!==-1&&o().has(t.substr(0,i))){e=o().get(t.substr(0,i)),t=t.substr(i+1),e.commands[t]?r.run(e,e.commands[t]):r.findCommand(r,"default");return}if(e){var s=e.commands?e.commands[t]:undefined;if(s)return r.log({name:t,template:e.__details.template.src,command:s,timestamp:new Date}),r.run(e,s),!0;r!==e?r.findCommand(e.$parent,t):t!=="default"&&r.findCommand(r,"default")}else r.findCommand(r,"default");return!1},r.runCondition=function(e,t){if(!t)return!1;t=[].concat(t);for(var n=0,s=t.length;n<s;n++){var o=t[n],a=[],c,h,p;if("expression"in o){var d=f(o.expression+""),v=d(r),m=!1;try{m=r.$eval(v)}catch(g){l.error("Malformed expression in condition: "+o.expression+". Check for literals that should be strings.")}if(m)return r.run(e,o),!0}else if("property"in o){var y=o.property.indexOf(".")===-1?e.alias+"."+o.property:o.property;for(var g in i.operators){var b=i.operators[g];if(o[b]!==undefined&&i.test(o[b],b,u[y]))return r.run(e,o),!0}}}return!1},r.parse=function(e){return isNaN(e)?e+"":Number(e)},r.runActions=function(e,t,n){function s(){var t=i.shift();r.run(e,t,n),i.length&&setTimeout(s)}var i=[].concat(t.group);s()},r.run=function(t,n,i){n.action&&(e.forEach(s.toArray(n.action),function(e,n){o("actions").get(e.type)(t,e,r)}),r.updateScore())}}])}),define("reportCard",["session","utils/compare","utils/data"],function(e,t,n){return{pass:!1,details:{any:[],all:[]},points:-1,update:function(){e.hasOwnProperty("question.points")&&(this.points=Math.round(e["question.points"])),this.pass=!0;if(!e.score)return;e.score.script&&(this.pass=n.evaluate({model:e},e.score.script));var r=e.score.all,i=e.score.any,s=e.score.none,o,u,a,f,l,c,h,p;this.details.any=[],this.details.all=[];if(this.pass&&i&&i["if"]){this.pass=!1,o=[].concat(i["if"]);for(l=0,h=o.length;l<h;l++){u=o[l];if(u){a=u.property;for(c=0,h=t.operators.length;c<h;c++)f=t.operators[c],u[f]&&(p=t.test(u[f],f,e["question."+a]+""),this.details.any.push({property:u.property,operator:f,value:u[f],current:e["question."+a]+"",pass:p})),!this.pass&&p&&(this.pass=!0)}}}if(this.pass&&r&&r["if"]){o=[].concat(r["if"]);for(l=0,h=o.length;l<h;l++){u=o[l];if(u){a=u.property;for(c=0,h=t.operators.length;c<h;c++){f=t.operators[c],u[f]&&(p=t.test(u[f],f,e["question."+a]+""),this.details.all.push({property:u.property,operator:f,value:u[f],current:e["question."+a]+"",pass:p}));if(this.pass&&p===!1){this.pass=!1;break}}}}}}}}),define("controllers/consoleCtrl",["angular","session","reportCard"],function(e,t,n){e.module("app").controller("ConsoleCtrl",["$scope",function(e){e.model=t,e.io_data="",e.reportCard=n,e.selected="key",e.select=function(t){e.selected=t},e.read=function(){t.read(e.io_data),n.update()},e.write=function(){e.io_data=t.write()}}])}),define("controllers/engineCtrl",["angular","jquery","config","consts","events/dispatcher","session","reportCard"],function(e,t,n,r,i,s,o){e.module("app").controller("EngineCtrl",["$scope","$routeParams","$cookieStore",function(u,a,f){function p(e,t){if(e===null||e.length<8)return;if(t===null||t.length<=0)return;var n="",r;for(r=0;r<t.length;r++)n+=t.charCodeAt(r).toString();var i=Math.floor(n.length/5),s=parseInt(n.charAt(i)+n.charAt(i*2)+n.charAt(i*3)+n.charAt(i*4)+n.charAt(i*5),10),o=Math.round(t.length/2),u=Math.pow(2,31)-1,a=parseInt(e.substring(e.length-8,e.length),16);e=e.substring(0,e.length-8),n+=a;while(n.length>10)n=(parseInt(n.substring(0,10),10)+parseInt(n.substring(10,n.length),10)).toString();n=(s*n+o)%u;var f="",l="";for(r=0;r<e.length;r+=2)f=parseInt(parseInt(e.substring(r,r+2),16)^Math.floor(n/u*255),10),l+=String.fromCharCode(f),n=(s*n+o)%u;return l}u.name="EngineCtrl";var l,c=null,h;n.enableContextMenu||(document.oncontextmenu=function(){return!1}),u.initEngine=function(){if(a.qid===undefined)return;s.clear();var i=n.whitelist.concat([{host:"devmaster.certiport.com",secure:!1,local:!1,debug:!0,edit:!1},{host:"devlms.certiport.com",secure:!1,local:!1,debug:!0,edit:!1},{host:"testlms.certiport.com",secure:!1,local:!1,debug:!0,edit:!1},{host:"stagelms.certiport.com",secure:!0,local:!1,debug:!0,edit:!1}]);e.forEach(i,function(e){if(e.host===window.location.hostname||e.includeSubdomains&&window.location.hostname.indexOf(e.host)!==-1)u.settings.debug_mode=e.debug!==!1,u.settings.secure_mode=e.secure,u.settings.local_mode=e.local,u.settings.console=r.VIEW_PATH+"console.html",u.settings.auth_dlg=r.VIEW_PATH+"auth.html",u.settings.can_edit=e.edit});if(c==null){c=new LMSCommunicator(u.settings.local_mode);var f=function(){c._setPreferencesVariable("fontSize",u.fontSize),o.points!=-1?(c.setLMSLessonStatus(o.pass?"passed":"failed"),c.setLMSRawScore(o.points)):(c.setLMSLessonStatus(o.pass?"passed":"failed"),c.setLMSRawScore(o.pass?100:0)),c.setLMSResponseData(s.write()),c.pauseLMSTimer()};if(c.lmsInit(f,!1)){c.pauseLMSTimer();var l=c._getPreferencesVariable("fontSize");l&&(u.fontSize=c._getPreferencesVariable("fontSize"));var h=c.getLMSResponseData();h&&s.read(h)}else c.localMode||(t("body").empty(),window.alert("LMS failed to initialize."))}if(require.defined("text!"+n.examPath+n.strings)){var p=require("text!"+n.examPath+n.strings);s.set(r.EXAM_STRINGS,t.xml2json(require("text!"+n.examPath+n.strings))),u.strings=s[r.EXAM_STRINGS],u.question_url=c.getSecureDataURL(n.questionsPath+"/"+a.qid+".xml")}},u.exec=function(e){u.$broadcast("findCommand",e)},u.onSlideLoaded=function(){require(["text!"+n.examPath+n.resources],function(n){n=[].concat(t.xml2json(n).resource);var r=[];e.forEach(n,function(e){e&&r.push(e.path)})}),i.dispatch(r.HIDE_SPLASH),c.unpauseLMSTimer()},u.settings={version:r.VERSION,console:"",mode:"stem-expanded",debug_mode:!1,secure_mode:!0,local_mode:!1,authorized:!1,debug:!1},u.logs=[],u.question_url="",u.model=s,u.strings=null,u.$watch("model.examStrings",function(e){u.strings=e}),u.user_settings={font_size:"small"},u.reset=function(){u.$broadcast("reset")},u.$on("reset",function(){u.initEngine()}),u.log=function(e){u.logs.push(e)},u.showDialog=function(e){u.dlgData=e},u.hideDialog=function(){u.dlgData=null},u.showGrowl=function(e){clearTimeout(h);var n=t("#growl-container .engine-growl");n.html(e.message),n.stop(),n.css("top",n.innerHeight()*-1+"px"),n.animate({top:"0px"},300,function(){h=setTimeout(function(){n.animate({top:n.innerHeight()*-1+"px"},300)},3e3)})},u.set=function(e,t){u.settings[e]=t},u.openDebug=function(){if(u.settings.secure_mode&&!u.settings.authorized){var e=f.get("key");e?u.authKey(e):u.showAuthDialog();return}u.settings.debug=!0},u.closeDebug=function(){u.settings.debug=!1},u.showAuthDialog=function(){u.showAuth=!0},u.hideAuthDialog=function(){u.showAuth=!1},u.authKey=function(e){e=t.trim(e);var n=p(e+"",r.CRYPT_KEY);if(isNaN(n)){window.alert("The key you provided appears to be invalid.");return}var i=new Date;n-i.getTime()>=0?(u.settings.authorized=!0,f.put("key",e),u.openDebug(),u.hideAuthDialog()):(window.alert("Your key has expired."),u.showAuthDialog(),f.remove("key"))}}])}),define("controllers/questionCtrl",["angular","underscore","consts","config","utils/data","utils/cache","session","reportCard","template"],function(e,t,n,r,i,s,o,u,a){e.module("app").controller("QuestionCtrl",["$scope","$routeParams",function(e,r){s().set("question",e);var f;e.name="QuestionCtrl",e.__globalModel=o,e.initQuestion=function(){a.clear(!0);var t=e.question_url;a.load(t,function(t){e.alias="question";for(var r in t.view.data.model)o[e.alias+"."+r]=t.view.data.model[r];o.meta=t.template.data,o.content=t.template.data.content,o.content.buttons&&(o.content.buttons=i.toArray(o.content.buttons.button)),o.score=t.template.data.score||{},e.model=t.view.data.model;for(var s in e.model)e.$watch('__globalModel["question.'+s+'"]',e.updateScore);e.$broadcast(n.APP_INIT,t.template.data.application),e.$$phase||e.$digest()})},e.$on("reset",function(){e.initQuestion()}),e.updateScore=t.debounce(function(){u.update(),o["reportcard.pass"]=u.pass,e.$apply()},10)}])}),define("controllers/slideCtrl",["angular","utils/md5","utils/cache","session","template"],function(e,t,n,r,i){e.module("app").controller("SlideCtrl",["$scope","$element",function(s,o){function h(e){c[a[e.name]]||(c[a[e.name]]=!0,s.findCommand(s,a[e.name].command)),c[a[e.name]]=!1}function p(){var e=u.length;while(e--)u[e]();for(var t in a)s.$root.registeredEvents.deregister(t);u=[],a={},f={},c={}}function d(c){c&&c!==l&&(p(),l=c,i.load(c,function(i){i.template.data.id?(s.alias=i.template.data.id,n().set(i.template.data.id,s)):s.alias=t(i.template.src),e.forEach(i.view.data.listeners.events,function(e){var t=s.$on(e.name,h);u.push(t),a[e.name]=e,s.$root.registeredEvents.register(e.name)}),e.forEach(i.view.data.watchers.properties,function(e){s.$watch('model["'+e.name+'"]',function(t,n){t!==undefined&&t!==n&&s.findCommand(s,e.command)}),f[e.name]=e}),s.__details=i,e.forEach(i.view.data,function(e,t){s[t]=e});for(var o in i.view.data.model)if(!i.view.data.model.persist||r[s.alias+"."+o]===undefined)r[s.alias+"."+o]=i.view.data.model[o];s.model=r,e.forEach(s.widgets,function(e){e.id&&n().set(e.id,e)}),i.view.data.events.show&&s.findCommand(s,i.view.data.events.show),s.$$phase||s.$digest()}),o.scrollTop(0))}s.view=null,s.widgets=null,s.model=null,s.commands=null,s.hotkeys=null,s.tooltips=null,s.__details=null,s.val=r.val;var u=[],a={},f={},l="",c={};s.widget.id&&s.$watch('model["'+s.widget.id+".src"+'"]',function(e){d(e)}),s.$watch("widget.src",function(e){d(e)}),s.$watch("widget.src_model",function(e){e&&(d(r[e]),s.$watch('model["'+e+'"]',function(e){d(e)}))}),s.onKeyboard=function(e,t){if(s.hotkeys)for(var n=0,r=s.hotkeys.length;n<r;n++){var i=s.hotkeys[n];if(i.combo===e){s.findCommand(s,i.command);break}}},s.dispatch=function(e,t,n){var r=s;n||(n=s),s.$parent.dispatch(e,t,n)},s.$on("$destroy",function(){p()})}])}),define("directives/uiBlur",["angular"],function(e){e.module("app").directive("uiBlur",function(){return{restrict:"A",link:function(e,t,n){t.blur(function(t){t.stopPropagation(),e.$$phase!=="$apply"&&e.$apply(n.uiBlur)})}}})}),define("directives/uiButton",["angular","session"],function(e,t){e.module("app").directive("uiButton",[function(){return{restrict:"A",link:function(e,n,r){var i=e.widget,s="__default__";n.bind("mousedown",function(n){if(i.disable===!0)return;if(i.value===undefined)return;t.val(i,"toggle")?(t[i.model]===i.value?t[i.model]=s:t[i.model]=i.value,i.events&&i.events.toggle&&e.dispatch("toggle",i)):i.model&&i.value&&(t[i.model]=i.value),e.$$phase!=="$apply"&&e.$apply()})}}}])}),define("directives/uiDialog",["angular","jquery","consts","template","utils/cache"],function(e,t,n,r,i){e.module("app").directive("uiDialog",["$compile",function(e){return{restrict:"A",link:function(s,o,u){s.$on(n.OPEN_DIALOG,function(n,o,u){r.load(o.src,function(n){var r=t("#slide").html();r=t.trim(r.replace(/style=".+"/i,""));var a=i().get("app").$new();a.widget=o,a.isDialog=!0,o.id=o.id?o.id:"$$"+o.type+"_"+i().inc();var f=e(r)(a);f.width(n.view.data.view.width),f.height(n.view.data.view.height),f.popup({id:o.id,appendTo:"#application",position:o,maxWidth:"100%",maxHeight:"100%",modal:o.modal===!0,overlayClose:!1,onOpen:function(e){o.events&&o.events.open&&u.findCommand(u,o.events.open)},onClose:function(e){o.events&&o.events.close&&u.findCommand(u,o.events.close),a.$destroy()}}),s.$$phase||s.$digest()})}),s.$on(n.CLOSE_DIALOGS,function(e,n){var r=n||e.targetScope.widget.id;r?r==="*"?t.popup.closeAllGroups():t.popup.close(r):t.popup.close()})}}}])}),define("directives/uiEditor",["angular","jquery","config"],function(e,t,n){var r=e.module("app"),i=n.sdkPath+"../../editor",s={},o=function(){return{restrict:"C",link:function(e,r,o){var u;e.$watch("settings.editor",function(r){if(r&&e.__details&&!s[e.__details.template.src]){s[e.__details.template.src]=!0;var o=i+"?uri="+n.examPath+"&slide="+e.__details.template.src;u=t('<div class="infobar"><a target="'+e.alias+'" href="'+o+'"><i class="sprites edit"></i>'+e.__details.template.src+"</a></div>"),e.settings.editor&&t("#editor").append(u)}})}}};r.directive("slides",o),r.directive("slide",o)}),define("directives/uiEvents",["angular","jquery"],function(e,t){e.module("app").directive("uiEvents",function(){var e={};return e.click=function(e,n){var r=this;e.bind("click",function(e){window.event=e,e.stopPropagation(),t.popup.manualClose||t.popup.closeGroup("menu"),r.$$phase!=="$apply"&&r.$apply(n)})},e.rclick=function(e,n){var r=this;e.bind("mouseup",function(e){e.which===3&&(window.event=e,t.popup.manualClose||t.popup.closeGroup("menu"),r.$$phase!=="$apply"&&r.$apply(n),e.stopPropagation())})},e.dblclick=function(e,t){var n=this;e.bind("dblclick",function(e){window.event=e,n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},e.mousedown=function(e,t){var n=this;e.bind("mousedown",function(e){window.event=e,n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},e.mouseup=function(e,t){var n=this;e.bind("mouseup",function(e){window.event=e,n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},e.mouseenter=function(e,t){var n=this;e.bind("mouseenter",function(e){window.event=e,n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},e.mouseleave=function(e,t){var n=this;e.bind("mouseleave",function(e){window.event=e,n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},e.change=function(e,t){var n=this;e.bind("keyup",function(e){n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()}),e.bind("change",function(e){n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},e.show=function(e,t){var n=this;e.bind("show",function(e){window.event=e,n.$$phase!=="$apply"&&n.$apply(t),e.stopPropagation()})},{restrict:"A",link:function(t,n,r){var i=t.$eval(r.uiEvents),s='dispatch("$event", '+r.uiEvents+")",o,u;if(i&&i.hasOwnProperty("events"))for(var a in i.events)o=a,i.events.hasOwnProperty(o)&&(u=s.split("$event").join(o),e[o]&&e[o].apply(t,[n,u]))}}})}),define("directives/uiFocus",["angular"],function(e){e.module("app").directive("uiFocus",function(){return{restrict:"A",link:function(e,t,n){t.focus(function(t){t.stopPropagation(),e.$$phase!=="$apply"&&e.$apply(n.uiFocus)})}}})}),define("directives/uiFormat",["angular","utils/cache","session"],function(e,t,n){e.module("app").directive("uiFormat",[function(){return{restrict:"A",link:function(e,r,i){var s=n.val(e.widget,"format");if(s&&t("formatters").has(s)){var o=t("formatters").get(s),u=e.widget;o.focus&&r.focus(function(e){n[u.model]=o.focus(n[u.model])}),o.blur&&r.blur(function(e){n[u.model]=o.blur(n[u.model])})}}}}])}),define("directives/uiImage",["angular"],function(e){e.module("app").directive("uiImage",["$parse",function(e){return{restrict:"A",link:function(t,n,r){t.$watch(r.uiImage,function(n){if(n)if(!n.width||!n.height){var i=n.image||n.src||n.src_model,s=new Image;s.src=i,n.width||e(r.uiImage+".width").assign(t,s.width),n.height||e(r.uiImage+".height").assign(t,s.height),t.$$phase||t.$digest()}})}}}])}),define("directives/uiKeyboard",["angular","jquery"],function(e,t){e.module("app").directive("uiKeyboard",function(){var n,r=t.cleanData;t.cleanData=function(e){for(var n=0,i;(i=e[n])!==undefined;n++)t(i).triggerHandler("destroyed");r(e)};var i=[],s={8:"BACKSPACE",9:"TAB",13:"ENTER",19:"PAUSE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",27:"ESC",45:"INSERT",46:"DEL",36:"HOME",35:"END",33:"PAGE_UP",34:"PAGE_DOWN",91:"WIN",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};if(!document.onkeypress){var o=[],u,a,f,l,c,h=function(t){if(!t)return;t.isBlocked||(t.stopImmediatePropagation(),t.stopPropagation());var n=t.keyCode?t.keyCode:t.which;t.keyCode?n=t.keyCode:t.which&&(n=t.which),f=String.fromCharCode(n).toUpperCase(),a=f,l=a,s[n]&&(l=s[n]);if(a){t.shiftKey&&(l="SHIFT+"+l),t.altKey&&(l="ALT+"+l,t.isBlocked||t.preventDefault());if(t.ctrlKey){l="CTRL+"+l;switch(l){case"CTRL+A":case"CTRL+SHIFT+LEFT":case"CTRL+SHIFT+UP":case"CTRL+SHIFT+RIGHT":case"CTRL+SHIFT+BOTTOM":case"CTRL+X":case"CTRL+C":case"CTRL+V":case"CTRL+SHIFT+I":break;default:t.isBlocked||t.preventDefault()}}t.winKey&&(l!=="WIN"?l="WIN+"+l:l="WIN");for(var r=0,o=i.length;r<o;r++)i[r]&&i[r].scope&&i[r].scope.onKeyboard&&i[r].scope.onKeyboard(l);e.element("body").scope().$apply()}};document.keyDown||(document.keyDown=function(e){return e.isBlocked=!0,h(e)}),document.onkeydown||(document.onkeydown=function(e){return h(e)})}return{restrict:"A",link:function(e,t,n){for(var r=0,s=i.length;r<s;++r)if(i[r].scope.$id===e.$id)return;i.push({el:t[0],scope:e}),t.bind("destroyed",function(e){t.unbind("destroyed");for(var n=0,r=i.length;n<r;n++)(!i[n]||i[n].el===e.target)&&i.splice(parseInt(n,10),1)})}}})}),define("directives/uiList",["angular","session"],function(e,t){e.module("app").directive("uiList",[function(){return{restrict:"A",link:function(n,r,i){var s=n.$eval(i.uiList);if(!s.data&&!s.data_model)return;n.listItems=t.val(s,"data"),n.listItems||(n.listItems={option:[]},t[s.data||s.data_model]=n.listItems),e.isArray(n.listItems.option)||(n.listItems.option=[].concat(n.listItems.option)),n.val(s,"data",n.listItems),n.options=n.listItems.option,r.bind("change",function(){var e=Number(r.get(0).selectedIndex);n.selectedItem=n.listItems.option[e],s.model&&n.selectedItem&&(t[s.model]=n.selectedItem.value),s.index_model&&(t[s.index_model]=e),n.$$phase||n.$apply()})},controller:["$scope","$element","$attrs",function(e,n,r){var i=e.$eval(r.uiList);e.$watch("listItems.option.length",function(n){if(n&&e.selectedItem){var r=e.listItems.option,s=-1;while(n--)if(e.selectedItem.$$hashKey===r[n].$$hashKey){s=n;break}i.index_model&&(t[i.index_model]=s),s===-1&&i.model&&(t[i.model]=null),e.$$phase||e.$apply()}}),e.$watch('model["'+i.index_model+'"]',function(e,t){e!==-1&&setTimeout(function(){n[0].selectedIndex=e})})}]}}])}),define("directives/uiMenu",["angular","jquery","consts","config","template"],function(e,t,n,r,i){e.module("app").directive("uiMenu",["$compile",function(e){return t("#application").mousedown(function(e){!t.popup.manualClose&&!t.popup.hitTest(e.clientX,e.clientY)&&t.popup.closeGroup("menu")}),{restrict:"A",link:function(s,o,u){s.$on(n.OPEN_MENU,function(n,o,u){var a=10,f,l={};if("event"in window){f=t(window.event.target?window.event.target:window.event.srcElement);while(f&&f.length&&!f.hasClass("button"))f=f.parent();var c=t("#application").offset();l.top=event.pageY-c.top,l.left=event.pageX-c.left}i.load(o.src,function(n){var i;switch(o.scrollMode){case"menu":i=t("#menu").html();break;case"scroll":o["class"]=(o["class"]||"")+" scroll",i=t("#slide").html();break;default:i=t("#slide").html()}i=t.trim(i.replace(/style=".+"/i,""));var a=e(i)(s);a.scope().widget=o,a.width(n.view.data.view.width),a.height(n.view.data.view.height),f.length&&"direction"in o&&(l.target=f,l.direction=o.direction),r.rtl&&(l.left-=a.width(),l.direction==="left"?l.direction="right":l.direction==="right"&&(l.direction="left")),o.top&&(l.top=o.top),o.left&&(l.left=o.left),o.right&&(l.right=o.right),o.bottom&&(l.bottom=o.bottom),o.margin&&(l.margin=o.margin),!t.popup.manualClose&&o.close==="manual"&&(t.popup.manualClose=!0),t.resize.delay=10,t.resize.throttleWindow=!1,(a.width()===0||a.height()===0)&&a.bind("resize",function(){a.unbind("resize")}),a.popup({appendTo:"#application",id:o.id,position:l,group:"menu",groupDepth:"depth"in o?o.depth:99999,modal:o.modal===!0,overlayClose:o.close!=="manual",onOpen:function(e){o.events&&o.events.open&&u.findCommand(u,o.events.open)},onClose:function(e){o.events&&o.events.close&&u.findCommand(u,o.events.close),t.popup.close(e.attr("id"))}}),s.$$phase||s.$digest()})}),s.$on(n.CLOSE_MENU,function(e,n){t.popup.manualClose=!1,n?t.popup.close(n):t.popup.closeGroup("menu")})}}}])}),define("directives/uiRestrict",["angular","session"],function(e,t){e.module("app").directive("uiRestrict",[function(){return{restrict:"AC",link:function(e,n,r){var i=e.widget,s=t.val(i,"restrict"),o=t.val(i,"maxchars");if(!s&&!o)return;var u=function(e){return e+="",e.match(new RegExp("[^"+s+"]","g"))?!1:e.length>o?!1:!0};n.bind("input",function(r){r.preventDefault();var i=n.getSelectionStart();u(n.val())?(t[e.widget.model]=n.val(),e.$$phase||e.$apply()):(n.val(t[e.widget.model]),i&&i--),n.setCursorPosition(i)})}}}])}),define("directives/uiScrollpane",["angular"],function(e){e.module("app").directive("uiScrollpane",function(){var e=25,t=5,n,r;return{restrict:"A",link:function(i,s,o){function c(){u[0].scrollHeight-u.height()>=5&&(u.height(u.height()-a.height()*2+3),u.css("top",a.height()+"px"),a.width($(".bg-image",s).width()),f.width($(".bg-image",s).width()),i.scrollable=!0,i.$apply())}r=s;var u=$(".scroll-view",s),a=$(".scroll-up",s),f=$(".scroll-down",s),l=$(".scroll-up, .scroll-down",s);a.mouseenter(function(){n=window.setInterval(function(){u.scrollTop(u.scrollTop()-t)},e)}),f.mouseenter(function(){n=setInterval(function(){u.scrollTop(u.scrollTop()+t)},e)}),l.bind({click:function(e){e.preventDefault()},mouseleave:function(){n&&(clearInterval(n),n=!1)}}),setTimeout(function(){jQuery.resize.delay=10,jQuery.resize.throttleWindow=!1,i.view?!i.view.width||!i.view.height?u.bind("resize",function(){u.unbind("resize"),c()}):c():c()})}}})}),define("directives/uiSetFocus",["angular"],function(e){e.module("app").directive("uiSetFocus",function(){function e(e,t){switch(t){case"start":e.setCursorPosition(0,0);break;case"end":e.setCursorPosition(e.val().length,e.val().length);break;case!0:case"all":e.setCursorPosition(0,e.val().length)}}return $.fn.setCursorPosition=function(e,t){if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(e,t===undefined?e:t);else if($(this).get(0).createTextRange){var n=$(this).get(0).createTextRange();n.collapse(!0),n.moveEnd("character",t===undefined?e:t),n.moveStart("character",e),n.select()}},{restrict:"A",link:function(t,n,r){t.widget.focus&&t.widget.focus&&t.widget.focus!=="none"&&(setTimeout(function(){n.focus(),e(n,t.widget.focus)}),t.widget.lockFocus&&n.blur(function(r){r.stopPropagation(),n.focus(),e(n,t.widget.lockFocus)}))}}})}),define("directives/uiStem",["angular"],function(e){e.module("app").directive("uiStem",["$compile",function(e){return{restrict:"A",link:function(t,n,r){t.$watch(r.uiStem,function(r){if(r){r=r.replace(/\[link command="(.+)"\](.+)\[\/link\]/,'<span class="stem-link" ng-click="exec(\'$1\')">$2</span>');var i=e("<div>"+r+"</div>")(t);n.html(i)}})}}}])}),define("directives/uiStepper",["angular","jquery","session"],function(e,t,n){e.module("app").directive("uiStepper",[function(){return{controller:["$scope","$element","$attrs","$filter",function(e,r,i,s){function y(){d=e.model[o.model],v=parseFloat(d).toFixed(p),isNaN(v)&&(v="");if(v){var t=(a+v+f).split(".").join(m);g&&(t=s("io")(t,g)),e.displayValue=t}else e.displayValue=""}function b(t){var n=w(d)||0;n=parseFloat(n)+t,n<l&&(n=l),n>c&&(n=c),n=n.toFixed(p),e.model[o.model]=n}function w(e){return g&&(e=s("io")(e,g+"_latin")),(e+"").replace(/[^\d\.]/g,"")}var o=e.widget,u=0,a=n.val(o,"prefix")||"",f=n.val(o,"suffix")||"",l=n.val(o,"min")||0,c=n.val(o,"max")||10,h=n.val(o,"step")||1,p=n.val(o,"decimals")||0,d=n[o.model],v="",m=n.val(o,"decimal")||".",g=n.val(o,"filter")||!1;t("input[type=text]",r).bind("keydown",function(t){t.keyCode===13&&e.update()}),e.$watch('model["'+o.model+'"]',function(t,n){t!==undefined&&(y(),o.events&&o.events.change&&e.dispatch("change",o))}),e.startStep=function(t){e.stopStep(),setTimeout(function(){b(h*t),e.$root.$apply(),u=setTimeout(function(){u=setInterval(function(){b(h*t),e.$root.$apply()},50)},500)},1)},e.stopStep=function(){clearInterval(u)},e.update=function(){var t=w((e.displayValue+"").split(m).join("."));t<l&&(t=l),t>c&&(t=c),t===""||t===undefined||t===null?e.model[o.model]="":e.model[o.model]=parseFloat(t).toFixed(p)}}],restrict:"A"}}])}),define("directives/uiTooltip",["angular","jquery","config","session"],function(e,t,n,r){e.module("app").directive("uiTooltip",[function(){return{restrict:"A",link:function(i,s,o){var u=r.val(i.widget,"tooltip"),a;if(u){var f;e.forEach(i.tooltips,function(e,t){e.name===u&&(f=e)}),f&&(s.mouseover(function(e){a=setTimeout(function(){t.popup.closeGroup("tooltip");var e;f.html?e=t('<div class="ui-tooltip '+f["class"]+'">'+f.html+"</div>"):f.html_model&&(e=t('<div class="ui-tooltip '+f["class"]+'">'+r[f.html_model]+"</div>"));var i=s.offset();n.rtl&&(e.hide(),t.resize.delay=10,t.resize.throttleWindow=!1,(e.width()===0||e.height()===0)&&e.bind("resize",function(t){e.offset({left:e.offset().left-(e.outerWidth()-s.outerWidth())}),e.show(),e.unbind("resize")})),e.popup({appendTo:"body",modal:!1,group:"tooltip",autoPosition:!1,autoResize:!1,escClose:!1,position:i})},500)}),s.mouseout(function(e){clearTimeout(a),t.popup.closeGroup("tooltip")}),s.mousedown(function(e){clearTimeout(a),t.popup.closeGroup("tooltip")}))}}}}])}),define("directives/uiWidget",["angular","jquery"],function(e,t){return e.module("app").directive("uiWidget",["$compile",function(e){return{scope:!0,link:function(n,r,i){var s;n.$watch(i.uiWidget,function(o){if(o){n.widget=n.$eval(i.ngModel);var u=t("#"+o).html();if(u){var a=e(u);s=a(n),r.append(s)}else alert('Widget type "'+o+'" does not have a script template.')}else s&&s.remove()})}}}])}),define("directives/uiWidgets",["angular","jquery"],function(e,t){e.module("app").directive("uiWidgets",["$compile",function(e){var n=1;return{restrict:"A",link:function(r,i,s){r.$watch(s.uiWidgets,function(s){var o,u,a=i.children();for(o=0,u=a.length;o<u;++o){var f=t(a[o]);f&&(f.scope()&&f.scope().$destroy(),f.remove())}i.empty();if(s){var l;for(o=0,u=s.length;o<u;++o){l=s[o];var c=t("#"+l.type).html();if(c){var h=r.$new();h.widget=l,l.id?l.id=l.id:h.isDialog?l.id=h.alias:l.id="$$"+l.type+"_"+n++,l.model=l.model===undefined?l.id+"_model":l.model;var p=e(t.trim(c))(h);p.attr("data-alias",l.id),i.append(p)}else alert('widget type "'+l.type+'" does not have a script template.')}}})}}}])}),define("directives/uiHotspot",["angular","session","jquery","utils/data"],function(e,t,n,r){e.module("app").directive("uiHotspot",function(){function s(e,t){for(var n=!1,r=-1,i=e.length,s=i-1;++r<i;s=r)(e[r].y<=t.y&&t.y<e[s].y||e[s].y<=t.y&&t.y<e[r].y)&&t.x<(e[s].x-e[r].x)*(t.y-e[r].y)/(e[s].y-e[r].y)+e[r].x&&(n=!n);return n}function o(e){var t="";return t+="M "+e.x+" "+e.y+" ",t+="L "+e.width+" "+e.y+" ",t+="L "+e.width+" "+e.height+" ",t+="L "+e.x+" "+e.height+" ",t+="L "+e.x+" "+e.y+" ",t+="Z",t}function u(e,t){var n=svg(e[0]),r=n.path(t);r.fill({color:"#00FFFF",opacity:1})}function a(t){var r=t.split(" "),i=[];e.forEach(r,function(e){e=n.trim(e),e!==""&&i.push(e)});var s=[],o=0,u=i.length,a,f,l=0,c=0;while(o<u){switch(i[o]){case"M":l=parseInt(i[o+1],10),c=parseInt(i[o+2],10),s.push({x:l,y:c});break;case"L":a=parseInt(i[o+1],10),f=parseInt(i[o+2],10),s.push({x:a,y:f});break;case"Z":}o+=3}return s}var i={left:0,top:0};return n(document).bind("scroll",function(e){i.top=n(document).scrollTop(),i.left=n(document).scrollLeft()}),{restrict:"AC",scope:!0,link:function(e,n,f){var l=e.widget,c=t[l.options],h=n.find(".canvas"),p=n.find(".background"),d=n.find(".pin");d.hide();var v=r.toArray(c.option),m=v.length,g="",y,b;while(m--){y=v[m];switch(y.type){case"rect":b=o(y),y.path=b,g+=b;break;default:g+=y.path+" "}u(h,y.path),y.coords=a(y.path)}n.mousedown(function(n){var r=n.clientX+i.left-d.width()*.5,o=n.clientY+i.top-d.height()*.5;d.offset({top:o,left:r});var u=v.length,a=[],f=!1,c=0;while(u--)s(v[u].coords,{x:n.offsetX,y:n.offsetY})&&(a.push(v[u].id),c+=v[u].weight||0);c?e.$apply(e.dispatch("hit",e.widget)):e.$apply(e.dispatch("miss",e.widget)),t[l.metadata]={top:o,left:r},t[l.points]=c,t[l.selectedOptions]=a,e.updateScore()});var w=new Image;w.onload=function(){p.prepend(w),h.css("width",w.width),h.css("height",w.height)},w.src=c.img,e.session=t,e.$watch('session["'+l.metadata+'"]',function(e){e&&(d.show(),d.offset(e))})}}})}),define("directives/uiMultichoice",["angular","session","utils/data","underscore"],function(e,t,n,r){e.module("app").directive("uiMultichoice",function(){return{restrict:"AC",scope:!0,controller:["$scope","$element","$attrs",function(i,s,o){var u=i.widget,a=t[u.settings]||{},f=a.randomizeOrder||!1,l=a.selectLimit||0,c=a.correctLimit||0,h=a.distractorLimit||0,p=n.toArray(a.option),d=[],v=[],m=[],g,y,b,w;e.forEach(p,function(t,n){g=e.extend({},t),g.type=u.itemRenderer,g["class"]=u.itemRendererClass,g.order=n,e.forEach(u.behaviors,function(e,t){g[t]=e}),t.weight?d.push(g):v.push(g)}),d=r.shuffle(d),v=r.shuffle(v),d=r.sortBy(d,function(e){return e.include?0:1}),v=r.sortBy(v,function(e){return e.include?0:1}),d=d.slice(0,c||undefined),v=v.slice(0,h||undefined),p=r.sortBy(d.concat(v),function(e){return e.order});if(f){var E={};y=p.length;while(y--)b=p[y],b.anchor&&(E[y]=b,p.splice(y,1));p=r.shuffle(p),e.forEach(E,function(e,t){p.splice(t,0,e)})}i.dataProvider=p,i.select=function(n){n.selected=!n.selected;if(n.selected){n.solo?(e.forEach(m,function(e,t){e.selected=!1}),m=[]):e.forEach(m,function(e,t){e.solo&&(e.selected=!1,m.splice(t,1))});if(l&&m.length>=l){var r=m.pop();r.selected=!1}m.push(n)}else e.forEach(m,function(e,t){n===e&&m.splice(t,1)});w=0,e.forEach(i.dataProvider,function(e){e.selected&&(w+=e.weight)});var s=[],o=m.length;while(o--)s.push(m[o].id);s=s.sort(),t[u.selectedOptions]=s,t[u.points]=w,i.updateScore()},t[u.metadata]=p,console.log("whois",p),i.session=t,i.$watch('session["'+u.metadata+'"]',function(e){e&&console.log("val",e)}),d=null,v=null,p=null}]}})}),define("directives/dragdrop/collection",[],function(){var e={},t={};return{addItem:function(e,t){var n=this.getItems(e);n.push(t)},removeItem:function(e,t){var n=this.getItems(e);for(var r=0,i=n.length;r<i;r++){var s=n[r];if(s===t){n.splice(r,1);break}}},removeAll:function(t,n){e[t]=[]},getItems:function(t){return e[t]||(e[t]=[]),e[t]}}}),define("directives/dragDrop/model",["angular","jquery","directives/dragdrop/collection"],function(e,t,n){var r={top:0,left:0};t("body").bind("selectstart",function(e){return t(e.target).is(":input")});var i=new t.Event("remove"),s=t.fn.remove;return t.fn.remove=function(){return t(this).trigger(i),s.apply(this,arguments)},t(document).bind("scroll",function(e){r.top=t(document).scrollTop(),r.left=t(document).scrollLeft()}),{getScrollPos:function(){return r},getCollection:function(){return n},getDragItems:function(){return n.getItems("dragItem")},getDragItemGroup:function(e){return n.getItems(e)},getDropZones:function(){return n.getItems("dropZone")},getDropZoneGroup:function(e){return n.getItems(e)},resetDragItems:function(t){var r=t?t:"dragItem",i=n.getItems(r);e.forEach(i,function(e){e.dropZone=null});var s=t?t:"dropZone",o=n.getItems(s);e.forEach(o,function(e){e.contains=[]})}}}),define("display/collision",[],function(){var e={};return e.hitTest=function(e,t,n){var r;return r=e.offset(),r.right=r.left+e.outerWidth(),r.bottom=r.top+e.outerHeight(),(((t>=r.left?t<=r.right:void 0)?n>=r.top:void 0)?n<=r.bottom:void 0)?!0:!1},e.hitTestObject=function(e,t){var n,r;return n=e.offset(),n.right=n.left+e.outerWidth(),n.bottom=n.top+e.outerHeight(),r=t.offset(),r.right=r.left+t.outerWidth(),r.bottom=r.top+t.outerHeight(),!(r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom)},e.hitTestIndexOf=function(e,t){window.alert("collision.hitTestIndexOf not implemented.")},e}),define("directives/dragdrop/model",["angular","jquery","directives/dragdrop/collection"],function(e,t,n){var r={top:0,left:0};t("body").bind("selectstart",function(e){return t(e.target).is(":input")});var i=new t.Event("remove"),s=t.fn.remove;return t.fn.remove=function(){return t(this).trigger(i),s.apply(this,arguments)},t(document).bind("scroll",function(e){r.top=t(document).scrollTop(),r.left=t(document).scrollLeft()}),{getScrollPos:function(){return r},getCollection:function(){return n},getDragItems:function(){return n.getItems("dragItem")},getDragItemGroup:function(e){return n.getItems(e)},getDropZones:function(){return n.getItems("dropZone")},getDropZoneGroup:function(e){return n.getItems(e)},resetDragItems:function(t){var r=t?t:"dragItem",i=n.getItems(r);e.forEach(i,function(e){e.dropZone=null});var s=t?t:"dropZone",o=n.getItems(s);e.forEach(o,function(e){e.contains=[]})}}}),define("directives/dragDrop/uiDrag",["angular","jquery","display/collision","directives/dragdrop/model","directives/dragdrop/collection"],function(e,t,n,r,i){return e.module("app").directive("uiDrag",["$compile",function(s){function d(r,i,s,o){t(document).unbind("mouseup"),t(document).unbind("mousemove"),i.stopDrag();var u=null,l=!1;e.forEach(f,function(e,t){o?l=n.hitTest(e,o.clientX,o.clientY):l=n.hitTestObject(r,e);if(l){var f=e.scope();f.canDrop(i)&&(s.offset(e.offset()),i.widget.drag.autosize&&(s.width(e.width()),s.height(e.height())),s.css("zIndex",a++),u=f,u.addItem(i))}e.removeClass("accepts-true"),e.removeClass("accepts-false")}),i.dropZone&&i.dropZone.removeItem(i),u||(r.removeClass("accepted-true"),r.removeClass("accepted-false")),i.dropZone=u,u&&(i.data.dropZone=u.data.name),i.$apply()}function v(e,t){var n=e.scope();e.stop(),e.css({"z-index":a++}),n.widget.drag.animate!==!1?e.animate(t,300,function(){}):e.animate(t,0,function(){}),e.removeClass("accepted-true"),e.removeClass("accepted-false")}var o,u,a=1,f=i.getItems("dropZoneElement"),l=i.getItems("mouseDownDropZone"),c,h,p=r.getScrollPos();return{restrict:"AC",link:function(e,r,i){var m=e.widget;if(!m.drag)return;console.log("whois",m);var g,y,b,w,E,S,x;e.$watch("data.dropZone",function(t){if(t===undefined||t===null)e.data.dropZone="",v(r,g)}),r.mousedown(function(i){if(m.drag.enabled===!1)return;console.log("we are here");var T={},N=r.parent(),C=N.scope(),k=N,L=C.alias;while(L!=="app"){N=N.parent(),C=N.scope();if(C.alias!==L){T.parent=k;break}L=C.alias,k=N}g||(g=r.position(),r[0].tagName.toLowerCase()==="li"&&(g.left=0,g.top=0),g.width=r.width(),g.height=r.height()),i.offsetX||(i.offsetX=i.pageX-t(r).offset().left,i.offsetY=i.pageY-t(r).offset().top),o=i.offsetX||0,u=i.offsetY||0;if(m.drag.target){var A,O,M,_,D=!1;for(A=0,O=l.length;A<O;A++)M=l[A],_=M.scope(),M.addClass("accepts-"+_.canDrop(e))}y=r,y.css({"z-index":a++}),m.drag.proxy&&(y=s(t("#"+m.drag.proxy).html())(e),y.css({"z-index":9999}),y.offset(r.offset()),t("body").append(y)),t(document).bind("mouseup",function(n){m.drag.target?(m.drag.hitTestOn==="mouse"?d(y,e,r,n):d(y,e,r),e.dropZone||v(r,g),y!==r&&y.remove()):(t(document).unbind("mouseup"),t(document).unbind("mousemove"),e.stopDrag(),y!==r&&(r.offset(y.position()),y.remove()))}),e.startDrag(),t(document).bind("mousemove",function(t){if(m.drag.enabled===!1)return;b=t.clientX-o+p.left,w=t.clientY-u+p.top;if(m.drag.constrain)switch(m.drag.constrain){case"parent":E=r.parent().parent().offset(),S=r.parent().parent().width(),x=r.parent().parent().height(),b<E.left&&(b=E.left),b+g.width>E.left+S&&(b=E.left+S-g.width);break;case"slide":break;case"app":break;default:}m.drag.axis?m.drag.axis==="x"?y.offset({left:b}):y.offset({top:w}):y.offset({top:w,left:b});if(!m.drag.target)return;if(c){if(m.drag.hitTestOn==="mouse"){if(n.hitTest(c,t.clientX,t.clientY))return}else if(n.hitTestObject(y,c))return;c=null}for(var i=0,s=f.length;i<s;i++){var a=f[i];a.attr("data-hint")!=="down"&&(a.removeClass("accepts-true"),a.removeClass("accepts-false")),c||(y.removeClass("accepted-true"),y.removeClass("accepted-false"),m.drag.hitTestOn==="mouse"?D=n.hitTest(a,t.clientX,t.clientY):D=n.hitTestObject(y,a),D&&(c=a,h=c.scope(),h.widget.drop.hint==="over"&&a.addClass("accepts-"+h.canDrop(e)),r.attr("data-hint")&&y.addClass("accepted-"+h.canDrop(e))))}})})},controller:["$scope","$element","$attrs",function(e,t,n){var r=e.widget;if(!r.drag)return;e.dragging=!1,e.data={id:e.$id,type:"dragItem",name:r.drag.name,dropZone:""},i.addItem("dragItem",e.data),i.addItem(r.drag.group||"global",e.data),e.startDrag=function(){e.dragging=!0,e.$apply()},e.stopDrag=function(){e.dragging=!1,e.$apply()}}]}}])}),define("directives/dragDrop/uiDrop",["angular","jquery","session","directives/dragdrop/model","directives/dragdrop/collection"],function(e,t,n,r,i){return e.module("app").directive("uiDrop",function(){var e=1;return{restrict:"AC",link:function(e,t,n){var r=e.widget;if(!r.drop)return;switch(r.drop.hint){case"down":i.addItem("mouseDownDropZone",t);break;case"over":i.addItem("mouseOverDropZone",t)}i.addItem("dropZoneElement",t)},controller:["$scope","$element","$attrs",function(e,t,r){var s=e.widget;if(!s.drop)return;e.data={id:s.id||e.$id,type:"dropZone",name:s.drop.name,accepts:s.drop.accept,capacity:s.drop.capacity,swap:s.drop.swap,contains:[]},n[s.drop.model]||(n[s.drop.model]={}),s.drop.model&&s.drop.name&&(n[s.drop.model][s.drop.name]=e.data),i.addItem("dropZone",e.data),i.addItem(s.drop.group||"global",e.data),e.canDrop=function(t){var n=!0,r=s.drop.accept;for(var i=0,o=e.data.contains.length;i<o;i++){var u=e.data.contains[i];if(u===t.data)return!0}return!s.drop.swap&&s.drop.capacity&&e.data.contains.length>=s.drop.capacity?!1:(r&&(n=(","+r+",").indexOf(t.widget.drag.target)!==-1),n)},e.addItem=function(t){if(t.dropZone!==e&&s.drop.swap&&e.data.contains.length){var n=e.data.contains[0];e.data.contains.shift(),n.dropZone=null}e.data.contains.push(t.data),console.log("whois",e.data.contains),e.$apply()},e.removeItem=function(t){for(var n=0,r=e.data.contains.length;n<r;n++){var i=e.data.contains[n];if(i===t.data){e.data.contains.splice(n,1),e.$apply();break}}},e.clearAll=function(){e.data.contains=[],e.$apply()}}]}})}),define("filters/io",["angular"],function(e){e.module("app").filter("io",[function(){return function(e,t){if(e){if(t==="arabic")return e+="",e=e.split("0").join("٠"),e=e.split("1").join("١"),e=e.split("2").join("٢"),e=e.split("3").join("٣"),e=e.split("4").join("٤"),e=e.split("5").join("٥"),e=e.split("6").join("٦"),e=e.split("7").join("٧"),e=e.split("8").join("٨"),e=e.split("9").join("٩"),e;if(t==="arabic_latin")return e+="",e=e.split("٠").join("0"),e=e.split("١").join("1"),e=e.split("٢").join("2"),e=e.split("٣").join("3"),e=e.split("٤").join("4"),e=e.split("٥").join("5"),e=e.split("٦").join("6"),e=e.split("٧").join("7"),e=e.split("٨").join("8"),e=e.split("٩").join("9"),e=e.split("۰").join("0"),e=e.split("۱").join("1"),e=e.split("۲").join("2"),e=e.split("۳").join("3"),e=e.split("۴").join("4"),e=e.split("۵").join("5"),e=e.split("۶").join("6"),e=e.split("۷").join("7"),e=e.split("۸").join("8"),e=e.split("۹").join("9"),e}return e}}])}),define("noext",[],function(){var e="noext";return{load:function(e,t,n,r){t([t.toUrl(e)],function(e){n(e)})},normalize:function(t,n){return t+=t.indexOf("?")<0?"?":"&",t+e+"=1"}}}),define("normalize",["require","module"],function(e,t){function n(e,t,n){return e.match(/^\/|([^\:\/]*:)/)?e:s(r(e,t),n)}function r(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function s(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var o=function(e,t,r){var i=/(url\(\s*"(.*)"\s*\))|(url\(\s*'(.*)'\s*\))|(url\(\s*(.*)\s*\))/g,s,o,e;while(s=i.exec(e)){o=s[2]||s[4]||s[6];var u=n(o,t,r),a=s[2]||s[4]?1:0;e=e.substr(0,i.lastIndex-o.length-a-1)+u+e.substr(i.lastIndex-a-1),i.lastIndex=i.lastIndex+(u.length-o.length)}var f=/(@import\s*'(.*)')|(@import\s*"(.*)")/g;while(s=f.exec(e)){o=s[2]||s[4];var u=n(o,t,r);e=e.substr(0,f.lastIndex-o.length-1)+u+e.substr(f.lastIndex-1),f.lastIndex=f.lastIndex+(u.length-o.length)}return e};return o.convertURIBase=n,o}),define("css",["normalize"],function(e){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var t=document.getElementsByTagName("head")[0],n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=function(e,t,r){var i,s,o;if(typeof XMLHttpRequest!="undefined")i=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(s=0;s<3;s+=1){o=n[s];try{i=new ActiveXObject(o)}catch(u){}if(i){n=[o];break}}i.open("GET",e,requirejs.inlineRequire?!1:!0),i.onreadystatechange=function(n){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):t(i.responseText))},i.send(null)},i={},s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?i.inject=function(e){s.styleSheet.cssText+=e}:i.inject=function(e){s.appendChild(document.createTextNode(e))},i.inspect=function(){if(s.styleSheet)return s.styleSheet.cssText;if(s.innerHTML)return s.innerHTML};var o={};return i.normalize=function(e,t){var n;return e.substr(e.length-1,1)=="!"&&(n=!0),n&&(e=e.substr(0,e.length-1)),e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),e=t(e),n&&(o[e]=n),e},i.load=function(n,s,u,a,f){var l=o[n];l&&delete o[n];var c=n;c.substr(c.length-4,4)!=".css"&&!f&&(c+=".css"),c=s.toUrl(c);if(c.substr(0,7)=="http://"||c.substr(0,8)=="https://"){if(f)throw"Cannot preprocess external css.";var h=document.createElement("link");h.type="text/css",h.rel="stylesheet",h.href=c,t.appendChild(h),u(i)}else r(c,function(t){f&&(t=f(t));var n=window.location.pathname.split("/");n.pop(),n=n.join("/")+"/",c.substr(0,1)!="/"&&(c="/"+e.convertURIBase(c,n,"/")),t=e(t,c,n),i.inject(t),l||u(i)}),l&&u(i)},i}),define("image",[],function(){function r(){}function i(n){return n=n.replace(t,""),n+=n.indexOf("?")<0?"?":"&",n+e+"="+Math.round(2147483647*Math.random())}var e="bust",t="!bust",n="!rel";return{load:function(e,t,i,s){var o;s.isBuild?i(null):(o=new Image,o.onerror=function(e){i.error(e)},o.onload=function(e){i(o);try{delete o.onload}catch(t){o.onload=r}},e.indexOf(n)!==-1?o.src=t.toUrl(e.replace(n,"")):o.src=e)},normalize:function(e,n){return e.indexOf(t)===-1?e:i(e)}}}),function(){this.require.config({shim:{angular:{deps:["jquery"],exports:"angular",init:function(){this.angular.module("app",["ngCookies","ngResource"])}},"angular-cookies":{deps:["angular"]},"angular-resource":{deps:["angular"]},bootstrapjs:{deps:["jquery"],exports:"bootstrap-js"},svg:{exports:"svg"},underscore:{exports:"_"}},paths:{angular:"../lib/angular/angular.min","angular-cookies":"../lib/angular/angular-cookies.min","angular-resource":"../lib/angular/angular-resource.min",declare:"../lib/declare/declare-min",jquery:"../lib/jquery/jquery.min",underscore:"./../lib/underscore/underscore-min","underscore-string":"../underscore/underscore.string.min",session:"application/session",reportCard:"application/reportCard",template:"application/template",svg:"./../lib/svg/svg.min",normalize:"normalize",css:"require/plugins/css",image:"require/plugins/image",noext:"require/plugins/noext",text:"require/plugins/text",json:"require/plugins/json",async:"require/plugins/async"}}),define("main",["config","consts","events/dispatcher","template","jquery","bootstrap","text!../views/index.html","text!../views/widgets.html","actions/alert","actions/close","actions/closeMenu","actions/condition","actions/dialog","actions/dispatch","actions/exec","actions/goto","actions/growl","actions/list","actions/log","actions/menu","actions/model","actions/reset","actions/step","actions/timeout","actions/toggle","controllers/applicationCtrl","controllers/consoleCtrl","controllers/engineCtrl","controllers/questionCtrl","controllers/slideCtrl","directives/uiBlur","directives/uiButton","directives/uiDialog","directives/uiEditor","directives/uiEvents","directives/uiFocus","directives/uiFormat","directives/uiImage","directives/uiKeyboard","directives/uiList","directives/uiMenu","directives/uiRestrict","directives/uiScrollpane","directives/uiSetFocus","directives/uiStem","directives/uiStepper","directives/uiTooltip","directives/uiWidget","directives/uiWidgets","directives/uiHotspot","directives/uiMultichoice","directives/dragDrop/model","directives/dragDrop/uiDrag","directives/dragDrop/uiDrop","filters/io","reportCard","session","utils/cache","utils/compare","utils/data","utils/md5","utils/parse","noext!../lib/lms/api_wrapper.js","noext!../lib/lms/lms_communicator.js","css!../css/style.css","image!../img/hotspot.png!rel"],function(e,t,n,r,i,s,o,u){require(["noext!../lib/jquery/jquery.ba-resize.min.js","noext!../lib/jquery/jquery.popup.js","noext!../lib/jquery/jquery.selection.js","noext!../lib/jquery/jquery.xml2json.js","noext!../lib/svg/svg.min.js"],function(){var a=[],f=[];for(var l=0,c=e.dependencies.length;l<c;l++){var h=e.dependencies[l],p=h.split(".").pop();switch(p){case"css":a.push("css!"+e.examPath+h);break;case"js":a.push(e.examPath+h);break;case"html":a.push("text!"+e.examPath+h),f.push("text!"+e.examPath+h)}}e.strings&&a.push("text!"+e.examPath+e.strings),e.resources&&a.push("text!"+e.examPath+e.resources),require(a,function(){n.subscribe(t.HIDE_SPLASH,function(){setTimeout(function(){i("#preloader").remove()},300)}),i("body").append(o),u=r.formatWidget(u),i("body").append(u);var e=f.length;while(e--)i("body").append(r.formatWidget(require(f[e])));s()})})})}.call(this);